<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class AST::Node - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../Object.html">Object</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-2B">#+</a>
    
    <li ><a href="#method-i-3C-3C">#&lt;&lt;</a>
    
    <li ><a href="#method-i-3D-3D">#==</a>
    
    <li ><a href="#method-i-append">#append</a>
    
    <li ><a href="#method-i-assign_properties">#assign_properties</a>
    
    <li ><a href="#method-i-clone">#clone</a>
    
    <li ><a href="#method-i-concat">#concat</a>
    
    <li ><a href="#method-i-dup">#dup</a>
    
    <li ><a href="#method-i-eql-3F">#eql?</a>
    
    <li ><a href="#method-i-fancy_type">#fancy_type</a>
    
    <li ><a href="#method-i-inspect">#inspect</a>
    
    <li ><a href="#method-i-original_dup">#original_dup</a>
    
    <li ><a href="#method-i-to_ast">#to_ast</a>
    
    <li ><a href="#method-i-to_s">#to_s</a>
    
    <li ><a href="#method-i-to_sexp">#to_sexp</a>
    
    <li ><a href="#method-i-to_sexp_array">#to_sexp_array</a>
    
    <li ><a href="#method-i-updated">#updated</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-AST::Node">
  <h1 id="class-AST::Node" class="class">
    class AST::Node
  </h1>

  <section class="description">
    
<p><a href="Node.html">Node</a> is an immutable class, instances of which
represent abstract syntax tree nodes. It combines semantic information
(i.e. anything that affects the algorithmic properties of a program) with
meta-information (line numbers or compiler intermediates).</p>

<p>Notes on inheritance</p>

<h6 id="class-AST::Node-label-"><span><a href="#class-AST::Node-label-">&para;</a> <a href="#top">&uarr;</a></span></h6>

<p>The distinction between semantics and metadata is important. Complete
semantic information should be contained within just the {#type} and
{#children} of a <a href="Node.html">Node</a> instance; in other words, if
an <a href="../AST.html">AST</a> was to be stripped of all
meta-information, it should remain a valid <a href="../AST.html">AST</a>
which could be successfully processed to yield a result with the same
algorithmic properties.</p>

<p>Thus, <a href="Node.html">Node</a> should never be inherited in order to
define methods which affect or return semantic information, such as getters
for `class_name`, `superclass` and `body` in the case of a hypothetical
`ClassNode`. The correct solution is to use a generic <a
href="Node.html">Node</a> with a {#type} of `:class` and three children.
See also {Processor} for tips on working with such ASTs.</p>

<p>On the other hand, <a href="Node.html">Node</a> can and should be inherited
to define application-specific metadata (see also {#initialize}) or
customize the printing format. It is expected that an application would
have one or two such classes and use them across the entire codebase.</p>

<p>The rationale for this pattern is extensibility and maintainability. Unlike
static ones, dynamic languages do not require the presence of a predefined,
rigid structure, nor does it improve dispatch efficiency, and while such a
structure can certainly be defined, it does not add any value but incurs a
maintaining cost. For example, extending the <a href="../AST.html">AST</a>
even with a transformation-local temporary node type requires making
globally visible changes to the codebase.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-children" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">children</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Returns the children of this node. The returned value is frozen. The <a
href="Node.html#attribute-i-to_a">#to_a</a> alias is useful for decomposing
nodes concisely. For example:</p>

<pre class="ruby"><span class="ruby-identifier">node</span> = <span class="ruby-identifier">s</span>(:<span class="ruby-identifier">gasgn</span>, :<span class="ruby-identifier">$foo</span>, <span class="ruby-identifier">s</span>(:<span class="ruby-identifier">integer</span>, <span class="ruby-value">1</span>))
<span class="ruby-identifier">var_name</span>, <span class="ruby-identifier">value</span> = <span class="ruby-operator">*</span><span class="ruby-identifier">node</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">var_name</span> <span class="ruby-comment"># =&gt; :$foo</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">value</span>    <span class="ruby-comment"># =&gt; (integer 1)</span>
</pre>

<p>@return [Array]</p>
        
        </div>
      </div>
      
      <div id="attribute-i-hash" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">hash</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Returns the precomputed hash value for this node @return [Fixnum]</p>
        
        </div>
      </div>
      
      <div id="attribute-i-to_a" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">to_a</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Returns the children of this node. The returned value is frozen. The <a
href="Node.html#attribute-i-to_a">#to_a</a> alias is useful for decomposing
nodes concisely. For example:</p>

<pre class="ruby"><span class="ruby-identifier">node</span> = <span class="ruby-identifier">s</span>(:<span class="ruby-identifier">gasgn</span>, :<span class="ruby-identifier">$foo</span>, <span class="ruby-identifier">s</span>(:<span class="ruby-identifier">integer</span>, <span class="ruby-value">1</span>))
<span class="ruby-identifier">var_name</span>, <span class="ruby-identifier">value</span> = <span class="ruby-operator">*</span><span class="ruby-identifier">node</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">var_name</span> <span class="ruby-comment"># =&gt; :$foo</span>
<span class="ruby-identifier">p</span> <span class="ruby-identifier">value</span>    <span class="ruby-comment"># =&gt; (integer 1)</span>
</pre>

<p>@return [Array]</p>
        
        </div>
      </div>
      
      <div id="attribute-i-type" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">type</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        <p>Returns the type of this node. @return [Symbol]</p>
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(type, children=[], properties={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Constructs a new instance of <a href="Node.html">Node</a>.</p>

<p>The arguments `type` and `children` are converted with `to_sym` and `to_a`
respectively. Additionally, the result of converting `children` is frozen.
While mutating the arguments is generally considered harmful, the most
common case is to pass an array literal to the constructor. If your code
does not expect the argument to be frozen, use `#dup`.</p>

<p>The `properties` hash is passed to {#assign_properties}.</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 71</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">children</span>=[], <span class="ruby-identifier">properties</span>={})
  <span class="ruby-ivar">@type</span>, <span class="ruby-ivar">@children</span> = <span class="ruby-identifier">type</span>.<span class="ruby-identifier">to_sym</span>, <span class="ruby-identifier">children</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">freeze</span>

  <span class="ruby-identifier">assign_properties</span>(<span class="ruby-identifier">properties</span>)

  <span class="ruby-ivar">@hash</span> = [<span class="ruby-ivar">@type</span>, <span class="ruby-ivar">@children</span>, <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>].<span class="ruby-identifier">hash</span>

  <span class="ruby-identifier">freeze</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-2B" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">+</span><span
            class="method-args">(array)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Node.html#method-i-concat">concat</a>
        </div>
        
      </div>

    
      <div id="method-i-3C-3C" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">&lt;&lt;</span><span
            class="method-args">(element)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Node.html#method-i-append">append</a>
        </div>
        
      </div>

    
      <div id="method-i-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(other)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Compares `self` to `other`, possibly converting with `to_ast`. Only `type`
and `children` are compared; metadata is deliberately ignored.</p>

<p>@return [Boolean]</p>
          
          

          
          <div class="method-source-code" id="3D-3D-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">equal?</span>(<span class="ruby-identifier">other</span>)
    <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-value">:to_ast</span>
    <span class="ruby-identifier">other</span> = <span class="ruby-identifier">other</span>.<span class="ruby-identifier">to_ast</span>
    <span class="ruby-identifier">other</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">&amp;&amp;</span>
      <span class="ruby-identifier">other</span>.<span class="ruby-identifier">children</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">children</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-append" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">append</span><span
            class="method-args">(element)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Appends `element` to `children` and returns the resulting node.</p>

<p>@return [AST::Node]</p>
          
          

          
          <div class="method-source-code" id="append-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 174</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">append</span>(<span class="ruby-identifier">element</span>)
  <span class="ruby-identifier">updated</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@children</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">element</span>])
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Node.html#method-i-3C-3C">&lt;&lt;</a>
        </div>
        

        
      </div>

    
      <div id="method-i-clone" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">clone</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Node.html#method-i-dup">dup</a>
        </div>
        
      </div>

    
      <div id="method-i-concat" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">concat</span><span
            class="method-args">(array)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Concatenates `array` with `children` and returns the resulting node.</p>

<p>@return [AST::Node]</p>
          
          

          
          <div class="method-source-code" id="concat-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 165</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">concat</span>(<span class="ruby-identifier">array</span>)
  <span class="ruby-identifier">updated</span>(<span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@children</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">array</span>.<span class="ruby-identifier">to_a</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Node.html#method-i-2B">+</a>
        </div>
        

        
      </div>

    
      <div id="method-i-dup" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dup</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Nodes are already frozen, so there is no harm in returning the current node
as opposed to initializing from scratch and freezing another one.</p>

<p>@return self</p>
          
          

          
          <div class="method-source-code" id="dup-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dup</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Node.html#method-i-original_dup">original_dup</a>, <a href="Node.html#method-i-clone">clone</a>
        </div>
        

        
      </div>

    
      <div id="method-i-eql-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eql?</span><span
            class="method-args">(other)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="../Test.html">Test</a> if other object is equal to @param [Object]
other @return [Boolean]</p>
          
          

          
          <div class="method-source-code" id="eql-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>.<span class="ruby-identifier">class</span>)   <span class="ruby-operator">&amp;&amp;</span>
  <span class="ruby-ivar">@type</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>.<span class="ruby-identifier">type</span>)         <span class="ruby-operator">&amp;&amp;</span>
  <span class="ruby-ivar">@children</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">other</span>.<span class="ruby-identifier">children</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inspect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inspect</span><span
            class="method-args">(indent=0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Converts `self` to a s-expression ruby string. The code return will
recreate the node, using the sexp module s()</p>

<p>@param  [Integer] indent Base indentation level. @return [String]</p>
          
          

          
          <div class="method-source-code" id="inspect-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 208</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>(<span class="ruby-identifier">indent</span>=<span class="ruby-value">0</span>)
  <span class="ruby-identifier">indented</span> = <span class="ruby-string">&quot;  &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">indent</span>
  <span class="ruby-identifier">sexp</span> = <span class="ruby-node">&quot;#{indented}s(:#{@type}&quot;</span>

  <span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Node</span>)
      <span class="ruby-identifier">sexp</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;,\n#{child.inspect(indent + 1)}&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">sexp</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;, #{child.inspect}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">sexp</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;)&quot;</span>

  <span class="ruby-identifier">sexp</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-original_dup" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">original_dup</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Node.html#method-i-dup">dup</a>
        </div>
        
      </div>

    
      <div id="method-i-to_ast" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_ast</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@return [AST::Node] self</p>
          
          

          
          <div class="method-source-code" id="to_ast-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 226</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_ast</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_s" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">to_s</span><span
            class="method-args">(indent=0)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Node.html#method-i-to_sexp">to_sexp</a>
        </div>
        
      </div>

    
      <div id="method-i-to_sexp" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_sexp</span><span
            class="method-args">(indent=0)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Converts `self` to a pretty-printed s-expression.</p>

<p>@param  [Integer] indent Base indentation level. @return [String]</p>
          
          

          
          <div class="method-source-code" id="to_sexp-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 184</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_sexp</span>(<span class="ruby-identifier">indent</span>=<span class="ruby-value">0</span>)
  <span class="ruby-identifier">indented</span> = <span class="ruby-string">&quot;  &quot;</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">indent</span>
  <span class="ruby-identifier">sexp</span> = <span class="ruby-node">&quot;#{indented}(#{fancy_type}&quot;</span>

  <span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Node</span>)
      <span class="ruby-identifier">sexp</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;\n#{child.to_sexp(indent + 1)}&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">sexp</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot; #{child.inspect}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">sexp</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;)&quot;</span>

  <span class="ruby-identifier">sexp</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Node.html#method-i-to_s">to_s</a>
        </div>
        

        
      </div>

    
      <div id="method-i-to_sexp_array" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_sexp_array</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Converts `self` to an <a href="../Array.html">Array</a> where the first
element is the type as a <a href="../Symbol.html">Symbol</a>, and
subsequent elements are the same representation of its children.</p>

<p>@return [Array&lt;Symbol, [â€¦Array]&gt;]</p>
          
          

          
          <div class="method-source-code" id="to_sexp_array-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_sexp_array</span>
  <span class="ruby-identifier">children_sexp_arrs</span> = <span class="ruby-identifier">children</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Node</span>)
      <span class="ruby-identifier">child</span>.<span class="ruby-identifier">to_sexp_array</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">child</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  [<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">children_sexp_arrs</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-updated" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">updated</span><span
            class="method-args">(type=nil, children=nil, properties=nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new instance of <a href="Node.html">Node</a> where non-nil
arguments replace the corresponding fields of `self`.</p>

<p>For example, `Node.new(:foo, [ 1, 2 ]).updated(:bar)` would yield `(bar 1
2)`, and `Node.new(:foo, [ 1, 2 ]).updated(nil, [])` would yield `(foo)`.</p>

<p>If the resulting node would be identical to `self`, does nothing.</p>

<p>@param  [Symbol, nil] type @param  [Array, nil]  children @param  [Hash,
nil]   properties @return [AST::Node]</p>
          
          

          
          <div class="method-source-code" id="updated-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">updated</span>(<span class="ruby-identifier">type</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">children</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">properties</span>=<span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">new_type</span>       = <span class="ruby-identifier">type</span>       <span class="ruby-operator">||</span> <span class="ruby-ivar">@type</span>
  <span class="ruby-identifier">new_children</span>   = <span class="ruby-identifier">children</span>   <span class="ruby-operator">||</span> <span class="ruby-ivar">@children</span>
  <span class="ruby-identifier">new_properties</span> = <span class="ruby-identifier">properties</span> <span class="ruby-operator">||</span> {}

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@type</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">new_type</span> <span class="ruby-operator">&amp;&amp;</span>
      <span class="ruby-ivar">@children</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">new_children</span> <span class="ruby-operator">&amp;&amp;</span>
      <span class="ruby-identifier">properties</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">self</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">original_dup</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:initialize</span>, <span class="ruby-identifier">new_type</span>, <span class="ruby-identifier">new_children</span>, <span class="ruby-identifier">new_properties</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-assign_properties" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">assign_properties</span><span
            class="method-args">(properties)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>By default, each entry in the `properties` hash is assigned to an instance
variable in this instance of <a href="Node.html">Node</a>. A subclass
should define attribute readers for such variables. The values passed in
the hash are not frozen or whitelisted; such behavior can also be
implemented by subclassing <a href="Node.html">Node</a> and overriding this
method.</p>

<p>@return [nil]</p>
          
          

          
          <div class="method-source-code" id="assign_properties-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">assign_properties</span>(<span class="ruby-identifier">properties</span>)
  <span class="ruby-identifier">properties</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value">:&quot;@#{name}&quot;</span>, <span class="ruby-identifier">value</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fancy_type" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">fancy_type</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns `@type` with all underscores replaced by dashes. This allows to
write symbol literals without quotes in Ruby sources and yet have nicely
looking s-expressions.</p>

<p>@return [String]</p>
          
          

          
          <div class="method-source-code" id="fancy_type-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/ast-2.4.0/lib/ast/node.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fancy_type</span>
  <span class="ruby-ivar">@type</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&#39;_&#39;</span>, <span class="ruby-string">&#39;-&#39;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

