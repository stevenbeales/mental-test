<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module ActiveRecord::ConnectionAdapters - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/AbstractDeleteAdapter.html">DatabaseCleaner::ConnectionAdapters::AbstractDeleteAdapter</a>
  
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/GenericDeleteAdapter.html">DatabaseCleaner::ConnectionAdapters::GenericDeleteAdapter</a>
  
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/OracleDeleteAdapter.html">DatabaseCleaner::ConnectionAdapters::OracleDeleteAdapter</a>
  
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/AbstractAdapter.html">DatabaseCleaner::ConnectionAdapters::AbstractAdapter</a>
  
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/OracleAdapter.html">DatabaseCleaner::ConnectionAdapters::OracleAdapter</a>
  
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/TruncateOrDelete.html">DatabaseCleaner::ConnectionAdapters::TruncateOrDelete</a>
  
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/AbstractMysqlAdapter.html">DatabaseCleaner::ConnectionAdapters::AbstractMysqlAdapter</a>
  
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/SQLiteAdapter.html">DatabaseCleaner::ConnectionAdapters::SQLiteAdapter</a>
  
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/PostgreSQLAdapter.html">DatabaseCleaner::ConnectionAdapters::PostgreSQLAdapter</a>
  
  
  
    <li><a class="include" href="../DatabaseCleaner/ConnectionAdapters/IBM_DBAdapter.html">DatabaseCleaner::ConnectionAdapters::IBM_DBAdapter</a>
  
  
  </ul>
</div>

    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><a class="extend" href="../ActiveSupport/Autoload.html">ActiveSupport::Autoload</a>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li class="calls-super" ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-begin_db_transaction">#begin_db_transaction</a>
    
    <li ><a href="#method-i-begin_isolated_db_transaction">#begin_isolated_db_transaction</a>
    
    <li ><a href="#method-i-charset">#charset</a>
    
    <li ><a href="#method-i-clear_cache-21">#clear_cache!</a>
    
    <li ><a href="#method-i-collation">#collation</a>
    
    <li ><a href="#method-i-create_database">#create_database</a>
    
    <li ><a href="#method-i-current_database">#current_database</a>
    
    <li ><a href="#method-i-drop_table">#drop_table</a>
    
    <li ><a href="#method-i-empty_insert_statement_value">#empty_insert_statement_value</a>
    
    <li ><a href="#method-i-execute">#execute</a>
    
    <li ><a href="#method-i-explain">#explain</a>
    
    <li ><a href="#method-i-foreign_keys">#foreign_keys</a>
    
    <li ><a href="#method-i-index_algorithms">#index_algorithms</a>
    
    <li ><a href="#method-i-native_database_types">#native_database_types</a>
    
    <li ><a href="#method-i-recreate_database">#recreate_database</a>
    
    <li class="calls-super" ><a href="#method-i-rename_index">#rename_index</a>
    
    <li ><a href="#method-i-rename_table">#rename_table</a>
    
    <li ><a href="#method-i-show_variable">#show_variable</a>
    
    <li ><a href="#method-i-strict_mode-3F">#strict_mode?</a>
    
    <li ><a href="#method-i-supports_advisory_locks-3F">#supports_advisory_locks?</a>
    
    <li ><a href="#method-i-supports_datetime_with_precision-3F">#supports_datetime_with_precision?</a>
    
    <li ><a href="#method-i-supports_explain-3F">#supports_explain?</a>
    
    <li ><a href="#method-i-supports_foreign_keys-3F">#supports_foreign_keys?</a>
    
    <li ><a href="#method-i-supports_index_sort_order-3F">#supports_index_sort_order?</a>
    
    <li ><a href="#method-i-supports_indexes_in_create-3F">#supports_indexes_in_create?</a>
    
    <li ><a href="#method-i-supports_statement_cache-3F">#supports_statement_cache?</a>
    
    <li ><a href="#method-i-supports_transaction_isolation-3F">#supports_transaction_isolation?</a>
    
    <li ><a href="#method-i-supports_views-3F">#supports_views?</a>
    
    <li ><a href="#method-i-supports_virtual_columns-3F">#supports_virtual_columns?</a>
    
    <li ><a href="#method-i-truncate">#truncate</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-ActiveRecord::ConnectionAdapters">
  <h1 id="module-ActiveRecord::ConnectionAdapters" class="module">
    module ActiveRecord::ConnectionAdapters
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="ER_CANNOT_ADD_FOREIGN">ER_CANNOT_ADD_FOREIGN
        
        <dd>
        
      
        <dt id="ER_CANNOT_CREATE_TABLE">ER_CANNOT_CREATE_TABLE
        
        <dd>
        
      
        <dt id="ER_DATA_TOO_LONG">ER_DATA_TOO_LONG
        
        <dd>
        
      
        <dt id="ER_DO_NOT_HAVE_DEFAULT">ER_DO_NOT_HAVE_DEFAULT
        
        <dd>
        
      
        <dt id="ER_DUP_ENTRY">ER_DUP_ENTRY
        
        <dd><p>See <a
href="https://dev.mysql.com/doc/refman/5.7/en/error-messages-server.html">dev.mysql.com/doc/refman/5.7/en/error-messages-server.html</a></p>
        
      
        <dt id="ER_LOCK_DEADLOCK">ER_LOCK_DEADLOCK
        
        <dd>
        
      
        <dt id="ER_NOT_NULL_VIOLATION">ER_NOT_NULL_VIOLATION
        
        <dd>
        
      
        <dt id="ER_NO_REFERENCED_ROW_2">ER_NO_REFERENCED_ROW_2
        
        <dd>
        
      
        <dt id="ER_OUT_OF_RANGE">ER_OUT_OF_RANGE
        
        <dd>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(connection, logger, connection_options, config)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 68</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>, <span class="ruby-identifier">connection_options</span>, <span class="ruby-identifier">config</span>)
  <span class="ruby-keyword">super</span>(<span class="ruby-identifier">connection</span>, <span class="ruby-identifier">logger</span>, <span class="ruby-identifier">config</span>)

  <span class="ruby-ivar">@statements</span> = <span class="ruby-constant">StatementPool</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">type_cast_config_to_integer</span>(<span class="ruby-identifier">config</span>[<span class="ruby-value">:statement_limit</span>]))

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">version</span> <span class="ruby-operator">&lt;</span> <span class="ruby-string">&quot;5.1.10&quot;</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;Your version of MySQL (#{version_string}) is too old. Active Record supports MySQL &gt;= 5.1.10.&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-begin_db_transaction" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">begin_db_transaction</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="begin_db_transaction-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 226</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">begin_db_transaction</span>
  <span class="ruby-identifier">execute</span> <span class="ruby-string">&quot;BEGIN&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-begin_isolated_db_transaction" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">begin_isolated_db_transaction</span><span
            class="method-args">(isolation)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="begin_isolated_db_transaction-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 230</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">begin_isolated_db_transaction</span>(<span class="ruby-identifier">isolation</span>)
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;SET TRANSACTION ISOLATION LEVEL #{transaction_isolation_levels.fetch(isolation)}&quot;</span>
  <span class="ruby-identifier">begin_db_transaction</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-charset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">charset</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the database character set.</p>
          
          

          
          <div class="method-source-code" id="charset-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 298</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">charset</span>
  <span class="ruby-identifier">show_variable</span> <span class="ruby-string">&quot;character_set_database&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-clear_cache-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">clear_cache!</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Clears the prepared statements cache.</p>
          
          

          
          <div class="method-source-code" id="clear_cache-21-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 192</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_cache!</span>
  <span class="ruby-identifier">reload_type_map</span>
  <span class="ruby-ivar">@statements</span>.<span class="ruby-identifier">clear</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-collation" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">collation</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the database collation strategy.</p>
          
          

          
          <div class="method-source-code" id="collation-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 303</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">collation</span>
  <span class="ruby-identifier">show_variable</span> <span class="ruby-string">&quot;collation_database&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create_database" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_database</span><span
            class="method-args">(name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new <a href="ConnectionAdapters/MySQL.html">MySQL</a> database
with optional <code>:charset</code> and <code>:collation</code>. Charset
defaults to utf8.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">create_database</span> <span class="ruby-string">&#39;charset_test&#39;</span>, <span class="ruby-identifier">charset</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;latin1&#39;</span>, <span class="ruby-identifier">collation</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;latin1_bin&#39;</span>
<span class="ruby-identifier">create_database</span> <span class="ruby-string">&#39;matt_development&#39;</span>
<span class="ruby-identifier">create_database</span> <span class="ruby-string">&#39;matt_development&#39;</span>, <span class="ruby-identifier">charset</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">big5</span>
</pre>
          
          

          
          <div class="method-source-code" id="create_database-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 277</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-value">:collation</span>]
    <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE DATABASE #{quote_table_name(name)} DEFAULT CHARACTER SET #{quote_table_name(options[:charset] || &#39;utf8&#39;)} COLLATE #{quote_table_name(options[:collation])}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE DATABASE #{quote_table_name(name)} DEFAULT CHARACTER SET #{quote_table_name(options[:charset] || &#39;utf8&#39;)}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-current_database" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">current_database</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="current_database-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">current_database</span>
  <span class="ruby-identifier">query_value</span>(<span class="ruby-string">&quot;SELECT database()&quot;</span>, <span class="ruby-string">&quot;SCHEMA&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-drop_table" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">drop_table</span><span
            class="method-args">(table_name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Drops a table from the database.</p>
<dl class="rdoc-list label-list"><dt><code>:force</code>
<dd>
<p>Set to <code>:cascade</code> to drop dependent objects as well. Defaults to
false.</p>
</dd><dt><code>:if_exists</code>
<dd>
<p>Set to <code>true</code> to only drop the table if it exists. Defaults to
false.</p>
</dd><dt><code>:temporary</code>
<dd>
<p>Set to <code>true</code> to drop temporary table. Defaults to false.</p>
</dd></dl>

<p>Although this command ignores most <code>options</code> and the block if
one is given, it can be helpful to provide these in a migration&#39;s
<code>change</code> method so it can be reverted. In that case,
<code>options</code> and the block will be used by create_table.</p>
          
          

          
          <div class="method-source-code" id="drop_table-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 405</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">drop_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;DROP#{&#39; TEMPORARY&#39; if options[:temporary]} TABLE#{&#39; IF EXISTS&#39; if options[:if_exists]} #{quote_table_name(table_name)}#{&#39; CASCADE&#39; if options[:force] == :cascade}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-empty_insert_statement_value" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">empty_insert_statement_value</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="empty_insert_statement_value-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 255</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty_insert_statement_value</span>
  <span class="ruby-string">&quot;VALUES ()&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-execute" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">execute</span><span
            class="method-args">(sql, name = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Executes the SQL statement in the context of this connection.</p>
          
          

          
          <div class="method-source-code" id="execute-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 211</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">execute</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">log</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-identifier">name</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">interlock</span>.<span class="ruby-identifier">permit_concurrent_loads</span> <span class="ruby-keyword">do</span>
      <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">query</span>(<span class="ruby-identifier">sql</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-explain" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">explain</span><span
            class="method-args">(arel, binds = [])</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="explain-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 201</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">explain</span>(<span class="ruby-identifier">arel</span>, <span class="ruby-identifier">binds</span> = [])
  <span class="ruby-identifier">sql</span>     = <span class="ruby-node">&quot;EXPLAIN #{to_sql(arel, binds)}&quot;</span>
  <span class="ruby-identifier">start</span>   = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
  <span class="ruby-identifier">result</span>  = <span class="ruby-identifier">exec_query</span>(<span class="ruby-identifier">sql</span>, <span class="ruby-string">&quot;EXPLAIN&quot;</span>, <span class="ruby-identifier">binds</span>)
  <span class="ruby-identifier">elapsed</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">start</span>

  <span class="ruby-constant">MySQL</span><span class="ruby-operator">::</span><span class="ruby-constant">ExplainPrettyPrinter</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">pp</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">elapsed</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-foreign_keys" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">foreign_keys</span><span
            class="method-args">(table_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="foreign_keys-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 455</span>
      <span class="ruby-keyword">def</span> <span class="ruby-identifier">foreign_keys</span>(<span class="ruby-identifier">table_name</span>)
        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">table_name</span>.<span class="ruby-identifier">present?</span>

        <span class="ruby-identifier">scope</span> = <span class="ruby-identifier">quoted_scope</span>(<span class="ruby-identifier">table_name</span>)

        <span class="ruby-identifier">fk_info</span> = <span class="ruby-identifier">exec_query</span>(<span class="ruby-string">&quot;          SELECT fk.referenced_table_name AS &#39;to_table&#39;,
                 fk.referenced_column_name AS &#39;primary_key&#39;,
                 fk.column_name AS &#39;column&#39;,
                 fk.constraint_name AS &#39;name&#39;,
                 rc.update_rule AS &#39;on_update&#39;,
                 rc.delete_rule AS &#39;on_delete&#39;
          FROM information_schema.referential_constraints rc
          JOIN information_schema.key_column_usage fk
          USING (constraint_schema, constraint_name)
          WHERE fk.referenced_column_name IS NOT NULL
            AND fk.table_schema = #{scope[:schema]}
            AND fk.table_name = #{scope[:name]}
            AND rc.constraint_schema = #{scope[:schema]}
            AND rc.table_name = #{scope[:name]}
&quot;</span>.<span class="ruby-identifier">strip_heredoc</span>, <span class="ruby-string">&quot;SCHEMA&quot;</span>)

        <span class="ruby-identifier">fk_info</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">options</span> = {
            <span class="ruby-identifier">column</span><span class="ruby-operator">:</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&quot;column&quot;</span>],
            <span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&quot;name&quot;</span>],
            <span class="ruby-identifier">primary_key</span><span class="ruby-operator">:</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&quot;primary_key&quot;</span>]
          }

          <span class="ruby-identifier">options</span>[<span class="ruby-value">:on_update</span>] = <span class="ruby-identifier">extract_foreign_key_action</span>(<span class="ruby-identifier">row</span>[<span class="ruby-string">&quot;on_update&quot;</span>])
          <span class="ruby-identifier">options</span>[<span class="ruby-value">:on_delete</span>] = <span class="ruby-identifier">extract_foreign_key_action</span>(<span class="ruby-identifier">row</span>[<span class="ruby-string">&quot;on_delete&quot;</span>])

          <span class="ruby-constant">ForeignKeyDefinition</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">row</span>[<span class="ruby-string">&quot;to_table&quot;</span>], <span class="ruby-identifier">options</span>)
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-index_algorithms" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">index_algorithms</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="index_algorithms-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 154</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">index_algorithms</span>
  { <span class="ruby-identifier">default</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;ALGORITHM = DEFAULT&quot;</span>, <span class="ruby-identifier">copy</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;ALGORITHM = COPY&quot;</span>, <span class="ruby-identifier">inplace</span><span class="ruby-operator">:</span> <span class="ruby-string">&quot;ALGORITHM = INPLACE&quot;</span> }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-native_database_types" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">native_database_types</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="native_database_types-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 150</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">native_database_types</span>
  <span class="ruby-constant">NATIVE_DATABASE_TYPES</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-recreate_database" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">recreate_database</span><span
            class="method-args">(name, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Drops the database specified on the <code>name</code> attribute and creates
it again using the provided <code>options</code>.</p>
          
          

          
          <div class="method-source-code" id="recreate_database-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">recreate_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-identifier">drop_database</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">sql</span> = <span class="ruby-identifier">create_database</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">reconnect!</span>
  <span class="ruby-identifier">sql</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rename_index" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rename_index</span><span
            class="method-args">(table_name, old_name, new_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="rename_index-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 409</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename_index</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">old_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">supports_rename_index?</span>
    <span class="ruby-identifier">validate_index_length!</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)

    <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;ALTER TABLE #{quote_table_name(table_name)} RENAME INDEX #{quote_table_name(old_name)} TO #{quote_table_name(new_name)}&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">super</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rename_table" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rename_table</span><span
            class="method-args">(table_name, new_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Renames a table.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">rename_table</span>(<span class="ruby-string">&#39;octopuses&#39;</span>, <span class="ruby-string">&#39;octopi&#39;</span>)
</pre>
          
          

          
          <div class="method-source-code" id="rename_table-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 385</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">rename_table</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;RENAME TABLE #{quote_table_name(table_name)} TO #{quote_table_name(new_name)}&quot;</span>
  <span class="ruby-identifier">rename_table_indexes</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">new_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-show_variable" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">show_variable</span><span
            class="method-args">(name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>SHOW VARIABLES LIKE &#39;name&#39;</p>
          
          

          
          <div class="method-source-code" id="show_variable-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 537</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">show_variable</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">query_value</span>(<span class="ruby-node">&quot;SELECT @@#{name}&quot;</span>, <span class="ruby-string">&quot;SCHEMA&quot;</span>)
<span class="ruby-keyword">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>
  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-strict_mode-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">strict_mode?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="strict_mode-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 586</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">strict_mode?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">type_cast_config_to_boolean</span>(<span class="ruby-ivar">@config</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-value">:strict</span>, <span class="ruby-keyword">true</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_advisory_locks-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_advisory_locks?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_advisory_locks-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 138</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_advisory_locks?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_datetime_with_precision-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_datetime_with_precision?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_datetime_with_precision-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 122</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_datetime_with_precision?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">mariadb?</span>
    <span class="ruby-identifier">version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-string">&quot;5.3.0&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-string">&quot;5.6.4&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_explain-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_explain?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_explain-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 106</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_explain?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_foreign_keys-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_foreign_keys?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_foreign_keys-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_foreign_keys?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_index_sort_order-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_index_sort_order?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Technically <a href="ConnectionAdapters/MySQL.html">MySQL</a> allows to
create indexes with the sort order syntax but at the moment (5.5) it
doesn&#39;t yet implement them</p>
          
          

          
          <div class="method-source-code" id="supports_index_sort_order-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_index_sort_order?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_indexes_in_create-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_indexes_in_create?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_indexes_in_create-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_indexes_in_create?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_statement_cache-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_statement_cache?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true, since this connection adapter supports prepared statement
caching.</p>
          
          

          
          <div class="method-source-code" id="supports_statement_cache-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 92</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_statement_cache?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_transaction_isolation-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_transaction_isolation?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_transaction_isolation-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 102</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_transaction_isolation?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_views-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_views?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_views-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 118</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_views?</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-supports_virtual_columns-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">supports_virtual_columns?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="supports_virtual_columns-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 130</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">supports_virtual_columns?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">mariadb?</span>
    <span class="ruby-identifier">version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-string">&quot;5.2.0&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-string">&quot;5.7.5&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-truncate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">truncate</span><span
            class="method-args">(table_name, name = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="truncate-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb, line 307</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">truncate</span>(<span class="ruby-identifier">table_name</span>, <span class="ruby-identifier">name</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;TRUNCATE TABLE #{quote_table_name(table_name)}&quot;</span>, <span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

