<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class ActiveRecord::Associations::CollectionProxy - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Relation
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-3C-3C">#&lt;&lt;</a>
    
    <li ><a href="#method-i-3D-3D">#==</a>
    
    <li ><a href="#method-i-any-3F">#any?</a>
    
    <li ><a href="#method-i-append">#append</a>
    
    <li ><a href="#method-i-build">#build</a>
    
    <li class="calls-super" ><a href="#method-i-calculate">#calculate</a>
    
    <li ><a href="#method-i-clear">#clear</a>
    
    <li ><a href="#method-i-concat">#concat</a>
    
    <li ><a href="#method-i-count">#count</a>
    
    <li ><a href="#method-i-create">#create</a>
    
    <li ><a href="#method-i-create-21">#create!</a>
    
    <li ><a href="#method-i-delete">#delete</a>
    
    <li ><a href="#method-i-delete_all">#delete_all</a>
    
    <li ><a href="#method-i-destroy">#destroy</a>
    
    <li ><a href="#method-i-destroy_all">#destroy_all</a>
    
    <li ><a href="#method-i-distinct">#distinct</a>
    
    <li ><a href="#method-i-empty-3F">#empty?</a>
    
    <li ><a href="#method-i-fifth">#fifth</a>
    
    <li ><a href="#method-i-find">#find</a>
    
    <li ><a href="#method-i-first">#first</a>
    
    <li ><a href="#method-i-forty_two">#forty_two</a>
    
    <li ><a href="#method-i-fourth">#fourth</a>
    
    <li ><a href="#method-i-include-3F">#include?</a>
    
    <li class="calls-super" ><a href="#method-i-last">#last</a>
    
    <li ><a href="#method-i-length">#length</a>
    
    <li ><a href="#method-i-load_target">#load_target</a>
    
    <li ><a href="#method-i-loaded-3F">#loaded?</a>
    
    <li ><a href="#method-i-many-3F">#many?</a>
    
    <li ><a href="#method-i-new">#new</a>
    
    <li class="calls-super" ><a href="#method-i-pluck">#pluck</a>
    
    <li ><a href="#method-i-prepend">#prepend</a>
    
    <li ><a href="#method-i-proxy_association">#proxy_association</a>
    
    <li ><a href="#method-i-push">#push</a>
    
    <li ><a href="#method-i-reload">#reload</a>
    
    <li ><a href="#method-i-replace">#replace</a>
    
    <li ><a href="#method-i-reset">#reset</a>
    
    <li ><a href="#method-i-scope">#scope</a>
    
    <li ><a href="#method-i-second">#second</a>
    
    <li ><a href="#method-i-second_to_last">#second_to_last</a>
    
    <li ><a href="#method-i-select">#select</a>
    
    <li ><a href="#method-i-size">#size</a>
    
    <li class="calls-super" ><a href="#method-i-take">#take</a>
    
    <li ><a href="#method-i-target">#target</a>
    
    <li ><a href="#method-i-third">#third</a>
    
    <li ><a href="#method-i-third_to_last">#third_to_last</a>
    
    <li ><a href="#method-i-to_a">#to_a</a>
    
    <li ><a href="#method-i-to_ary">#to_ary</a>
    
    <li ><a href="#method-i-uniq">#uniq</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-ActiveRecord::Associations::CollectionProxy">
  <h1 id="class-ActiveRecord::Associations::CollectionProxy" class="class">
    class ActiveRecord::Associations::CollectionProxy
  </h1>

  <section class="description">
    
<p>Association proxies in Active Record are middlemen between the object that
holds the association, known as the <code>@owner</code>, and the actual
associated object, known as the <code>@target</code>. The kind of
association any proxy is about is available in <code>@reflection</code>.
That&#39;s an instance of the class
ActiveRecord::Reflection::AssociationReflection.</p>

<p>For example, given</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Blog</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">posts</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">blog</span> = <span class="ruby-constant">Blog</span>.<span class="ruby-identifier">first</span>
</pre>

<p>the association proxy in <code>blog.posts</code> has the object in
<code>blog</code> as <code>@owner</code>, the collection of its posts as
<code>@target</code>, and the <code>@reflection</code> object represents a
<code>:has_many</code> macro.</p>

<p>This class delegates unknown methods to <code>@target</code> via
<code>method_missing</code>.</p>

<p>The <code>@target</code> object is not loaded until needed. For example,</p>

<pre class="ruby"><span class="ruby-identifier">blog</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>
</pre>

<p>is computed directly through SQL and does not trigger by itself the
instantiation of the actual post records.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-3C-3C" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">&lt;&lt;</span><span
            class="method-args">(*records)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds one or more <code>records</code> to the collection by setting their
foreign keys to the association&#39;s primary key. Returns
<code>self</code>, so several appends may be chained together.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 0</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Fancy-Fancy&#39;</span>)
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Spook&#39;</span>), <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Choo-Choo&#39;</span>)]
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">id</span> <span class="ruby-comment"># =&gt; 1</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>
          
          

          
          <div class="method-source-code" id="3C-3C-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 1054</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">records</span>)
  <span class="ruby-identifier">proxy_association</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">records</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="CollectionProxy.html#method-i-push">push</a>, <a href="CollectionProxy.html#method-i-append">append</a>
        </div>
        

        
      </div>

    
      <div id="method-i-3D-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">==</span><span
            class="method-args">(other)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Equivalent to <code>Array#==</code>. Returns <code>true</code> if the two
arrays contain the same number of elements and if each element is equal to
the corresponding element in the <code>other</code> array, otherwise
returns <code>false</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">other</span> = <span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">to_ary</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
<span class="ruby-comment"># =&gt; true</span>

<span class="ruby-identifier">other</span> = [<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">1</span>), <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">id</span><span class="ruby-operator">:</span> <span class="ruby-value">2</span>)]

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
<span class="ruby-comment"># =&gt; false</span>
</pre>
          
          

          
          <div class="method-source-code" id="3D-3D-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 988</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
  <span class="ruby-identifier">load_target</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-any-3F" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            any?()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if the collection is not empty.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span> <span class="ruby-comment"># =&gt; 0</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">any?</span>  <span class="ruby-comment"># =&gt; false</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Snoop&#39;</span>)
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span> <span class="ruby-comment"># =&gt; 1</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">any?</span>  <span class="ruby-comment"># =&gt; true</span>
</pre>

<p>You can also pass a <code>block</code> to define criteria. The behavior is
the same, it returns true if the collection based on the criteria is not
empty.</p>

<pre class="ruby"><span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet name: &quot;Snoop&quot;, group: &quot;dogs&quot;&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">any?</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pet</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">pet</span>.<span class="ruby-identifier">group</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;cats&#39;</span>
<span class="ruby-keyword">end</span>
<span class="ruby-comment"># =&gt; false</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">any?</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pet</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">pet</span>.<span class="ruby-identifier">group</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;dogs&#39;</span>
<span class="ruby-keyword">end</span>
<span class="ruby-comment"># =&gt; true</span>
</pre>
          
          

          
          <div class="method-source-code" id="any-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 900</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-append" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">append</span><span
            class="method-args">(*records)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="CollectionProxy.html#method-i-3C-3C">&lt;&lt;</a>
        </div>
        
      </div>

    
      <div id="method-i-build" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">build</span><span
            class="method-args">(attributes = {}, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new object of the collection type that has been instantiated with
<code>attributes</code> and linked to this object, but have not yet been
saved. You can pass an array of attributes hashes, this will return an
array with the new objects.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">build</span>
<span class="ruby-comment"># =&gt; #&lt;Pet id: nil, name: nil, person_id: 1&gt;</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Fancy-Fancy&#39;</span>)
<span class="ruby-comment"># =&gt; #&lt;Pet id: nil, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">build</span>([{<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Spook&#39;</span>}, {<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Choo-Choo&#39;</span>}, {<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Brain&#39;</span>}])
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: nil, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: nil, name: &quot;Choo-Choo&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: nil, name: &quot;Brain&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span>  <span class="ruby-comment"># =&gt; 5 # size of the collection</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span> <span class="ruby-comment"># =&gt; 0 # count from database</span>
</pre>
          
          

          
          <div class="method-source-code" id="build-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 315</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">build</span>(<span class="ruby-identifier">attributes</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="CollectionProxy.html#method-i-new">new</a>
        </div>
        

        
      </div>

    
      <div id="method-i-calculate" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">calculate</span><span
            class="method-args">(operation, column_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="calculate-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 753</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">calculate</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">column_name</span>)
  <span class="ruby-identifier">null_scope?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">calculate</span>(<span class="ruby-identifier">operation</span>, <span class="ruby-identifier">column_name</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-clear" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">clear</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Equivalent to <code>delete_all</code>. The difference is that returns
<code>self</code>, instead of an array with the deleted objects, so methods
can be chained. See <code>delete_all</code> for more information. Note that
because <code>delete_all</code> removes records by directly running an SQL
query into the database, the <code>updated_at</code> column of the object
is not changed.</p>
          
          

          
          <div class="method-source-code" id="clear-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 1070</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear</span>
  <span class="ruby-identifier">delete_all</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-concat" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">concat</span><span
            class="method-args">(*records)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Add one or more records to the collection by setting their foreign keys to
the association&#39;s primary key. Since <a
href="CollectionProxy.html#method-i-3C-3C"><<</a> flattens its argument
list and inserts each record, <code>push</code> and <a
href="CollectionProxy.html#method-i-concat">concat</a> behave identically.
Returns <code>self</code> so method calls may be chained.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 0</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Fancy-Fancy&#39;</span>))
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Spook&#39;</span>), <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Choo-Choo&#39;</span>))
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">id</span> <span class="ruby-comment"># =&gt; 1</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Brain&#39;</span>), <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Benny&#39;</span>)])
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 5</span>
</pre>
          
          

          
          <div class="method-source-code" id="concat-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 390</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">concat</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">records</span>)
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">records</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-count" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            count(column_name = nil, &amp;block)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Count all records.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-comment"># This will perform the count using SQL.</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>

<p>Passing a block will select all of a person&#39;s pets in SQL and then
perform the count using Ruby.</p>

<pre class="ruby"><span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">pet</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pet</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&#39;-&#39;</span>) } <span class="ruby-comment"># =&gt; 2</span>
</pre>
          
          

          
          <div class="method-source-code" id="count-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 787</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create</span><span
            class="method-args">(attributes = {}, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new object of the collection type that has been instantiated with
attributes, linked to this object and that has already been saved (if it
passes the validations).</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Fancy-Fancy&#39;</span>)
<span class="ruby-comment"># =&gt; #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">create</span>([{<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Spook&#39;</span>}, {<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Choo-Choo&#39;</span>}])
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span>  <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span> <span class="ruby-comment"># =&gt; 3</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>
          
          

          
          <div class="method-source-code" id="create-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 346</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create</span>(<span class="ruby-identifier">attributes</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-create-21" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create!</span><span
            class="method-args">(attributes = {}, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Like <a href="CollectionProxy.html#method-i-create">create</a>, except that
if the record is invalid, raises an exception.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">Pet</span>
  <span class="ruby-identifier">validates</span> :<span class="ruby-identifier">name</span>, <span class="ruby-identifier">presence</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span>)
<span class="ruby-comment"># =&gt; ActiveRecord::RecordInvalid: Validation failed: Name can&#39;t be blank</span>
</pre>
          
          

          
          <div class="method-source-code" id="create-21-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 362</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create!</span>(<span class="ruby-identifier">attributes</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">attributes</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete</span><span
            class="method-args">(*records)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Deletes the <code>records</code> supplied from the collection according to
the strategy specified by the <code>:dependent</code> option. If no
<code>:dependent</code> option is given, then it will follow the default
strategy. Returns an array with the deleted records.</p>

<p>For <code>has_many :through</code> associations, the default deletion
strategy is <code>:delete_all</code>.</p>

<p>For <code>has_many</code> associations, the default deletion strategy is
<code>:nullify</code>. This sets the foreign keys to <code>NULL</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span> <span class="ruby-comment"># dependent: :nullify option by default</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>))
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 2</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
<span class="ruby-comment"># =&gt; #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: nil&gt;</span>
</pre>

<p>If it is set to <code>:destroy</code> all the <code>records</code> are
removed by calling their <code>destroy</code> method. See
<code>destroy</code> for more information.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>, <span class="ruby-identifier">dependent</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">destroy</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>), <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>))
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 1</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;]</span>

<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-value">3</span>)
<span class="ruby-comment"># =&gt; ActiveRecord::RecordNotFound: Couldn&#39;t find all Pets with &#39;id&#39;: (1, 3)</span>
</pre>

<p>If it is set to <code>:delete_all</code>, all the <code>records</code> are
deleted <strong>without</strong> calling their <code>destroy</code> method.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>, <span class="ruby-identifier">dependent</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">delete_all</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>))
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 2</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
<span class="ruby-comment"># =&gt; ActiveRecord::RecordNotFound: Couldn&#39;t find Pet with &#39;id&#39;=1</span>
</pre>

<p>You can pass <code>Integer</code> or <code>String</code> values, it finds
the records responding to the <code>id</code> and executes delete on them.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-string">&quot;1&quot;</span>)
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">2</span>, <span class="ruby-value">3</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>
          
          

          
          <div class="method-source-code" id="delete-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 645</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">records</span>)
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">records</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete_all" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">delete_all</span><span
            class="method-args">(dependent = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Deletes all the records from the collection according to the strategy
specified by the <code>:dependent</code> option. If no
<code>:dependent</code> option is given, then it will follow the default
strategy.</p>

<p>For <code>has_many :through</code> associations, the default deletion
strategy is <code>:delete_all</code>.</p>

<p>For <code>has_many</code> associations, the default deletion strategy is
<code>:nullify</code>. This sets the foreign keys to <code>NULL</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span> <span class="ruby-comment"># dependent: :nullify option by default</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">delete_all</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 0</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>      <span class="ruby-comment"># =&gt; []</span>

<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: nil&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: nil&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: nil&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>

<p>Both <code>has_many</code> and <code>has_many :through</code> dependencies
default to the <code>:delete_all</code> strategy if the
<code>:dependent</code> option is set to <code>:destroy</code>. Records are
not instantiated and callbacks will not be fired.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>, <span class="ruby-identifier">dependent</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">destroy</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">delete_all</span>

<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>)
<span class="ruby-comment"># =&gt; ActiveRecord::RecordNotFound: Couldn&#39;t find all Pets with &#39;id&#39;: (1, 2, 3)</span>
</pre>

<p>If it is set to <code>:delete_all</code>, all the objects are deleted
<strong>without</strong> calling their <code>destroy</code> method.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>, <span class="ruby-identifier">dependent</span><span class="ruby-operator">:</span> :<span class="ruby-identifier">delete_all</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">delete_all</span>

<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>)
<span class="ruby-comment"># =&gt; ActiveRecord::RecordNotFound: Couldn&#39;t find all Pets with &#39;id&#39;: (1, 2, 3)</span>
</pre>
          
          

          
          <div class="method-source-code" id="delete_all-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 499</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete_all</span>(<span class="ruby-identifier">dependent</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">delete_all</span>(<span class="ruby-identifier">dependent</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-destroy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">destroy</span><span
            class="method-args">(*records)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Destroys the <code>records</code> supplied and removes them from the
collection. This method will <em>always</em> remove record from the
database ignoring the <code>:dependent</code> option. Returns an array with
the removed records.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>))
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 2</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>), <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>))
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span>  <span class="ruby-comment"># =&gt; 0</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>       <span class="ruby-comment"># =&gt; []</span>

<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>) <span class="ruby-comment"># =&gt; ActiveRecord::RecordNotFound: Couldn&#39;t find all Pets with &#39;id&#39;: (1, 2, 3)</span>
</pre>

<p>You can pass <code>Integer</code> or <code>String</code> values, it finds
the records responding to the <code>id</code> and then deletes them from
the database.</p>

<pre class="ruby"><span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 4, name: &quot;Benny&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 5, name: &quot;Brain&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 6, name: &quot;Boss&quot;,  person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-string">&quot;4&quot;</span>)
<span class="ruby-comment"># =&gt; #&lt;Pet id: 4, name: &quot;Benny&quot;, person_id: 1&gt;</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 2</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 5, name: &quot;Brain&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 6, name: &quot;Boss&quot;,  person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-value">5</span>, <span class="ruby-value">6</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 5, name: &quot;Brain&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 6, name: &quot;Boss&quot;,  person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span>  <span class="ruby-comment"># =&gt; 0</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>       <span class="ruby-comment"># =&gt; []</span>

<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">4</span>, <span class="ruby-value">5</span>, <span class="ruby-value">6</span>) <span class="ruby-comment"># =&gt; ActiveRecord::RecordNotFound: Couldn&#39;t find all Pets with &#39;id&#39;: (4, 5, 6)</span>
</pre>
          
          

          
          <div class="method-source-code" id="destroy-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 717</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">records</span>)
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">records</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-destroy_all" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">destroy_all</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Deletes the records of the collection directly from the database ignoring
the <code>:dependent</code> option. Records are instantiated and it invokes
<code>before_remove</code>, <code>after_remove</code> ,
<code>before_destroy</code> and <code>after_destroy</code> callbacks.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">destroy_all</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 0</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>      <span class="ruby-comment"># =&gt; []</span>

<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) <span class="ruby-comment"># =&gt; Couldn&#39;t find Pet with id=1</span>
</pre>
          
          

          
          <div class="method-source-code" id="destroy_all-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 526</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">destroy_all</span>
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">destroy_all</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-distinct" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            distinct(value = true)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Specifies whether the records should be unique or not.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">name</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet name: &quot;Fancy-Fancy&quot;&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet name: &quot;Fancy-Fancy&quot;&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">name</span>).<span class="ruby-identifier">distinct</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet name: &quot;Fancy-Fancy&quot;&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">name</span>).<span class="ruby-identifier">distinct</span>.<span class="ruby-identifier">distinct</span>(<span class="ruby-keyword">false</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet name: &quot;Fancy-Fancy&quot;&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet name: &quot;Fancy-Fancy&quot;&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>
          
          

          
          <div class="method-source-code" id="distinct-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 748</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-empty-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">empty?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if the collection is empty. If the collection has
been loaded it is equivalent to <code>collection.size.zero?</code>. If the
collection has not been loaded, it is equivalent to
<code>!collection.exists?</code>. If the collection has not already been
loaded and you are going to fetch the records anyway it is better to check
<code>collection.length.zero?</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span>  <span class="ruby-comment"># =&gt; 1</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-comment"># =&gt; false</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">delete_all</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span>  <span class="ruby-comment"># =&gt; 0</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-comment"># =&gt; true</span>
</pre>
          
          

          
          <div class="method-source-code" id="empty-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 860</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">empty?</span>
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">empty?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fifth" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            fifth()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Same as <a href="CollectionProxy.html#method-i-first">first</a> except
returns only the fifth record.</p>
          
          

          
          <div class="method-source-code" id="fifth-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 205</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-find" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">find</span><span
            class="method-args">(*args, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Finds an object in the collection responding to the <code>id</code>. Uses
the same rules as ActiveRecord::Base.find. Returns <a
href="../RecordNotFound.html">ActiveRecord::RecordNotFound</a> error if the
object cannot be found.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) <span class="ruby-comment"># =&gt; #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">4</span>) <span class="ruby-comment"># =&gt; ActiveRecord::RecordNotFound: Couldn&#39;t find Pet with &#39;id&#39;=4</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">pet</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pet</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">downcase!</span> }
<span class="ruby-comment"># =&gt; #&lt;Pet id: 2, name: &quot;fancy-fancy&quot;, person_id: 1&gt;</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>, <span class="ruby-value">3</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>
          
          

          
          <div class="method-source-code" id="find-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">find</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-first" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            first(limit = nil)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns the first record, or the first <code>n</code> records, from the
collection. If the collection is empty, the first form returns
<code>nil</code>, and the second form returns an empty array.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">first</span> <span class="ruby-comment"># =&gt; #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">2</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">another_person_without</span>.<span class="ruby-identifier">pets</span>          <span class="ruby-comment"># =&gt; []</span>
<span class="ruby-identifier">another_person_without</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">first</span>    <span class="ruby-comment"># =&gt; nil</span>
<span class="ruby-identifier">another_person_without</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">3</span>) <span class="ruby-comment"># =&gt; []</span>
</pre>
          
          

          
          <div class="method-source-code" id="first-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 173</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-forty_two" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            forty_two()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Same as <a href="CollectionProxy.html#method-i-first">first</a> except
returns only the forty second record. Also known as accessing “the reddit”.</p>
          
          

          
          <div class="method-source-code" id="forty_two-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 214</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fourth" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            fourth()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Same as <a href="CollectionProxy.html#method-i-first">first</a> except
returns only the fourth record.</p>
          
          

          
          <div class="method-source-code" id="fourth-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 197</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-include-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">include?</span><span
            class="method-args">(record)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if the given <code>record</code> is present in
the collection.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-comment"># =&gt; [#&lt;Pet id: 20, name: &quot;Snoop&quot;&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">20</span>)) <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">21</span>)) <span class="ruby-comment"># =&gt; false</span>
</pre>
          
          

          
          <div class="method-source-code" id="include-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 951</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">include?</span>(<span class="ruby-identifier">record</span>)
  <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-ivar">@association</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">record</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-last" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">last</span><span
            class="method-args">(limit = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the last record, or the last <code>n</code> records, from the
collection. If the collection is empty, the first form returns
<code>nil</code>, and the second form returns an empty array.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">last</span> <span class="ruby-comment"># =&gt; #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">last</span>(<span class="ruby-value">2</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">another_person_without</span>.<span class="ruby-identifier">pets</span>         <span class="ruby-comment"># =&gt; []</span>
<span class="ruby-identifier">another_person_without</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">last</span>    <span class="ruby-comment"># =&gt; nil</span>
<span class="ruby-identifier">another_person_without</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">last</span>(<span class="ruby-value">3</span>) <span class="ruby-comment"># =&gt; []</span>
</pre>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="last-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 256</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">last</span>(<span class="ruby-identifier">limit</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">load_target</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">find_from_target?</span>
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-length" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            length()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns the size of the collection calling <code>size</code> on the target.
If the collection has been already loaded, <code>length</code> and
<code>size</code> are equivalent. If not and you are going to need the
records anyway this method will take one less query. Otherwise
<code>size</code> is more efficient.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-comment"># executes something like SELECT &quot;pets&quot;.* FROM &quot;pets&quot; WHERE &quot;pets&quot;.&quot;person_id&quot; = 1</span>

<span class="ruby-comment"># Because the collection is loaded, you can</span>
<span class="ruby-comment"># call the collection with no additional queries:</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>
          
          

          
          <div class="method-source-code" id="length-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 842</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-load_target" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">load_target</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="load_target-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 43</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load_target</span>
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">load_target</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-loaded-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">loaded?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if the association has been loaded, otherwise
<code>false</code>.</p>

<pre class="ruby"><span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">loaded?</span> <span class="ruby-comment"># =&gt; false</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">loaded?</span> <span class="ruby-comment"># =&gt; true</span>
</pre>
          
          

          
          <div class="method-source-code" id="loaded-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 52</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">loaded?</span>
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">loaded?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-many-3F" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            many?()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns true if the collection has more than one record. Equivalent to
<code>collection.size &gt; 1</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span> <span class="ruby-comment"># =&gt; 1</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">many?</span> <span class="ruby-comment"># =&gt; false</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;Snoopy&#39;</span>)
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">count</span> <span class="ruby-comment"># =&gt; 2</span>
<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">many?</span> <span class="ruby-comment"># =&gt; true</span>
</pre>

<p>You can also pass a <code>block</code> to define criteria. The behavior is
the same, it returns true if the collection based on the criteria has more
than one record.</p>

<pre class="ruby"><span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet name: &quot;Gorby&quot;, group: &quot;cats&quot;&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet name: &quot;Puff&quot;, group: &quot;cats&quot;&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet name: &quot;Snoop&quot;, group: &quot;dogs&quot;&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">many?</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pet</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">pet</span>.<span class="ruby-identifier">group</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;dogs&#39;</span>
<span class="ruby-keyword">end</span>
<span class="ruby-comment"># =&gt; false</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">many?</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pet</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">pet</span>.<span class="ruby-identifier">group</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;cats&#39;</span>
<span class="ruby-keyword">end</span>
<span class="ruby-comment"># =&gt; true</span>
</pre>
          
          

          
          <div class="method-source-code" id="many-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 941</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-new" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(attributes = {}, &block)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="CollectionProxy.html#method-i-build">build</a>
        </div>
        
      </div>

    
      <div id="method-i-pluck" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pluck</span><span
            class="method-args">(*column_names)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="pluck-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 757</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pluck</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">column_names</span>)
  <span class="ruby-identifier">null_scope?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">pluck</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">column_names</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-prepend" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">prepend</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="prepend-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 1060</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">prepend</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-string">&quot;prepend on association is not defined. Please use &lt;&lt;, push or append&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-proxy_association" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">proxy_association</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="proxy_association-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 955</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">proxy_association</span>
  <span class="ruby-ivar">@association</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-push" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">push</span><span
            class="method-args">(*records)</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="CollectionProxy.html#method-i-3C-3C">&lt;&lt;</a>
        </div>
        
      </div>

    
      <div id="method-i-reload" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reload</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Reloads the collection from the database. Returns <code>self</code>.
Equivalent to <code>collection(true)</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-comment"># fetches pets from the database</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Snoop&quot;, group: &quot;dogs&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-comment"># uses the pets cache</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Snoop&quot;, group: &quot;dogs&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">reload</span> <span class="ruby-comment"># fetches pets from the database</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Snoop&quot;, group: &quot;dogs&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>(<span class="ruby-keyword">true</span>)  <span class="ruby-comment"># fetches pets from the database</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Snoop&quot;, group: &quot;dogs&quot;, person_id: 1&gt;]</span>
</pre>
          
          

          
          <div class="method-source-code" id="reload-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 1093</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">proxy_association</span>.<span class="ruby-identifier">reload</span>
  <span class="ruby-identifier">reset_scope</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-replace" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">replace</span><span
            class="method-args">(other_array)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Replaces this collection with <code>other_array</code>. This will perform a
diff and delete/add only records that have changed.</p>

<pre>class Person &lt; ActiveRecord::Base
  has_many :pets
end

person.pets
# =&gt; [#&lt;Pet id: 1, name: &quot;Gorby&quot;, group: &quot;cats&quot;, person_id: 1&gt;]

other_pets = [Pet.new(name: &#39;Puff&#39;, group: &#39;celebrities&#39;]

person.pets.replace(other_pets)

person.pets
# =&gt; [#&lt;Pet id: 2, name: &quot;Puff&quot;, group: &quot;celebrities&quot;, person_id: 1&gt;]</pre>

<p>If the supplied array has an incorrect association type, it raises an
<code>ActiveRecord::AssociationTypeMismatch</code> error:</p>

<pre class="ruby"><span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">replace</span>([<span class="ruby-string">&quot;doo&quot;</span>, <span class="ruby-string">&quot;ggie&quot;</span>, <span class="ruby-string">&quot;gaga&quot;</span>])
<span class="ruby-comment"># =&gt; ActiveRecord::AssociationTypeMismatch: Pet expected, got String</span>
</pre>
          
          

          
          <div class="method-source-code" id="replace-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 416</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">replace</span>(<span class="ruby-identifier">other_array</span>)
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">other_array</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reset</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Unloads the association. Returns <code>self</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-comment"># fetches pets from the database</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Snoop&quot;, group: &quot;dogs&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-comment"># uses the pets cache</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Snoop&quot;, group: &quot;dogs&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">reset</span> <span class="ruby-comment"># clears the pets cache</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>  <span class="ruby-comment"># fetches pets from the database</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet id: 1, name: &quot;Snoop&quot;, group: &quot;dogs&quot;, person_id: 1&gt;]</span>
</pre>
          
          

          
          <div class="method-source-code" id="reset-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 1114</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset</span>
  <span class="ruby-identifier">proxy_association</span>.<span class="ruby-identifier">reset</span>
  <span class="ruby-identifier">proxy_association</span>.<span class="ruby-identifier">reset_scope</span>
  <span class="ruby-identifier">reset_scope</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-scope" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">scope</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a <code>Relation</code> object for the records in this association</p>
          
          

          
          <div class="method-source-code" id="scope-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 960</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">scope</span>
  <span class="ruby-ivar">@scope</span> <span class="ruby-operator">||=</span> <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">scope</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-second" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            second()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Same as <a href="CollectionProxy.html#method-i-first">first</a> except
returns only the second record.</p>
          
          

          
          <div class="method-source-code" id="second-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 181</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-second_to_last" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            second_to_last()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Same as <a href="CollectionProxy.html#method-i-first">first</a> except
returns only the second-to-last record.</p>
          
          

          
          <div class="method-source-code" id="second_to_last-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 230</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-select" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            select(*fields, &amp;block)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Works in two ways.</p>

<p><strong>First:</strong> Specify a subset of fields to be selected from the
result set.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">name</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: nil, name: &quot;Fancy-Fancy&quot;&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: nil, name: &quot;Spook&quot;&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: nil, name: &quot;Choo-Choo&quot;&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">id</span>, :<span class="ruby-identifier">name</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 2, name: &quot;Spook&quot;&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>

<p>Be careful because this also means you&#39;re initializing a model object
with only the fields that you&#39;ve selected. If you attempt to access a
field except <code>id</code> that is not in the initialized record
you&#39;ll receive:</p>

<pre class="ruby"><span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">select</span>(:<span class="ruby-identifier">name</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">person_id</span>
<span class="ruby-comment"># =&gt; ActiveModel::MissingAttributeError: missing attribute: person_id</span>
</pre>

<p><strong>Second:</strong> You can pass a block so it can be used just like
Array#select. This builds an array of objects from the database for the
scope, converting them into an array and iterating through them using
Array#select.</p>

<pre class="ruby"><span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">pet</span><span class="ruby-operator">|</span> <span class="ruby-identifier">pet</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/oo/</span> }
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>
          
          

          
          <div class="method-source-code" id="select-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 110</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-size" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">size</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the size of the collection. If the collection hasn&#39;t been
loaded, it executes a <code>SELECT COUNT(*)</code> query. Else it calls
<code>collection.size</code>.</p>

<p>If the collection has been already loaded <code>size</code> and
<code>length</code> are equivalent. If not and you are going to need the
records anyway <code>length</code> will take one less query. Otherwise
<code>size</code> is more efficient.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-comment"># executes something like SELECT COUNT(*) FROM &quot;pets&quot; WHERE &quot;pets&quot;.&quot;person_id&quot; = 1</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span> <span class="ruby-comment"># This will execute a SELECT * FROM query</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment"># =&gt; 3</span>
<span class="ruby-comment"># Because the collection is already loaded, this will behave like</span>
<span class="ruby-comment"># collection.size and no SQL count query is executed.</span>
</pre>
          
          

          
          <div class="method-source-code" id="size-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 811</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">size</span>
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-take" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">take</span><span
            class="method-args">(limit = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Gives a record (or N records if a parameter is supplied) from the
collection using the same rules as <code>ActiveRecord::Base.take</code>.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 3, name: &quot;Choo-Choo&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">take</span> <span class="ruby-comment"># =&gt; #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">take</span>(<span class="ruby-value">2</span>)
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#      #&lt;Pet id: 1, name: &quot;Fancy-Fancy&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#      #&lt;Pet id: 2, name: &quot;Spook&quot;, person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">another_person_without</span>.<span class="ruby-identifier">pets</span>         <span class="ruby-comment"># =&gt; []</span>
<span class="ruby-identifier">another_person_without</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">take</span>    <span class="ruby-comment"># =&gt; nil</span>
<span class="ruby-identifier">another_person_without</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">take</span>(<span class="ruby-value">2</span>) <span class="ruby-comment"># =&gt; []</span>
</pre>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="take-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 286</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">take</span>(<span class="ruby-identifier">limit</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">load_target</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">find_from_target?</span>
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-target" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">target</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="target-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 39</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">target</span>
  <span class="ruby-ivar">@association</span>.<span class="ruby-identifier">target</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-third" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            third()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Same as <a href="CollectionProxy.html#method-i-first">first</a> except
returns only the third record.</p>
          
          

          
          <div class="method-source-code" id="third-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 189</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-third_to_last" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            third_to_last()
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Same as <a href="CollectionProxy.html#method-i-first">first</a> except
returns only the third-to-last record.</p>
          
          

          
          <div class="method-source-code" id="third_to_last-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 222</span>
      </pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_a" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">to_a</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="CollectionProxy.html#method-i-to_ary">to_ary</a>
        </div>
        
      </div>

    
      <div id="method-i-to_ary" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">to_ary</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns a new array of objects from the collection. If the collection
hasn&#39;t been loaded, it fetches the records from the database.</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Person</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">has_many</span> :<span class="ruby-identifier">pets</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 4, name: &quot;Benny&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 5, name: &quot;Brain&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 6, name: &quot;Boss&quot;,  person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">other_pets</span> = <span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>.<span class="ruby-identifier">to_ary</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 4, name: &quot;Benny&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 5, name: &quot;Brain&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 6, name: &quot;Boss&quot;,  person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>

<span class="ruby-identifier">other_pets</span>.<span class="ruby-identifier">replace</span>([<span class="ruby-constant">Pet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span><span class="ruby-operator">:</span> <span class="ruby-string">&#39;BooGoo&#39;</span>)])

<span class="ruby-identifier">other_pets</span>
<span class="ruby-comment"># =&gt; [#&lt;Pet id: nil, name: &quot;BooGoo&quot;, person_id: 1&gt;]</span>

<span class="ruby-identifier">person</span>.<span class="ruby-identifier">pets</span>
<span class="ruby-comment"># This is not affected by replace</span>
<span class="ruby-comment"># =&gt; [</span>
<span class="ruby-comment">#       #&lt;Pet id: 4, name: &quot;Benny&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 5, name: &quot;Brain&quot;, person_id: 1&gt;,</span>
<span class="ruby-comment">#       #&lt;Pet id: 6, name: &quot;Boss&quot;,  person_id: 1&gt;</span>
<span class="ruby-comment">#    ]</span>
</pre>
          
          

          
          <div class="method-source-code" id="to_ary-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 1025</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_ary</span>
  <span class="ruby-identifier">load_target</span>.<span class="ruby-identifier">dup</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="CollectionProxy.html#method-i-to_a">to_a</a>
        </div>
        

        
      </div>

    
      <div id="method-i-uniq" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">uniq</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="uniq-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.5/lib/active_record/associations/collection_proxy.rb, line 749</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">uniq</span>
  <span class="ruby-identifier">load_target</span>.<span class="ruby-identifier">uniq</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

