<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Rerun::Runner - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../Object.html">Object</a>
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="System.html">Rerun::System</a>
  
  
  
    <li><a class="include" href="../Timeout.html">Timeout</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-keep_running">::keep_running</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-app_name">#app_name</a>
    
    <li ><a href="#method-i-change_message">#change_message</a>
    
    <li ><a href="#method-i-clear-3F">#clear?</a>
    
    <li ><a href="#method-i-clear_screen">#clear_screen</a>
    
    <li ><a href="#method-i-die">#die</a>
    
    <li ><a href="#method-i-dir">#dir</a>
    
    <li ><a href="#method-i-dirs">#dirs</a>
    
    <li ><a href="#method-i-exit-3F">#exit?</a>
    
    <li ><a href="#method-i-force_polling">#force_polling</a>
    
    <li ><a href="#method-i-git_head_changed-3F">#git_head_changed?</a>
    
    <li ><a href="#method-i-ignore">#ignore</a>
    
    <li ><a href="#method-i-join">#join</a>
    
    <li ><a href="#method-i-key_pressed">#key_pressed</a>
    
    <li ><a href="#method-i-notify">#notify</a>
    
    <li ><a href="#method-i-pattern">#pattern</a>
    
    <li ><a href="#method-i-quiet-3F">#quiet?</a>
    
    <li ><a href="#method-i-read_git_head">#read_git_head</a>
    
    <li ><a href="#method-i-restart">#restart</a>
    
    <li ><a href="#method-i-restart_with_signal">#restart_with_signal</a>
    
    <li ><a href="#method-i-run">#run</a>
    
    <li ><a href="#method-i-running-3F">#running?</a>
    
    <li ><a href="#method-i-say">#say</a>
    
    <li ><a href="#method-i-send_signal">#send_signal</a>
    
    <li ><a href="#method-i-signal_and_wait">#signal_and_wait</a>
    
    <li ><a href="#method-i-start">#start</a>
    
    <li ><a href="#method-i-start_keypress_thread">#start_keypress_thread</a>
    
    <li ><a href="#method-i-stop">#stop</a>
    
    <li ><a href="#method-i-stop_keypress_thread">#stop_keypress_thread</a>
    
    <li ><a href="#method-i-stty">#stty</a>
    
    <li ><a href="#method-i-toggle_pause">#toggle_pause</a>
    
    <li ><a href="#method-i-unpause">#unpause</a>
    
    <li ><a href="#method-i-verbose-3F">#verbose?</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Rerun::Runner">
  <h1 id="class-Rerun::Runner" class="class">
    class Rerun::Runner
  </h1>

  <section class="description">
    
  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-keep_running" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">keep_running</span><span
            class="method-args">(cmd, options)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="keep_running-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 7</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">keep_running</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">runner</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">options</span>)
  <span class="ruby-identifier">runner</span>.<span class="ruby-identifier">start</span>
  <span class="ruby-identifier">runner</span>.<span class="ruby-identifier">join</span>
  <span class="ruby-comment"># apparently runner doesn&#39;t keep running anymore (as of Listen 2) so we have to sleep forever :-(</span>
  <span class="ruby-identifier">sleep</span> <span class="ruby-value">10000</span> <span class="ruby-keyword">while</span> <span class="ruby-keyword">true</span> <span class="ruby-comment"># :-(</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(run_command, options = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 18</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">run_command</span>, <span class="ruby-identifier">options</span> = {})
  <span class="ruby-ivar">@run_command</span>, <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">run_command</span>, <span class="ruby-identifier">options</span>
  <span class="ruby-ivar">@run_command</span> = <span class="ruby-node">&quot;ruby #{@run_command}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@run_command</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39; &#39;</span>).<span class="ruby-identifier">first</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/\.rb$/</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-app_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">app_name</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="app_name-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 125</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">app_name</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:name</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-change_message" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">change_message</span><span
            class="method-args">(changes)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="change_message-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 221</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">change_message</span>(<span class="ruby-identifier">changes</span>)
  <span class="ruby-identifier">message</span> = [<span class="ruby-value">:modified</span>, <span class="ruby-value">:added</span>, <span class="ruby-value">:removed</span>].<span class="ruby-identifier">map</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">change</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">count</span> = <span class="ruby-identifier">changes</span>[<span class="ruby-identifier">change</span>] <span class="ruby-operator">?</span> <span class="ruby-identifier">changes</span>[<span class="ruby-identifier">change</span>].<span class="ruby-identifier">size</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
      <span class="ruby-node">&quot;#{count} #{change}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;, &quot;</span>)

  <span class="ruby-identifier">changed_files</span> = <span class="ruby-identifier">changes</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">changed_files</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
    <span class="ruby-identifier">message</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;: &quot;</span>
    <span class="ruby-identifier">message</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">changes</span>.<span class="ruby-identifier">values</span>.<span class="ruby-identifier">flatten</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;/&#39;</span>).<span class="ruby-identifier">last</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39;, &#39;</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">changed_files</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>
      <span class="ruby-identifier">message</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;, ...&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-clear-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">clear?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="clear-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear?</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:clear</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-clear_screen" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">clear_screen</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="clear_screen-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 370</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">clear_screen</span>
  <span class="ruby-comment"># see http://ascii-table.com/ansi-escape-sequences-vt-100.php</span>
  <span class="ruby-identifier">$stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-string">&quot;\033[H\033[2J&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-die" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">die</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="die-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 240</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">die</span>
  <span class="ruby-comment">#stop_keypress_thread   # don&#39;t do this since we&#39;re probably *in* the keypress thread</span>
  <span class="ruby-identifier">stop</span> <span class="ruby-comment"># stop the child process if it exists</span>
  <span class="ruby-identifier">exit</span> <span class="ruby-value">0</span> <span class="ruby-comment"># todo: status code param</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-dir" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dir</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="dir-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 93</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dir</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:dir</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-dirs" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dirs</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="dirs-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dirs</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:dir</span>] <span class="ruby-operator">||</span> <span class="ruby-string">&quot;.&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-exit-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">exit?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="exit-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 121</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">exit?</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:exit</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-force_polling" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">force_polling</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="force_polling-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 136</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">force_polling</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:force_polling</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-git_head_changed-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">git_head_changed?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="git_head_changed-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 311</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">git_head_changed?</span>
  <span class="ruby-identifier">old_git_head</span> = <span class="ruby-ivar">@git_head</span>
  <span class="ruby-identifier">read_git_head</span>
  <span class="ruby-ivar">@git_head</span> <span class="ruby-keyword">and</span> <span class="ruby-identifier">old_git_head</span> <span class="ruby-keyword">and</span> <span class="ruby-ivar">@git_head</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">old_git_head</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-ignore" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ignore</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="ignore-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ignore</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:ignore</span>] <span class="ruby-operator">||</span> []
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-join" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">join</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="join-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">join</span>
  <span class="ruby-ivar">@watcher</span>.<span class="ruby-identifier">join</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-key_pressed" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">key_pressed</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>non-blocking stdin reader. returns a 1-char string if a key was pressed;
otherwise nil</p>
          
          

          
          <div class="method-source-code" id="key_pressed-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 339</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">key_pressed</span>
  <span class="ruby-keyword">begin</span>
    <span class="ruby-comment"># this &quot;raw input&quot; nonsense is because unix likes waiting for linefeeds before sending stdin</span>

    <span class="ruby-comment"># &#39;raw&#39; means turn raw input on</span>

    <span class="ruby-comment"># restore proper output newline handling -- see stty.rb and &quot;man stty&quot; and /usr/include/sys/termios.h</span>
    <span class="ruby-comment"># looks like &quot;raw&quot; flips off the OPOST bit 0x00000001 /* enable following output processing */</span>
    <span class="ruby-comment"># which disables #define ONLCR          0x00000002      /* map NL to CR-NL (ala CRMOD) */</span>
    <span class="ruby-comment"># so this sets it back on again since all we care about is raw input, not raw output</span>
    <span class="ruby-identifier">stty</span> <span class="ruby-string">&quot;raw opost&quot;</span>

    <span class="ruby-identifier">c</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">$stdin</span>.<span class="ruby-identifier">ready?</span>
      <span class="ruby-identifier">c</span> = <span class="ruby-identifier">$stdin</span>.<span class="ruby-identifier">getc</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">c</span>.<span class="ruby-identifier">chr</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span>
  <span class="ruby-keyword">ensure</span>
    <span class="ruby-identifier">stty</span> <span class="ruby-string">&quot;-raw&quot;</span> <span class="ruby-comment"># turn raw input off</span>
  <span class="ruby-keyword">end</span>


  <span class="ruby-comment"># note: according to &#39;man tty&#39; the proper way restore the settings is</span>
  <span class="ruby-comment"># tty_state=`stty -g`</span>
  <span class="ruby-comment"># ensure</span>
  <span class="ruby-comment">#   system &#39;stty &quot;#{tty_state}&#39;</span>
  <span class="ruby-comment"># end</span>
  <span class="ruby-comment"># but this way seems fine and less confusing</span>

<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-notify" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">notify</span><span
            class="method-args">(title, body, background = true)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="notify-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 322</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">notify</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">body</span>, <span class="ruby-identifier">background</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-constant">Notification</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">title</span>, <span class="ruby-identifier">body</span>, <span class="ruby-ivar">@options</span>).<span class="ruby-identifier">send</span>(<span class="ruby-identifier">background</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:notify</span>]
  <span class="ruby-identifier">puts</span>
  <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;#{app_name} #{title}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-pattern" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pattern</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="pattern-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 101</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pattern</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:pattern</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-quiet-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">quiet?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="quiet-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 113</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">quiet?</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:quiet</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-read_git_head" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">read_git_head</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="read_git_head-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 317</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">read_git_head</span>
  <span class="ruby-identifier">git_head_file</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-string">&#39;.git&#39;</span>, <span class="ruby-string">&#39;HEAD&#39;</span>)
  <span class="ruby-ivar">@git_head</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">git_head_file</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">git_head_file</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-restart" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">restart</span><span
            class="method-args">(with_signal = true)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="restart-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 66</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">restart</span>(<span class="ruby-identifier">with_signal</span> = <span class="ruby-keyword">true</span>)
  <span class="ruby-ivar">@restarting</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:restart</span>] <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">with_signal</span>
    <span class="ruby-identifier">restart_with_signal</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-value">:signal</span>])
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">stop</span>
    <span class="ruby-identifier">start</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@restarting</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-restart_with_signal" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">restart_with_signal</span><span
            class="method-args">(restart_signal)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="restart_with_signal-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 129</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">restart_with_signal</span>(<span class="ruby-identifier">restart_signal</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@pid</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@pid</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>)
    <span class="ruby-identifier">notify</span> <span class="ruby-string">&quot;restarting&quot;</span>, <span class="ruby-string">&quot;We will be with you shortly.&quot;</span>
    <span class="ruby-identifier">send_signal</span>(<span class="ruby-identifier">restart_signal</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-run" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">run</span><span
            class="method-args">(command)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="run-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 217</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">run</span> <span class="ruby-identifier">command</span>
  <span class="ruby-constant">Kernel</span>.<span class="ruby-identifier">spawn</span> <span class="ruby-identifier">command</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-running-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">running?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="running-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 250</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">running?</span>
  <span class="ruby-identifier">send_signal</span>(<span class="ruby-value">0</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-say" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">say</span><span
            class="method-args">(msg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="say-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 328</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">say</span> <span class="ruby-identifier">msg</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{Time.now.strftime(&quot;%T&quot;)} [rerun] #{msg}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">quiet?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-send_signal" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">send_signal</span><span
            class="method-args">(signal)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Send the signal to process @pid. @returns true if the signal is sent
@returns false if sending the signal fails If sending the signal fails, the
exception will be swallowed (and logged if verbose is true) and this method
will return false.</p>
          
          

          
          <div class="method-source-code" id="send_signal-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 289</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">send_signal</span>(<span class="ruby-identifier">signal</span>)
  <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;Sending signal #{signal} to #{@pid}&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">signal</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose?</span>
  <span class="ruby-constant">Process</span>.<span class="ruby-identifier">kill</span>(<span class="ruby-identifier">signal</span>, <span class="ruby-ivar">@pid</span>)
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;Signal #{signal} failed: #{e.class}: #{e.message}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose?</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-signal_and_wait" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">signal_and_wait</span><span
            class="method-args">(signal)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Send the signal to process @pid and wait for it to die. @returns true if
the process dies @returns false if either sending the signal fails or the
process fails to die</p>
          
          

          
          <div class="method-source-code" id="signal_and_wait-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 257</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">signal_and_wait</span>(<span class="ruby-identifier">signal</span>)

  <span class="ruby-identifier">signal_sent</span> = <span class="ruby-keyword">if</span> <span class="ruby-identifier">windows?</span>
                  <span class="ruby-identifier">force_kill</span> = (<span class="ruby-identifier">signal</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;KILL&#39;</span>)
                  <span class="ruby-identifier">system</span>(<span class="ruby-node">&quot;taskkill /T #{&#39;/F&#39; if force_kill} /PID #{@pid}&quot;</span>)
                <span class="ruby-keyword">else</span>
                  <span class="ruby-identifier">send_signal</span>(<span class="ruby-identifier">signal</span>)
                <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">signal_sent</span>
    <span class="ruby-comment"># the signal was successfully sent, so wait for the process to die</span>
    <span class="ruby-keyword">begin</span>
      <span class="ruby-identifier">timeout</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-value">:wait</span>]) <span class="ruby-keyword">do</span>
        <span class="ruby-constant">Process</span>.<span class="ruby-identifier">wait</span>(<span class="ruby-ivar">@pid</span>)
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">process_status</span> = <span class="ruby-identifier">$?</span>
      <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;Process ended: #{process_status}&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">verbose?</span>
      <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Timeout</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>
      <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-start" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">start</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="start-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 140</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@already_running</span>
    <span class="ruby-identifier">taglines</span> = [
      <span class="ruby-string">&quot;Here we go again!&quot;</span>,
      <span class="ruby-string">&quot;Keep on trucking.&quot;</span>,
      <span class="ruby-string">&quot;Once more unto the breach, dear friends, once more!&quot;</span>,
      <span class="ruby-string">&quot;The road goes ever on and on, down from the door where it began.&quot;</span>,
    ]
    <span class="ruby-identifier">notify</span> <span class="ruby-string">&quot;restarted&quot;</span>, <span class="ruby-identifier">taglines</span>[<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">taglines</span>.<span class="ruby-identifier">size</span>)]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">taglines</span> = [
      <span class="ruby-string">&quot;To infinity... and beyond!&quot;</span>,
      <span class="ruby-string">&quot;Charge!&quot;</span>,
    ]
    <span class="ruby-identifier">notify</span> <span class="ruby-string">&quot;launched&quot;</span>, <span class="ruby-identifier">taglines</span>[<span class="ruby-identifier">rand</span>(<span class="ruby-identifier">taglines</span>.<span class="ruby-identifier">size</span>)]
    <span class="ruby-ivar">@already_running</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">clear_screen</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">clear?</span>
  <span class="ruby-identifier">start_keypress_thread</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@keypress_thread</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-ivar">@pid</span> = <span class="ruby-identifier">run</span> <span class="ruby-ivar">@run_command</span>
    <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;Rerun (#{$PID}) running #{app_name} (#{@pid})&quot;</span>
  <span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{e.class}: #{e.message}&quot;</span>
    <span class="ruby-identifier">exit</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">status_thread</span> = <span class="ruby-constant">Process</span>.<span class="ruby-identifier">detach</span>(<span class="ruby-ivar">@pid</span>) <span class="ruby-comment"># so if the child exits, it dies</span>

  <span class="ruby-constant">Signal</span>.<span class="ruby-identifier">trap</span>(<span class="ruby-string">&quot;INT&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-comment"># INT = control-C -- allows user to stop the top-level rerun process</span>
    <span class="ruby-identifier">die</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">Signal</span>.<span class="ruby-identifier">trap</span>(<span class="ruby-string">&quot;TERM&quot;</span>) <span class="ruby-keyword">do</span> <span class="ruby-comment"># TERM is the polite way of terminating a process</span>
    <span class="ruby-identifier">die</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">sleep</span> <span class="ruby-value">2</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">Interrupt</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
    <span class="ruby-comment"># in case someone hits control-C immediately (&quot;oops!&quot;)</span>
    <span class="ruby-identifier">die</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">exit?</span>
    <span class="ruby-identifier">status</span> = <span class="ruby-identifier">status_thread</span>.<span class="ruby-identifier">value</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">status</span>.<span class="ruby-identifier">success?</span>
      <span class="ruby-identifier">notify</span> <span class="ruby-string">&quot;succeeded&quot;</span>, <span class="ruby-string">&quot;&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">notify</span> <span class="ruby-string">&quot;failed&quot;</span>, <span class="ruby-node">&quot;Exit status #{status.exitstatus}&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">running?</span>
      <span class="ruby-identifier">notify</span> <span class="ruby-string">&quot;Launch Failed&quot;</span>, <span class="ruby-string">&quot;See console for error output&quot;</span>
      <span class="ruby-ivar">@already_running</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@watcher</span>

    <span class="ruby-identifier">watcher</span> = <span class="ruby-constant">Watcher</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">:directory</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">dirs</span>, <span class="ruby-value">:pattern</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">pattern</span>, <span class="ruby-value">:ignore</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ignore</span>, <span class="ruby-value">:force_polling</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">force_polling</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">changes</span><span class="ruby-operator">|</span>

      <span class="ruby-identifier">message</span> = <span class="ruby-identifier">change_message</span>(<span class="ruby-identifier">changes</span>)

      <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;Change detected: #{message}&quot;</span>
      <span class="ruby-identifier">restart</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@restarting</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">watcher</span>.<span class="ruby-identifier">start</span>
    <span class="ruby-ivar">@watcher</span> = <span class="ruby-identifier">watcher</span>
    <span class="ruby-identifier">say</span> <span class="ruby-node">&quot;Watching #{dir.join(&#39;, &#39;)} for #{pattern}&quot;</span> <span class="ruby-operator">+</span>
          (<span class="ruby-identifier">ignore</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot; (ignoring #{ignore.join(&#39;,&#39;)})&quot;</span>) <span class="ruby-operator">+</span>
          (<span class="ruby-identifier">watcher</span>.<span class="ruby-identifier">adapter</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&quot;&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-node">&quot; with #{watcher.adapter_name} adapter&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-start_keypress_thread" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">start_keypress_thread</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="start_keypress_thread-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 23</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">start_keypress_thread</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-value">:background</span>]

  <span class="ruby-ivar">@keypress_thread</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">while</span> <span class="ruby-keyword">true</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">c</span> = <span class="ruby-identifier">key_pressed</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">downcase</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;c&#39;</span>
          <span class="ruby-identifier">say</span> <span class="ruby-string">&quot;Clearing screen&quot;</span>
          <span class="ruby-identifier">clear_screen</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;r&#39;</span>
          <span class="ruby-identifier">say</span> <span class="ruby-string">&quot;Restarting&quot;</span>
          <span class="ruby-identifier">restart</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;f&#39;</span>
          <span class="ruby-identifier">say</span> <span class="ruby-string">&quot;Stopping and starting&quot;</span>
          <span class="ruby-identifier">restart</span>(<span class="ruby-keyword">false</span>)
        <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;p&#39;</span>
          <span class="ruby-identifier">toggle_pause</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;x&#39;</span>, <span class="ruby-string">&#39;q&#39;</span>
          <span class="ruby-identifier">die</span>
          <span class="ruby-keyword">break</span> <span class="ruby-comment"># the break will stop this thread, in case the &#39;die&#39; doesn&#39;t</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\n#{c.inspect} pressed inside rerun&quot;</span>
          <span class="ruby-identifier">puts</span> [[<span class="ruby-string">&quot;c&quot;</span>, <span class="ruby-string">&quot;clear screen&quot;</span>],
                [<span class="ruby-string">&quot;r&quot;</span>, <span class="ruby-string">&quot;restart&quot;</span>],
                [<span class="ruby-string">&quot;f&quot;</span>, <span class="ruby-string">&quot;forced restart (stop and start)&quot;</span>],
                [<span class="ruby-string">&quot;p&quot;</span>, <span class="ruby-string">&quot;toggle pause&quot;</span>],
                [<span class="ruby-string">&quot;x or q&quot;</span>, <span class="ruby-string">&quot;stop and exit&quot;</span>]
               ].<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">description</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;  #{key} -- #{description}&quot;</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)
          <span class="ruby-identifier">puts</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">sleep</span> <span class="ruby-value">1</span> <span class="ruby-comment"># todo: use select instead of polling somehow?</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@keypress_thread</span>.<span class="ruby-identifier">run</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-stop" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stop</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>todo: test escalation</p>
          
          

          
          <div class="method-source-code" id="stop-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 299</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stop</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@pid</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-ivar">@pid</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>)
    <span class="ruby-identifier">notify</span> <span class="ruby-string">&quot;stopping&quot;</span>, <span class="ruby-string">&quot;All good things must come to an end.&quot;</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@restarting</span>
    <span class="ruby-ivar">@options</span>[<span class="ruby-value">:signal</span>].<span class="ruby-identifier">split</span>(<span class="ruby-string">&#39;,&#39;</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">signal</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">success</span> = <span class="ruby-identifier">signal_and_wait</span>(<span class="ruby-identifier">signal</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">success</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">rescue</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
  <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-stop_keypress_thread" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stop_keypress_thread</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="stop_keypress_thread-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 61</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stop_keypress_thread</span>
  <span class="ruby-ivar">@keypress_thread</span>.<span class="ruby-identifier">kill</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@keypress_thread</span>
  <span class="ruby-ivar">@keypress_thread</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-stty" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stty</span><span
            class="method-args">(args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="stty-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 332</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stty</span>(<span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">system</span> <span class="ruby-node">&quot;stty #{args}&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-toggle_pause" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">toggle_pause</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="toggle_pause-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 77</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">toggle_pause</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@pausing</span>
    <span class="ruby-identifier">say</span> <span class="ruby-string">&quot;Pausing.  Press &#39;p&#39; again to resume.&quot;</span>
    <span class="ruby-ivar">@watcher</span>.<span class="ruby-identifier">pause</span>
    <span class="ruby-ivar">@pausing</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">say</span> <span class="ruby-string">&quot;Resuming.&quot;</span>
    <span class="ruby-ivar">@watcher</span>.<span class="ruby-identifier">unpause</span>
    <span class="ruby-ivar">@pausing</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unpause" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unpause</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="unpause-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 89</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unpause</span>
  <span class="ruby-ivar">@watcher</span>.<span class="ruby-identifier">unpause</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-verbose-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">verbose?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="verbose-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rerun-0.13.0/lib/rerun/runner.rb, line 117</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">verbose?</span>
  <span class="ruby-ivar">@options</span>[<span class="ruby-value">:verbose</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

