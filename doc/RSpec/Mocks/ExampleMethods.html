<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module RSpec::Mocks::ExampleMethods - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="ArgumentMatchers.html">RSpec::Mocks::ArgumentMatchers</a>
  
  
  
    <li><a class="include" href="ExampleMethods/ExpectHost.html">RSpec::Mocks::ExampleMethods::ExpectHost</a>
  
  
  </ul>
</div>

    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><a class="extend" href="ExampleMethods/ExpectHost.html">RSpec::Mocks::ExampleMethods::ExpectHost</a>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-declare_double">::declare_double</a>
    
    <li ><a href="#method-c-declare_verifying_double">::declare_verifying_double</a>
    
    <li ><a href="#method-c-extended">::extended</a>
    
    <li ><a href="#method-c-included">::included</a>
    
    <li ><a href="#method-i-allow_message_expectations_on_nil">#allow_message_expectations_on_nil</a>
    
    <li ><a href="#method-i-class_double">#class_double</a>
    
    <li ><a href="#method-i-class_spy">#class_spy</a>
    
    <li ><a href="#method-i-double">#double</a>
    
    <li ><a href="#method-i-have_received">#have_received</a>
    
    <li ><a href="#method-i-hide_const">#hide_const</a>
    
    <li ><a href="#method-i-instance_double">#instance_double</a>
    
    <li ><a href="#method-i-instance_spy">#instance_spy</a>
    
    <li ><a href="#method-i-object_double">#object_double</a>
    
    <li ><a href="#method-i-object_spy">#object_spy</a>
    
    <li ><a href="#method-i-spy">#spy</a>
    
    <li ><a href="#method-i-stub_const">#stub_const</a>
    
    <li ><a href="#method-i-without_partial_double_verification">#without_partial_double_verification</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="module-RSpec::Mocks::ExampleMethods">
  <h1 id="module-RSpec::Mocks::ExampleMethods" class="module">
    module RSpec::Mocks::ExampleMethods
  </h1>

  <section class="description">
    
<p>Contains methods intended to be used from within code examples. Mix this in
to your test context (such as a test framework base class) to use
rspec-mocks with your test framework. If you&#39;re using rspec-core,
it&#39;ll take care of doing this for you.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-declare_double" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">declare_double</span><span
            class="method-args">(type, *args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@private</p>
          
          

          
          <div class="method-source-code" id="declare_double-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 423</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">declare_double</span>(<span class="ruby-identifier">type</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">args</span> <span class="ruby-operator">&lt;&lt;</span> {} <span class="ruby-keyword">unless</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">last</span>
  <span class="ruby-identifier">type</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-declare_verifying_double" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">declare_verifying_double</span><span
            class="method-args">(type, ref, *args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@private</p>
          
          

          
          <div class="method-source-code" id="declare_verifying_double-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 408</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">declare_verifying_double</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">ref</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-constant">RSpec</span><span class="ruby-operator">::</span><span class="ruby-constant">Mocks</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">verify_doubled_constant_names?</span> <span class="ruby-operator">&amp;&amp;</span>
    <span class="ruby-operator">!</span><span class="ruby-identifier">ref</span>.<span class="ruby-identifier">defined?</span>

    <span class="ruby-constant">RSpec</span><span class="ruby-operator">::</span><span class="ruby-constant">Mocks</span>.<span class="ruby-identifier">error_generator</span>.<span class="ruby-identifier">raise_verifying_double_not_defined_error</span>(<span class="ruby-identifier">ref</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-constant">RSpec</span><span class="ruby-operator">::</span><span class="ruby-constant">Mocks</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">verifying_double_callbacks</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">block</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">ref</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">declare_double</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">ref</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-extended" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">extended</span><span
            class="method-args">(object)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@private</p>
          
          

          
          <div class="method-source-code" id="extended-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 401</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">extended</span>(<span class="ruby-identifier">object</span>)
  <span class="ruby-comment"># This gets extended in so that if `RSpec::Matchers` is included in</span>
  <span class="ruby-comment"># `klass` later, its definition of `expect` will take precedence.</span>
  <span class="ruby-identifier">object</span>.<span class="ruby-identifier">extend</span> <span class="ruby-constant">ExpectHost</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value">:expect</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-included" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">included</span><span
            class="method-args">(klass)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@private</p>
          
          

          
          <div class="method-source-code" id="included-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 392</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">included</span>(<span class="ruby-identifier">klass</span>)
  <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">class_exec</span> <span class="ruby-keyword">do</span>
    <span class="ruby-comment"># This gets mixed in so that if `RSpec::Matchers` is included in</span>
    <span class="ruby-comment"># `klass` later, its definition of `expect` will take precedence.</span>
    <span class="ruby-identifier">include</span> <span class="ruby-constant">ExpectHost</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">method_defined?</span>(<span class="ruby-value">:expect</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-allow_message_expectations_on_nil" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">allow_message_expectations_on_nil</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Disables warning messages about expectations being set on nil.</p>

<p>By default warning messages are issued when expectations are set on nil. 
This is to prevent false-positives and to catch potential bugs early on.
@deprecated Use
{RSpec::Mocks::Configuration#allow_message_expectations_on_nil} instead.</p>
          
          

          
          <div class="method-source-code" id="allow_message_expectations_on_nil-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 201</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">allow_message_expectations_on_nil</span>
  <span class="ruby-constant">RSpec</span><span class="ruby-operator">::</span><span class="ruby-constant">Mocks</span>.<span class="ruby-identifier">space</span>.<span class="ruby-identifier">proxy_for</span>(<span class="ruby-keyword">nil</span>).<span class="ruby-identifier">warn_about_expectations</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-class_double" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">class_double</span><span
            class="method-args">(doubled_class, *args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@overload <a
href="ExampleMethods.html#method-i-class_double">#class_double</a>(doubled_class)</p>

<pre>@param doubled_class [String, Module]</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-class_double">#class_double</a>(doubled_class,
name)</p>

<pre>@param doubled_class [String, Module]
@param name [String/Symbol] name or description to be used in failure messages</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-class_double">#class_double</a>(doubled_class,
stubs)</p>

<pre>@param doubled_class [String, Module]
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-class_double">#class_double</a>(doubled_class,
name, stubs)</p>

<pre>@param doubled_class [String, Module]
@param name [String/Symbol] name or description to be used in failure messages
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@return <a href="ClassVerifyingDouble.html">ClassVerifyingDouble</a></p>

<p>Constructs a test double against a specific class. If the given class name
has been loaded, only class methods defined on the class are allowed to be
stubbed. In all other ways it behaves like a [double](double).</p>
          
          

          
          <div class="method-source-code" id="class_double-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 79</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">class_double</span>(<span class="ruby-identifier">doubled_class</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">ref</span> = <span class="ruby-constant">ObjectReference</span>.<span class="ruby-identifier">for</span>(<span class="ruby-identifier">doubled_class</span>)
  <span class="ruby-constant">ExampleMethods</span>.<span class="ruby-identifier">declare_verifying_double</span>(<span class="ruby-constant">ClassVerifyingDouble</span>, <span class="ruby-identifier">ref</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-class_spy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">class_spy</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@overload <a
href="ExampleMethods.html#method-i-class_spy">#class_spy</a>(doubled_class)</p>

<pre>@param doubled_class [String, Module]</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-class_spy">#class_spy</a>(doubled_class,
name)</p>

<pre>@param doubled_class [String, Class]
@param name [String/Symbol] name or description to be used in failure messages</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-class_spy">#class_spy</a>(doubled_class,
stubs)</p>

<pre>@param doubled_class [String, Module]
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-class_spy">#class_spy</a>(doubled_class,
name, stubs)</p>

<pre>@param doubled_class [String, Class]
@param name [String/Symbol] name or description to be used in failure messages
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@return <a href="ClassVerifyingDouble.html">ClassVerifyingDouble</a></p>

<p>Constructs a test double that is optimized for use with `have_received`
against a specific class. If the given class name has been loaded, only
class methods defined on the class are allowed to be stubbed. With a normal
double one has to stub methods in order to be able to spy them. An <a
href="ExampleMethods.html#method-i-class_spy">#class_spy</a> automatically
spies on all class methods to which the class responds.</p>
          
          

          
          <div class="method-source-code" id="class_spy-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 191</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">class_spy</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">class_double</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>).<span class="ruby-identifier">as_null_object</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-double" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">double</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@overload double() @overload double(name)</p>

<pre>@param name [String/Symbol] name or description to be used in failure messages</pre>

<p>@overload double(stubs)</p>

<pre>@param stubs (Hash) hash of message/return-value pairs</pre>

<p>@overload double(name, stubs)</p>

<pre>@param name [String/Symbol] name or description to be used in failure messages
@param stubs (Hash) hash of message/return-value pairs</pre>

<p>@return (Double)</p>

<p>Constructs an instance of [RSpec::Mocks::Double](RSpec::Mocks::Double)
configured with an optional name, used for reporting in failure messages,
and an optional hash of message/return-value pairs.</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-identifier">book</span> = <span class="ruby-identifier">double</span>(<span class="ruby-string">&quot;book&quot;</span>, :<span class="ruby-identifier">title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;The RSpec Book&quot;</span>)
<span class="ruby-identifier">book</span>.<span class="ruby-identifier">title</span> <span class="ruby-comment">#=&gt; &quot;The RSpec Book&quot;</span>

<span class="ruby-identifier">card</span> = <span class="ruby-identifier">double</span>(<span class="ruby-string">&quot;card&quot;</span>, :<span class="ruby-identifier">suit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Spades&quot;</span>, :<span class="ruby-identifier">rank</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;A&quot;</span>)
<span class="ruby-identifier">card</span>.<span class="ruby-identifier">suit</span>  <span class="ruby-comment">#=&gt; &quot;Spades&quot;</span>
<span class="ruby-identifier">card</span>.<span class="ruby-identifier">rank</span>  <span class="ruby-comment">#=&gt; &quot;A&quot;</span>
</pre>
          
          

          
          <div class="method-source-code" id="double-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 34</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">double</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-constant">ExampleMethods</span>.<span class="ruby-identifier">declare_double</span>(<span class="ruby-constant">Double</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-have_received" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">have_received</span><span
            class="method-args">(method_name, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Verifies that the given object received the expected message during the
course of the test. On a spy objects or as null object doubles this works
for any method, on other objects the method must have been stubbed
beforehand in order for messages to be verified.</p>

<p>Stubbing and verifying messages received in this way implements the <a
href="../../Test.html">Test</a> Spy pattern.</p>

<p>@param method_name [Symbol] name of the method expected to have been</p>

<pre>called.</pre>

<p>@example</p>

<pre class="ruby"><span class="ruby-identifier">invitation</span> = <span class="ruby-identifier">double</span>(<span class="ruby-string">&#39;invitation&#39;</span>, <span class="ruby-identifier">accept</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>)
<span class="ruby-identifier">user</span>.<span class="ruby-identifier">accept_invitation</span>(<span class="ruby-identifier">invitation</span>)
<span class="ruby-identifier">expect</span>(<span class="ruby-identifier">invitation</span>).<span class="ruby-identifier">to</span> <span class="ruby-identifier">have_received</span>(:<span class="ruby-identifier">accept</span>)

<span class="ruby-comment"># You can also use most message expectations:</span>
<span class="ruby-identifier">expect</span>(<span class="ruby-identifier">invitation</span>).<span class="ruby-identifier">to</span> <span class="ruby-identifier">have_received</span>(:<span class="ruby-identifier">accept</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">mailer</span>).<span class="ruby-identifier">once</span>
</pre>

<p>@note `have_received(…).with(…)` is unable to work properly when</p>

<pre>passed arguments are mutated after the spy records the received message.</pre>
          
          

          
          <div class="method-source-code" id="have_received-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 281</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">have_received</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">HaveReceived</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-hide_const" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">hide_const</span><span
            class="method-args">(constant_name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Hides the named constant with the given value. The constant will be
undefined for the duration of the test.</p>

<p>Like method stubs, the constant will be restored to its original value when
the example completes.</p>

<p>@param constant_name [String] The fully qualified name of the constant.</p>

<pre>The current constant scoping at the point of call is not considered.</pre>

<p>@example</p>

<pre class="ruby"><span class="ruby-identifier">hide_const</span>(<span class="ruby-string">&quot;MyClass&quot;</span>) <span class="ruby-comment"># =&gt; MyClass is now an undefined constant</span>
</pre>
          
          

          
          <div class="method-source-code" id="hide_const-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 256</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">hide_const</span>(<span class="ruby-identifier">constant_name</span>)
  <span class="ruby-constant">ConstantMutator</span>.<span class="ruby-identifier">hide</span>(<span class="ruby-identifier">constant_name</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-instance_double" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">instance_double</span><span
            class="method-args">(doubled_class, *args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@overload <a
href="ExampleMethods.html#method-i-instance_double">#instance_double</a>(doubled_class)</p>

<pre>@param doubled_class [String, Class]</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-instance_double">#instance_double</a>(doubled_class,
name)</p>

<pre>@param doubled_class [String, Class]
@param name [String/Symbol] name or description to be used in failure messages</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-instance_double">#instance_double</a>(doubled_class,
stubs)</p>

<pre>@param doubled_class [String, Class]
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-instance_double">#instance_double</a>(doubled_class,
name, stubs)</p>

<pre>@param doubled_class [String, Class]
@param name [String/Symbol] name or description to be used in failure messages
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@return <a href="InstanceVerifyingDouble.html">InstanceVerifyingDouble</a></p>

<p>Constructs a test double against a specific class. If the given class name
has been loaded, only instance methods defined on the class are allowed to
be stubbed. In all other ways it behaves like a [double](double).</p>
          
          

          
          <div class="method-source-code" id="instance_double-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">instance_double</span>(<span class="ruby-identifier">doubled_class</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">ref</span> = <span class="ruby-constant">ObjectReference</span>.<span class="ruby-identifier">for</span>(<span class="ruby-identifier">doubled_class</span>)
  <span class="ruby-constant">ExampleMethods</span>.<span class="ruby-identifier">declare_verifying_double</span>(<span class="ruby-constant">InstanceVerifyingDouble</span>, <span class="ruby-identifier">ref</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-instance_spy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">instance_spy</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@overload <a
href="ExampleMethods.html#method-i-instance_spy">#instance_spy</a>(doubled_class)</p>

<pre>@param doubled_class [String, Class]</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-instance_spy">#instance_spy</a>(doubled_class,
name)</p>

<pre>@param doubled_class [String, Class]
@param name [String/Symbol] name or description to be used in failure messages</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-instance_spy">#instance_spy</a>(doubled_class,
stubs)</p>

<pre>@param doubled_class [String, Class]
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-instance_spy">#instance_spy</a>(doubled_class,
name, stubs)</p>

<pre>@param doubled_class [String, Class]
@param name [String/Symbol] name or description to be used in failure messages
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@return <a href="InstanceVerifyingDouble.html">InstanceVerifyingDouble</a></p>

<p>Constructs a test double that is optimized for use with `have_received`
against a specific class. If the given class name has been loaded, only
instance methods defined on the class are allowed to be stubbed.  With a
normal double one has to stub methods in order to be able to spy them. An
<a href="ExampleMethods.html#method-i-instance_spy">#instance_spy</a>
automatically spies on all instance methods to which the class responds.</p>
          
          

          
          <div class="method-source-code" id="instance_spy-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 144</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">instance_spy</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">instance_double</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>).<span class="ruby-identifier">as_null_object</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-object_double" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">object_double</span><span
            class="method-args">(object_or_name, *args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@overload <a
href="ExampleMethods.html#method-i-object_double">#object_double</a>(object_or_name)</p>

<pre>@param object_or_name [String, Object]</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-object_double">#object_double</a>(object_or_name,
name)</p>

<pre>@param object_or_name [String, Object]
@param name [String/Symbol] name or description to be used in failure messages</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-object_double">#object_double</a>(object_or_name,
stubs)</p>

<pre>@param object_or_name [String, Object]
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-object_double">#object_double</a>(object_or_name,
name, stubs)</p>

<pre>@param object_or_name [String, Object]
@param name [String/Symbol] name or description to be used in failure messages
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@return <a href="ObjectVerifyingDouble.html">ObjectVerifyingDouble</a></p>

<p>Constructs a test double against a specific object. Only the methods the
object responds to are allowed to be stubbed. If a <a
href="../../String.html">String</a> argument is provided, it is assumed to
reference a constant object which is used for verification. In all other
ways it behaves like a [double](double).</p>
          
          

          
          <div class="method-source-code" id="object_double-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 102</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">object_double</span>(<span class="ruby-identifier">object_or_name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">ref</span> = <span class="ruby-constant">ObjectReference</span>.<span class="ruby-identifier">for</span>(<span class="ruby-identifier">object_or_name</span>, <span class="ruby-value">:allow_direct_object_refs</span>)
  <span class="ruby-constant">ExampleMethods</span>.<span class="ruby-identifier">declare_verifying_double</span>(<span class="ruby-constant">ObjectVerifyingDouble</span>, <span class="ruby-identifier">ref</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-object_spy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">object_spy</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@overload <a
href="ExampleMethods.html#method-i-object_spy">#object_spy</a>(object_or_name)</p>

<pre>@param object_or_name [String, Object]</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-object_spy">#object_spy</a>(object_or_name,
name)</p>

<pre>@param object_or_name [String, Class]
@param name [String/Symbol] name or description to be used in failure messages</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-object_spy">#object_spy</a>(object_or_name,
stubs)</p>

<pre>@param object_or_name [String, Object]
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@overload <a
href="ExampleMethods.html#method-i-object_spy">#object_spy</a>(object_or_name,
name, stubs)</p>

<pre>@param object_or_name [String, Class]
@param name [String/Symbol] name or description to be used in failure messages
@param stubs [Hash] hash of message/return-value pairs</pre>

<p>@return <a href="ObjectVerifyingDouble.html">ObjectVerifyingDouble</a></p>

<p>Constructs a test double that is optimized for use with `have_received`
against a specific object. Only instance methods defined on the object are
allowed to be stubbed.  With a normal double one has to stub methods in
order to be able to spy them. An <a
href="ExampleMethods.html#method-i-object_spy">#object_spy</a>
automatically spies on all methods to which the object responds.</p>
          
          

          
          <div class="method-source-code" id="object_spy-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">object_spy</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">object_double</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>).<span class="ruby-identifier">as_null_object</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-spy" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">spy</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>@overload spy() @overload spy(name)</p>

<pre>@param name [String/Symbol] name or description to be used in failure messages</pre>

<p>@overload spy(stubs)</p>

<pre>@param stubs (Hash) hash of message/return-value pairs</pre>

<p>@overload spy(name, stubs)</p>

<pre>@param name [String/Symbol] name or description to be used in failure messages
@param stubs (Hash) hash of message/return-value pairs</pre>

<p>@return (Double)</p>

<p>Constructs a test double that is optimized for use with `have_received`.
With a normal double one has to stub methods in order to be able to spy
them. A spy automatically spies on all methods.</p>
          
          

          
          <div class="method-source-code" id="spy-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 120</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">spy</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">double</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>).<span class="ruby-identifier">as_null_object</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-stub_const" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stub_const</span><span
            class="method-args">(constant_name, value, options={})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Stubs the named constant with the given value. Like method stubs, the
constant will be restored to its original value (or lack of one, if it was
undefined) when the example completes.</p>

<p>@param constant_name [String] The fully qualified name of the constant. The
current</p>

<pre>constant scoping at the point of call is not considered.</pre>

<p>@param value [Object] The value to make the constant refer to. When the</p>

<pre>example completes, the constant will be restored to its prior state.</pre>

<p>@param options [Hash] Stubbing options. @option options
:transfer_nested_constants [Boolean, <a
href="../../Array.html">Array</a>&lt;Symbol&gt;] Determines</p>

<pre>what nested constants, if any, will be transferred from the original value
of the constant to the new value of the constant. This only works if both
the original and new values are modules (or classes).</pre>

<p>@return [Object] the stubbed value of the constant</p>

<p>@example</p>

<pre class="ruby"><span class="ruby-identifier">stub_const</span>(<span class="ruby-string">&quot;MyClass&quot;</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>) <span class="ruby-comment"># =&gt; Replaces (or defines) MyClass with a new class object.</span>
<span class="ruby-identifier">stub_const</span>(<span class="ruby-string">&quot;SomeModel::PER_PAGE&quot;</span>, <span class="ruby-value">5</span>) <span class="ruby-comment"># =&gt; Sets SomeModel::PER_PAGE to 5.</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">CardDeck</span>
  <span class="ruby-constant">SUITS</span> = [:<span class="ruby-constant">Spades</span>, :<span class="ruby-constant">Diamonds</span>, :<span class="ruby-constant">Clubs</span>, :<span class="ruby-constant">Hearts</span>]
  <span class="ruby-constant">NUM_CARDS</span> = <span class="ruby-value">52</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">stub_const</span>(<span class="ruby-string">&quot;CardDeck&quot;</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>)
<span class="ruby-constant">CardDeck</span><span class="ruby-operator">::</span><span class="ruby-constant">SUITS</span> <span class="ruby-comment"># =&gt; uninitialized constant error</span>
<span class="ruby-constant">CardDeck</span><span class="ruby-operator">::</span><span class="ruby-constant">NUM_CARDS</span> <span class="ruby-comment"># =&gt; uninitialized constant error</span>

<span class="ruby-identifier">stub_const</span>(<span class="ruby-string">&quot;CardDeck&quot;</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>, :<span class="ruby-identifier">transfer_nested_constants</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>)
<span class="ruby-constant">CardDeck</span><span class="ruby-operator">::</span><span class="ruby-constant">SUITS</span> <span class="ruby-comment"># =&gt; our suits array</span>
<span class="ruby-constant">CardDeck</span><span class="ruby-operator">::</span><span class="ruby-constant">NUM_CARDS</span> <span class="ruby-comment"># =&gt; 52</span>

<span class="ruby-identifier">stub_const</span>(<span class="ruby-string">&quot;CardDeck&quot;</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>, :<span class="ruby-identifier">transfer_nested_constants</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-constant">SUITS</span>])
<span class="ruby-constant">CardDeck</span><span class="ruby-operator">::</span><span class="ruby-constant">SUITS</span> <span class="ruby-comment"># =&gt; our suits array</span>
<span class="ruby-constant">CardDeck</span><span class="ruby-operator">::</span><span class="ruby-constant">NUM_CARDS</span> <span class="ruby-comment"># =&gt; uninitialized constant error</span>
</pre>
          
          

          
          <div class="method-source-code" id="stub_const-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 241</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stub_const</span>(<span class="ruby-identifier">constant_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span>={})
  <span class="ruby-constant">ConstantMutator</span>.<span class="ruby-identifier">stub</span>(<span class="ruby-identifier">constant_name</span>, <span class="ruby-identifier">value</span>, <span class="ruby-identifier">options</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-without_partial_double_verification" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">without_partial_double_verification</span><span
            class="method-args">() { || ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Turns off the verifying of partial doubles for the duration of the block,
this is useful in situations where methods are defined at run time and you
wish to define stubs for them but not turn off partial doubles for the
entire run suite. (e.g. view specs in rspec-rails).</p>
          
          

          
          <div class="method-source-code" id="without_partial_double_verification-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/rspec-mocks-3.7.0/lib/rspec/mocks/example_methods.rb, line 289</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">without_partial_double_verification</span>
  <span class="ruby-identifier">original_state</span> = <span class="ruby-constant">Mocks</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">temporarily_suppress_partial_double_verification</span>
  <span class="ruby-constant">Mocks</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">temporarily_suppress_partial_double_verification</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">yield</span>
<span class="ruby-keyword">ensure</span>
  <span class="ruby-constant">Mocks</span>.<span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">temporarily_suppress_partial_double_verification</span> = <span class="ruby-identifier">original_state</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

