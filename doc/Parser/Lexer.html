<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Parser::Lexer - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#class-Parser::Lexer-label-BEFORE+YOU+START+-3D-3D-3D">BEFORE YOU START ===</a>
    <li><a href="#class-Parser::Lexer-label-BEFORE+YOU+START+-3D-3D-3D">BEFORE YOU START ===</a>
    <li><a href="#class-Parser::Lexer-label-BEFORE+YOU+START+-3D-3D-3D">BEFORE YOU START ===</a>
  </ul>
</div>


  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../Object.html">Object</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-advance">#advance</a>
    
    <li ><a href="#method-i-arg_or_cmdarg">#arg_or_cmdarg</a>
    
    <li ><a href="#method-i-dedent_level">#dedent_level</a>
    
    <li ><a href="#method-i-diagnostic">#diagnostic</a>
    
    <li ><a href="#method-i-emit">#emit</a>
    
    <li ><a href="#method-i-emit_comment">#emit_comment</a>
    
    <li ><a href="#method-i-emit_do">#emit_do</a>
    
    <li ><a href="#method-i-emit_table">#emit_table</a>
    
    <li ><a href="#method-i-encode_escape">#encode_escape</a>
    
    <li ><a href="#method-i-encoding">#encoding</a>
    
    <li ><a href="#method-i-eof_codepoint-3F">#eof_codepoint?</a>
    
    <li ><a href="#method-i-literal">#literal</a>
    
    <li ><a href="#method-i-pop_cmdarg">#pop_cmdarg</a>
    
    <li ><a href="#method-i-pop_cond">#pop_cond</a>
    
    <li ><a href="#method-i-pop_literal">#pop_literal</a>
    
    <li ><a href="#method-i-push_cmdarg">#push_cmdarg</a>
    
    <li ><a href="#method-i-push_cond">#push_cond</a>
    
    <li ><a href="#method-i-push_literal">#push_literal</a>
    
    <li ><a href="#method-i-range">#range</a>
    
    <li ><a href="#method-i-reset">#reset</a>
    
    <li ><a href="#method-i-source_buffer-3D">#source_buffer=</a>
    
    <li ><a href="#method-i-stack_pop">#stack_pop</a>
    
    <li ><a href="#method-i-state">#state</a>
    
    <li ><a href="#method-i-state-3D">#state=</a>
    
    <li ><a href="#method-i-tok">#tok</a>
    
    <li ><a href="#method-i-version-3F">#version?</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Parser::Lexer">
  <h1 id="class-Parser::Lexer" class="class">
    class Parser::Lexer
  </h1>

  <section class="description">
    
<p>line 3 “lib/parser/lexer.rl”</p>

<h3 id="class-Parser::Lexer-label-BEFORE+YOU+START+-3D-3D-3D">BEFORE YOU START ===<span><a href="#class-Parser::Lexer-label-BEFORE+YOU+START+-3D-3D-3D">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Read the Ruby Hacking Guide chapter 11, available in English at <a
href="http://whitequark.org/blog/2013/04/01/ruby-hacking-guide-ch-11-finite-state-lexer">whitequark.org/blog/2013/04/01/ruby-hacking-guide-ch-11-finite-state-lexer</a>/</p>

<p>Remember two things about Ragel scanners:</p>

<pre>1) Longest match wins.

2) If two matches have the same length, the first
   in source code wins.</pre>

<p>General rules of making Ragel and Bison happy:</p>

<pre>* `p` (position) and `@te` contain the index of the character
  they&#39;re pointing to (&quot;current&quot;), plus one. `@ts` contains the index
  of the corresponding character. The code for extracting matched token is:

     @source_buffer.slice(@ts...@te)

* If your input is `foooooooobar` and the rule is:

     &#39;f&#39; &#39;o&#39;+

  the result will be:

     foooooooobar
     ^ ts=0   ^ p=te=9

* A Ragel lexer action should not emit more than one token, unless
  you know what you are doing.

* All Ragel commands (fnext, fgoto, ...) end with a semicolon.

* If an action emits the token and transitions to another state, use
  these Ragel commands:

     emit($whatever)
     fnext $next_state; fbreak;

  If you perform `fgoto` in an action which does not emit a token nor
  rewinds the stream pointer, the parser&#39;s side-effectful,
  context-sensitive lookahead actions will break in a hard to detect
  and debug way.

* If an action does not emit a token:

     fgoto $next_state;

* If an action features lookbehind, i.e. matches characters with the
  intent of passing them to another action:

     p = @ts - 1
     fgoto $next_state;

  or, if the lookbehind consists of a single character:

     fhold; fgoto $next_state;

* Ragel merges actions. So, if you have `e_lparen = &#39;(&#39; %act` and
  `c_lparen = &#39;(&#39;` and a lexer action `e_lparen | c_lparen`, the result
  _will_ invoke the action `act`.

  e_something stands for &quot;something with **e**mbedded action&quot;.

* EOF is explicit and is matched by `c_eof`. If you want to introspect
  the state of the lexer, add this rule to the state:

     c_eof =&gt; do_eof;

* If you proceed past EOF, the lexer will complain:

     NoMethodError: undefined method `ord&#39; for nil:NilClass</pre>

<p>line 3 “lib/parser/lexer.rl”</p>

<h3 id="class-Parser::Lexer-label-BEFORE+YOU+START+-3D-3D-3D">BEFORE YOU START ===<span><a href="#class-Parser::Lexer-label-BEFORE+YOU+START+-3D-3D-3D">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Read the Ruby Hacking Guide chapter 11, available in English at <a
href="http://whitequark.org/blog/2013/04/01/ruby-hacking-guide-ch-11-finite-state-lexer">whitequark.org/blog/2013/04/01/ruby-hacking-guide-ch-11-finite-state-lexer</a>/</p>

<p>Remember two things about Ragel scanners:</p>

<pre>1) Longest match wins.

2) If two matches have the same length, the first
   in source code wins.</pre>

<p>General rules of making Ragel and Bison happy:</p>

<pre>* `p` (position) and `@te` contain the index of the character
  they&#39;re pointing to (&quot;current&quot;), plus one. `@ts` contains the index
  of the corresponding character. The code for extracting matched token is:

     @source_buffer.slice(@ts...@te)

* If your input is `foooooooobar` and the rule is:

     &#39;f&#39; &#39;o&#39;+

  the result will be:

     foooooooobar
     ^ ts=0   ^ p=te=9

* A Ragel lexer action should not emit more than one token, unless
  you know what you are doing.

* All Ragel commands (fnext, fgoto, ...) end with a semicolon.

* If an action emits the token and transitions to another state, use
  these Ragel commands:

     emit($whatever)
     fnext $next_state; fbreak;

  If you perform `fgoto` in an action which does not emit a token nor
  rewinds the stream pointer, the parser&#39;s side-effectful,
  context-sensitive lookahead actions will break in a hard to detect
  and debug way.

* If an action does not emit a token:

     fgoto $next_state;

* If an action features lookbehind, i.e. matches characters with the
  intent of passing them to another action:

     p = @ts - 1
     fgoto $next_state;

  or, if the lookbehind consists of a single character:

     fhold; fgoto $next_state;

* Ragel merges actions. So, if you have `e_lparen = &#39;(&#39; %act` and
  `c_lparen = &#39;(&#39;` and a lexer action `e_lparen | c_lparen`, the result
  _will_ invoke the action `act`.

  e_something stands for &quot;something with **e**mbedded action&quot;.

* EOF is explicit and is matched by `c_eof`. If you want to introspect
  the state of the lexer, add this rule to the state:

     c_eof =&gt; do_eof;

* If you proceed past EOF, the lexer will complain:

     NoMethodError: undefined method `ord&#39; for nil:NilClass</pre>

<p>line 3 “lib/parser/lexer.rl”</p>

<h3 id="class-Parser::Lexer-label-BEFORE+YOU+START+-3D-3D-3D">BEFORE YOU START ===<span><a href="#class-Parser::Lexer-label-BEFORE+YOU+START+-3D-3D-3D">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>Read the Ruby Hacking Guide chapter 11, available in English at <a
href="http://whitequark.org/blog/2013/04/01/ruby-hacking-guide-ch-11-finite-state-lexer">whitequark.org/blog/2013/04/01/ruby-hacking-guide-ch-11-finite-state-lexer</a>/</p>

<p>Remember two things about Ragel scanners:</p>

<pre>1) Longest match wins.

2) If two matches have the same length, the first
   in source code wins.</pre>

<p>General rules of making Ragel and Bison happy:</p>

<pre>* `p` (position) and `@te` contain the index of the character
  they&#39;re pointing to (&quot;current&quot;), plus one. `@ts` contains the index
  of the corresponding character. The code for extracting matched token is:

     @source_buffer.slice(@ts...@te)

* If your input is `foooooooobar` and the rule is:

     &#39;f&#39; &#39;o&#39;+

  the result will be:

     foooooooobar
     ^ ts=0   ^ p=te=9

* A Ragel lexer action should not emit more than one token, unless
  you know what you are doing.

* All Ragel commands (fnext, fgoto, ...) end with a semicolon.

* If an action emits the token and transitions to another state, use
  these Ragel commands:

     emit($whatever)
     fnext $next_state; fbreak;

  If you perform `fgoto` in an action which does not emit a token nor
  rewinds the stream pointer, the parser&#39;s side-effectful,
  context-sensitive lookahead actions will break in a hard to detect
  and debug way.

* If an action does not emit a token:

     fgoto $next_state;

* If an action features lookbehind, i.e. matches characters with the
  intent of passing them to another action:

     p = @ts - 1
     fgoto $next_state;

  or, if the lookbehind consists of a single character:

     fhold; fgoto $next_state;

* Ragel merges actions. So, if you have `e_lparen = &#39;(&#39; %act` and
  `c_lparen = &#39;(&#39;` and a lexer action `e_lparen | c_lparen`, the result
  _will_ invoke the action `act`.

  e_something stands for &quot;something with **e**mbedded action&quot;.

* EOF is explicit and is matched by `c_eof`. If you want to introspect
  the state of the lexer, add this rule to the state:

     c_eof =&gt; do_eof;

* If you proceed past EOF, the lexer will complain:

     NoMethodError: undefined method `ord&#39; for nil:NilClass</pre>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="ESCAPES">ESCAPES
        
        <dd><p>line 82 “lib/parser/lexer.rl” %</p>
        
      
        <dt id="KEYWORDS">KEYWORDS
        
        <dd>
        
      
        <dt id="KEYWORDS_BEGIN">KEYWORDS_BEGIN
        
        <dd>
        
      
        <dt id="LEX_STATES">LEX_STATES
        
        <dd>
        
      
        <dt id="PUNCTUATION">PUNCTUATION
        
        <dd><p>Mapping of strings to parser tokens.</p>
        
      
        <dt id="PUNCTUATION_BEGIN">PUNCTUATION_BEGIN
        
        <dd>
        
      
        <dt id="REGEXP_META_CHARACTERS">REGEXP_META_CHARACTERS
        
        <dd>
        
      
      </dl>
    </section>
    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-c-lex_en_expr_arg" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_arg</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_beg" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_beg</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_cmdarg" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_cmdarg</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_dot" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_dot</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_end" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_end</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_endarg" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_endarg</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_endfn" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_endfn</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_fname" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_fname</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_labelarg" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_labelarg</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_mid" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_mid</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_value" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_value</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_expr_variable" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_expr_variable</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_interp_backslash_delimited" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_interp_backslash_delimited</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_interp_backslash_delimited_words" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_interp_backslash_delimited_words</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_interp_string" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_interp_string</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_interp_words" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_interp_words</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_leading_dot" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_leading_dot</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_line_begin" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_line_begin</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_line_comment" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_line_comment</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_plain_backslash_delimited" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_plain_backslash_delimited</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_plain_backslash_delimited_words" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_plain_backslash_delimited_words</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_plain_string" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_plain_string</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_plain_words" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_plain_words</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_en_regexp_modifiers" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_en_regexp_modifiers</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_error" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_error</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-c-lex_start" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">lex_start</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-cmdarg" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">cmdarg</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-comments" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">comments</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-cond" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">cond</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-diagnostics" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">diagnostics</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-force_utf32" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">force_utf32</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-in_kwarg" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">in_kwarg</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-last_token" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">last_token</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-source_buffer" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">source_buffer</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-static_env" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">static_env</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-tokens" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">tokens</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(version)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10652</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">version</span>)
  <span class="ruby-ivar">@version</span>    = <span class="ruby-identifier">version</span>
  <span class="ruby-ivar">@static_env</span> = <span class="ruby-keyword">nil</span>

  <span class="ruby-ivar">@tokens</span>     = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@comments</span>   = <span class="ruby-keyword">nil</span>

  <span class="ruby-identifier">reset</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-advance" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">advance</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return next token: [type, value].</p>
          
          

          
          <div class="method-source-code" id="advance-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10809</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">advance</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@token_queue</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-keyword">return</span> <span class="ruby-ivar">@token_queue</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Ugly, but dependent on Ragel output. Consider refactoring it somehow.</span>
    <span class="ruby-identifier">klass</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>
    <span class="ruby-identifier">_lex_trans_keys</span>         = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:_lex_trans_keys</span>
    <span class="ruby-identifier">_lex_key_spans</span>          = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:_lex_key_spans</span>
    <span class="ruby-identifier">_lex_index_offsets</span>      = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:_lex_index_offsets</span>
    <span class="ruby-identifier">_lex_indicies</span>           = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:_lex_indicies</span>
    <span class="ruby-identifier">_lex_trans_targs</span>        = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:_lex_trans_targs</span>
    <span class="ruby-identifier">_lex_trans_actions</span>      = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:_lex_trans_actions</span>
    <span class="ruby-identifier">_lex_to_state_actions</span>   = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:_lex_to_state_actions</span>
    <span class="ruby-identifier">_lex_from_state_actions</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:_lex_from_state_actions</span>
    <span class="ruby-identifier">_lex_eof_trans</span>          = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">send</span> <span class="ruby-value">:_lex_eof_trans</span>

    <span class="ruby-identifier">pe</span> = <span class="ruby-ivar">@source_pts</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>
    <span class="ruby-identifier">p</span>, <span class="ruby-identifier">eof</span> = <span class="ruby-ivar">@p</span>, <span class="ruby-identifier">pe</span>

    <span class="ruby-ivar">@command_state</span> = (<span class="ruby-ivar">@cs</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">lex_en_expr_value</span> <span class="ruby-operator">||</span>
                      <span class="ruby-ivar">@cs</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">lex_en_line_begin</span>)

    
<span class="ruby-comment"># line 10834 &quot;lib/parser/lexer.rb&quot;</span>
<span class="ruby-keyword">begin</span>
        <span class="ruby-identifier">testEof</span> = <span class="ruby-keyword">false</span>
        <span class="ruby-identifier">_slen</span>, <span class="ruby-identifier">_trans</span>, <span class="ruby-identifier">_keys</span>, <span class="ruby-identifier">_inds</span>, <span class="ruby-identifier">_acts</span>, <span class="ruby-identifier">_nacts</span> = <span class="ruby-keyword">nil</span>
        <span class="ruby-identifier">_goto_level</span> = <span class="ruby-value">0</span>
        <span class="ruby-identifier">_resume</span> = <span class="ruby-value">10</span>
        <span class="ruby-identifier">_eof_trans</span> = <span class="ruby-value">15</span>
        <span class="ruby-identifier">_again</span> = <span class="ruby-value">20</span>
        <span class="ruby-identifier">_test_eof</span> = <span class="ruby-value">30</span>
        <span class="ruby-identifier">_out</span> = <span class="ruby-value">40</span>
        <span class="ruby-keyword">while</span> <span class="ruby-keyword">true</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">_goto_level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">0</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_test_eof</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span>  <span class="ruby-ivar">@cs</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">_goto_level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">_resume</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">_lex_from_state_actions</span>[ <span class="ruby-ivar">@cs</span>] 
        <span class="ruby-keyword">when</span> <span class="ruby-value">89</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@ts</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 10862 &quot;lib/parser/lexer.rb&quot;</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">_keys</span> =  <span class="ruby-ivar">@cs</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">_inds</span> = <span class="ruby-identifier">_lex_index_offsets</span>[ <span class="ruby-ivar">@cs</span>]
        <span class="ruby-identifier">_slen</span> = <span class="ruby-identifier">_lex_key_spans</span>[ <span class="ruby-ivar">@cs</span>]
        <span class="ruby-identifier">_wide</span> = ( (<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>))
        <span class="ruby-identifier">_trans</span> = <span class="ruby-keyword">if</span> (   <span class="ruby-identifier">_slen</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> 
                        <span class="ruby-identifier">_lex_trans_keys</span>[<span class="ruby-identifier">_keys</span>] <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">_wide</span> <span class="ruby-operator">&amp;&amp;</span> 
                        <span class="ruby-identifier">_wide</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">_lex_trans_keys</span>[<span class="ruby-identifier">_keys</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>] 
                    ) <span class="ruby-keyword">then</span>
                        <span class="ruby-identifier">_lex_indicies</span>[ <span class="ruby-identifier">_inds</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">_wide</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">_lex_trans_keys</span>[<span class="ruby-identifier">_keys</span>] ] 
                 <span class="ruby-keyword">else</span> 
                        <span class="ruby-identifier">_lex_indicies</span>[ <span class="ruby-identifier">_inds</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">_slen</span> ]
                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">_goto_level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">_eof_trans</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-identifier">_lex_trans_targs</span>[<span class="ruby-identifier">_trans</span>]
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">_lex_trans_actions</span>[<span class="ruby-identifier">_trans</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">_lex_trans_actions</span>[<span class="ruby-identifier">_trans</span>]
        <span class="ruby-keyword">when</span> <span class="ruby-value">28</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">108</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 794 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape_s</span> = <span class="ruby-identifier">p</span>
    <span class="ruby-ivar">@escape</span>   = <span class="ruby-keyword">nil</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">29</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">59</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">63</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">292</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1196 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">36</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1465 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">38</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1481 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">40</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1509 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">69</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1699 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">heredoc_e</span>      = <span class="ruby-identifier">p</span>             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">333</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1771 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-keyword">nil</span>          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">362</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1840 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">290</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1895 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">ident_tok</span> = <span class="ruby-identifier">tok</span>; <span class="ruby-identifier">ident_ts</span> = <span class="ruby-ivar">@ts</span>; <span class="ruby-identifier">ident_te</span> = <span class="ruby-ivar">@te</span>;               <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">448</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2076 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">16</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">440</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2077 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">444</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2078 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">436</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2079 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">2</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">455</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2080 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">412</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2081 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">428</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">421</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2139 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">418</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2140 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">85</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2281 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">7</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">105</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1035 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DBEG</span>, <span class="ruby-string">&#39;#{&#39;</span>.<span class="ruby-identifier">freeze</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">saved_herebody_s</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">start_interp_brace</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">5</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 980 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DVAR</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

    <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">101</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">100</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">106</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 980 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DVAR</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

    <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">103</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 967 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">104</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">6</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">4</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">133</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1035 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DBEG</span>, <span class="ruby-string">&#39;#{&#39;</span>.<span class="ruby-identifier">freeze</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">saved_herebody_s</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">start_interp_brace</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">10</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 980 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DVAR</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

    <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">130</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">129</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">134</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 980 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DVAR</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

    <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">132</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">11</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">9</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">157</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">156</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">159</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 967 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">160</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">163</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">162</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">165</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">172</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1035 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DBEG</span>, <span class="ruby-string">&#39;#{&#39;</span>.<span class="ruby-identifier">freeze</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">saved_herebody_s</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">start_interp_brace</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">13</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 980 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DVAR</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

    <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">169</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">168</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">173</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 980 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DVAR</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

    <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">171</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">12</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">175</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">174</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">182</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1035 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DBEG</span>, <span class="ruby-string">&#39;#{&#39;</span>.<span class="ruby-identifier">freeze</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">saved_herebody_s</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">start_interp_brace</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">15</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 980 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DVAR</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

    <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">178</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">177</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">183</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 980 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_content</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DVAR</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

    <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span>
        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">180</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 967 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">181</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">14</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">185</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">184</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 843 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">string</span> = <span class="ruby-identifier">tok</span>

    <span class="ruby-comment"># tLABEL_END is only possible in non-cond context on &gt;= 2.2</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">22</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
      <span class="ruby-identifier">lookahead</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@te</span><span class="ruby-operator">...</span><span class="ruby-ivar">@te</span><span class="ruby-operator">+</span><span class="ruby-value">2</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span> <span class="ruby-operator">&amp;&amp;</span>
          (<span class="ruby-identifier">token</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>, <span class="ruby-identifier">lookahead</span>))
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">token</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">:tLABEL_END</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-identifier">pop_literal</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
      <span class="ruby-keyword">else</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">string</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">187</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 967 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">188</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1126 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tREGEXP_OPT</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">189</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1113 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">unknown_options</span> = <span class="ruby-identifier">tok</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/[^imxouesn]/</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">unknown_options</span>.<span class="ruby-identifier">any?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:regexp_options</span>,
                     { <span class="ruby-value">:options</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">unknown_options</span>.<span class="ruby-identifier">join</span> }
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tREGEXP_OPT</span>)
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">16</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1255 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span>    <span class="ruby-identifier">tok</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\$([1-9][0-9]*)$/</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tNTH_REF</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">to_i</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\$([&amp;`&#39;+])$/</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tBACK_REF</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tGVAR</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">stack_pop</span>);     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">190</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1255 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span>    <span class="ruby-identifier">tok</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\$([1-9][0-9]*)$/</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tNTH_REF</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">to_i</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^\$([&amp;`&#39;+])$/</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tBACK_REF</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tGVAR</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">stack_pop</span>);     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">192</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1268 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^@@[0-9]/</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:cvar_name</span>, { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span> }
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCVAR</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">stack_pop</span>);     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">191</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1278 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^@[0-9]/</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:ivar_name</span>, { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span> }
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIVAR</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">stack_pop</span>);     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">213</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1299 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS_BEGIN</span>);
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">199</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1307 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">18</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1311 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;  <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">196</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1320 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">208</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1324 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;   <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">20</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1330 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">23</span>)
          <span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span> = <span class="ruby-identifier">tok</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>], <span class="ruby-identifier">tok</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">chr</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">push_literal</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span>, <span class="ruby-ivar">@ts</span>))
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">195</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1343 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">194</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">212</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1299 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS_BEGIN</span>);
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">209</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1303 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCONSTANT</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">211</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1307 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">206</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1311 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;  <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">202</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1320 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">207</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1327 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">200</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1340 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">205</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1343 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">19</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1320 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">17</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1343 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">198</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">case</span>  <span class="ruby-ivar">@act</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">39</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS_BEGIN</span>);
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">40</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCONSTANT</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">41</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span> 
                        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">22</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1355 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLABEL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">215</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1361 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">214</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">217</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1358 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">216</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1361 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">21</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1361 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">223</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1387 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">222</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1393 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">221</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">233</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1372 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCONSTANT</span>)
            <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);      <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">224</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1376 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)
            <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);      <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">229</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1387 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">227</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1390 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">232</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1393 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">256</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1451 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-comment"># Unlike expr_beg as invoked in the next rule, do not warn</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">239</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1469 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span>(<span class="ruby-identifier">tm</span>, <span class="ruby-identifier">tm</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">==</span> <span class="ruby-string">&#39;/&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-comment"># Ambiguous regexp literal.</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:warning</span>, <span class="ruby-value">:ambiguous_literal</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">tm</span>, <span class="ruby-identifier">tm</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">245</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1493 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;   <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">24</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1501 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">247</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1510 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;     <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">39</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1521 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">234</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1535 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">235</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">246</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1460 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">242</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1482 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:warning</span>, <span class="ruby-value">:ambiguous_prefix</span>, { <span class="ruby-value">:prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span>(<span class="ruby-identifier">tm</span>, <span class="ruby-ivar">@te</span>) },
                   <span class="ruby-identifier">range</span>(<span class="ruby-identifier">tm</span>, <span class="ruby-ivar">@te</span>)

        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">244</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1498 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">238</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1521 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">237</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1526 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">255</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1535 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">25</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1526 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">41</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1535 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">23</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">case</span>  <span class="ruby-ivar">@act</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">67</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span>(<span class="ruby-identifier">tm</span>, <span class="ruby-identifier">tm</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">==</span> <span class="ruby-string">&#39;/&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-comment"># Ambiguous regexp literal.</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:warning</span>, <span class="ruby-value">:ambiguous_literal</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">tm</span>, <span class="ruby-identifier">tm</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">68</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:warning</span>, <span class="ruby-value">:ambiguous_prefix</span>, { <span class="ruby-value">:prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span>(<span class="ruby-identifier">tm</span>, <span class="ruby-ivar">@te</span>) },
                   <span class="ruby-identifier">range</span>(<span class="ruby-identifier">tm</span>, <span class="ruby-ivar">@te</span>)

        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">73</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span> 
                        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">43</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1571 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">260</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">261</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1571 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">44</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1571 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">42</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">case</span>  <span class="ruby-ivar">@act</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">80</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kDO_COND</span>, <span class="ruby-string">&#39;do&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kDO</span>, <span class="ruby-string">&#39;do&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">end</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">81</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span> 
                        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">271</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1605 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_do</span>(<span class="ruby-keyword">true</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">264</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1611 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">265</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">266</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1608 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">269</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1611 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">275</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1635 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">274</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">283</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1627 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">277</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1629 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">281</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1635 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">276</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">case</span>  <span class="ruby-ivar">@act</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">88</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">89</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;   <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span> 
                        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">56</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1650 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tUNARY_NUM</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">314</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1667 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">type</span> = <span class="ruby-identifier">delimiter</span> = <span class="ruby-identifier">tok</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">chr</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">push_literal</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span>, <span class="ruby-ivar">@ts</span>))
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">308</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1674 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">chr</span>, <span class="ruby-identifier">tok</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">chr</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">push_literal</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span>, <span class="ruby-ivar">@ts</span>))
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">54</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1681 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span> = <span class="ruby-identifier">tok</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>], <span class="ruby-identifier">tok</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">chr</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">push_literal</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span>, <span class="ruby-ivar">@ts</span>))
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">326</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1737 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBEG</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">326</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">315</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1745 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span> = <span class="ruby-identifier">tok</span>, <span class="ruby-identifier">tok</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">chr</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">push_literal</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span>, <span class="ruby-ivar">@ts</span>))
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">68</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1759 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-ivar">@ts</span>)
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">330</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1786 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">escape</span> = { <span class="ruby-string">&quot; &quot;</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\s&#39;</span>, <span class="ruby-string">&quot;\r&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\r&#39;</span>, <span class="ruby-string">&quot;\n&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\n&#39;</span>, <span class="ruby-string">&quot;\t&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\t&#39;</span>,
                   <span class="ruby-string">&quot;\v&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\v&#39;</span>, <span class="ruby-string">&quot;\f&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\f&#39;</span> }[<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)]
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:warning</span>, <span class="ruby-value">:invalid_escape_use</span>, { <span class="ruby-value">:escape</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">escape</span> }, <span class="ruby-identifier">range</span>

        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">329</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1796 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:incomplete_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">316</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1835 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION_BEGIN</span>)
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">51</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1855 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">ident</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>)

          <span class="ruby-identifier">emit</span>((<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@ts</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp">/[A-Z]/</span>) <span class="ruby-operator">?</span> <span class="ruby-value">:tCONSTANT</span> <span class="ruby-operator">:</span> <span class="ruby-value">:tIDENTIFIER</span>,
               <span class="ruby-identifier">ident</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-comment"># continue as a symbol</span>

          <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">ident</span>)
             <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;
          <span class="ruby-keyword">else</span>
             <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLABEL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">752</span>;
        <span class="ruby-keyword">end</span>

                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">48</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1897 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>, <span class="ruby-identifier">ident_tok</span>, <span class="ruby-identifier">ident_ts</span>, <span class="ruby-identifier">ident_te</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">ident_te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>

        <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">ident_tok</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">25</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;
        <span class="ruby-keyword">else</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">498</span>;
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">302</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1916 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@cs_before_block_comment</span> = <span class="ruby-ivar">@cs</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">182</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">55</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1932 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">286</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">313</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1650 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tUNARY_NUM</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">312</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1657 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTAR</span>, <span class="ruby-string">&#39;*&#39;</span>.<span class="ruby-identifier">freeze</span>)
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">309</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1681 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span> = <span class="ruby-identifier">tok</span>[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>], <span class="ruby-identifier">tok</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">chr</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">push_literal</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span>, <span class="ruby-ivar">@ts</span>))
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">307</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1687 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">317</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1759 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-ivar">@ts</span>)
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">328</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1796 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:incomplete_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">334</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1802 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">310</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1835 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION_BEGIN</span>)
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">289</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1240 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">tok</span>)
       <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
       <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">299</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1913 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">301</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1916 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@cs_before_block_comment</span> = <span class="ruby-ivar">@cs</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">182</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">304</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1932 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">53</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1687 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">71</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">47</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1240 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">tok</span>)
       <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
       <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">52</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1913 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">67</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1932 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">50</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">case</span>  <span class="ruby-ivar">@act</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">94</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tUNARY_NUM</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">112</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION_BEGIN</span>)
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">113</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kRESCUE</span>, <span class="ruby-string">&#39;rescue&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">512</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">114</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS_BEGIN</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">116</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">117</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">tok</span>)
       <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
       <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">121</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;   <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span> 
                        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">364</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1952 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">365</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">366</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1940 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">370</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1952 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">74</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1962 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">374</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1967 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">push_literal</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>))
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">373</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1977 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">372</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">376</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1971 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">375</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1977 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">73</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1977 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">406</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1988 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLAMBDA</span>, <span class="ruby-string">&#39;-&gt;&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>)

        <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-ivar">@paren_nest</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">83</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2025 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kCLASS</span>, <span class="ruby-string">&#39;class&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">5</span>)
           <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLSHFT</span>, <span class="ruby-string">&#39;&lt;&lt;&#39;</span>.<span class="ruby-identifier">freeze</span>,    <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@te</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">384</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2160 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span> = <span class="ruby-identifier">tok</span>, <span class="ruby-identifier">tok</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">chr</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">push_literal</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">false</span>, <span class="ruby-keyword">false</span>, <span class="ruby-keyword">true</span>))
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">76</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2178 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">403</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2185 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">446</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">397</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2212 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">390</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2216 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
        <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">lexpop</span>; <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">pop</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;}&#39;</span>.<span class="ruby-identifier">freeze</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">504</span>;
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;]&#39;</span>
          <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">24</span>
             <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;
          <span class="ruby-keyword">else</span>
             <span class="ruby-ivar">@cs</span> = <span class="ruby-value">504</span>;
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span> <span class="ruby-comment"># )</span>
          <span class="ruby-comment"># fnext expr_endfn; ?</span>
        <span class="ruby-keyword">end</span>

                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">402</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2236 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tOP_ASGN</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">388</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2240 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tEH</span>, <span class="ruby-string">&#39;?&#39;</span>.<span class="ruby-identifier">freeze</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">385</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2248 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">387</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2261 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSEMI</span>, <span class="ruby-string">&#39;;&#39;</span>.<span class="ruby-identifier">freeze</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">464</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2264 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:bare_backslash</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">383</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2270 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:unexpected</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span>.<span class="ruby-identifier">inspect</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>] }
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">382</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">474</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2021 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">326</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">472</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2025 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kCLASS</span>, <span class="ruby-string">&#39;class&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">5</span>)
           <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLSHFT</span>, <span class="ruby-string">&#39;&lt;&lt;&#39;</span>.<span class="ruby-identifier">freeze</span>,    <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@te</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">471</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2036 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">409</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2110 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:no_dot_digit_literal</span>
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">461</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2170 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCONSTANT</span>)
            <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);      <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">401</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2178 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@stack</span>[ <span class="ruby-ivar">@top</span>] =  <span class="ruby-ivar">@cs</span>
                 <span class="ruby-ivar">@top</span><span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">321</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">407</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2185 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">446</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">466</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1240 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">tok</span>)
       <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
       <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">396</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2212 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">408</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2248 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">394</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2255 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">400</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2270 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:unexpected</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span>.<span class="ruby-identifier">inspect</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>] }
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">81</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">77</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2110 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:no_dot_digit_literal</span>
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">80</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2142 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">75</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2270 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:unexpected</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span>.<span class="ruby-identifier">inspect</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>] }
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">78</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">case</span>  <span class="ruby-ivar">@act</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">134</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@paren_nest</span>
          <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">pop</span>

          <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>
            <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLAMBEG</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
          <span class="ruby-keyword">else</span> <span class="ruby-comment"># &#39;do&#39;</span>
            <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kDO_LAMBDA</span>, <span class="ruby-string">&#39;do&#39;</span>.<span class="ruby-identifier">freeze</span>)
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>
            <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLCURLY</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
          <span class="ruby-keyword">else</span> <span class="ruby-comment"># &#39;do&#39;</span>
            <span class="ruby-identifier">emit_do</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">135</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">326</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">136</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kCLASS</span>, <span class="ruby-string">&#39;class&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">5</span>)
           <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLSHFT</span>, <span class="ruby-string">&#39;&lt;&lt;&#39;</span>.<span class="ruby-identifier">freeze</span>,    <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@te</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">137</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">138</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">139</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">512</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">140</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;not&#39;</span>.<span class="ruby-identifier">freeze</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">else</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">141</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)

          <span class="ruby-keyword">unless</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">tok</span>)
             <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:k__ENCODING__</span>, <span class="ruby-string">&#39;__ENCODING__&#39;</span>.<span class="ruby-identifier">freeze</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">142</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">143</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">145</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>,
                     <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>) },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">to_i</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">146</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>,
                     <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>) },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">to_f</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">147</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">149</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCONSTANT</span>)
            <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);      <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">153</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">tok</span>)
       <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
       <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">154</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tm</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@te</span>
          <span class="ruby-comment"># Suffix was consumed, e.g. foo!</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFID</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-comment"># Suffix was not consumed, e.g. foo!=</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">end</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span> 
                        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">87</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2282 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;     <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">479</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2285 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tNL</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@newline_s</span>, <span class="ruby-ivar">@newline_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-ivar">@cs</span> = <span class="ruby-value">182</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">480</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2285 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tNL</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@newline_s</span>, <span class="ruby-ivar">@newline_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-ivar">@cs</span> = <span class="ruby-value">182</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">84</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2285 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tNL</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@newline_s</span>, <span class="ruby-ivar">@newline_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-ivar">@cs</span> = <span class="ruby-value">182</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">483</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2295 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@eq_begin_s</span>, <span class="ruby-ivar">@te</span>)
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-ivar">@cs_before_block_comment</span>)
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">482</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2303 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:embedded_document</span>, <span class="ruby-keyword">nil</span>,
                   <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@eq_begin_s</span>, <span class="ruby-ivar">@eq_begin_s</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;=begin&#39;</span>.<span class="ruby-identifier">length</span>)
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">98</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2313 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-ivar">@eq_begin_s</span> = <span class="ruby-ivar">@ts</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">947</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">2</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2317 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">pe</span> <span class="ruby-operator">-</span> <span class="ruby-value">3</span>  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">90</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2320 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">91</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 513 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-comment"># Sit at EOF indefinitely. #advance would return $eof each time.</span>
    <span class="ruby-comment"># This allows to feed the lexer more data if needed; this is only used</span>
    <span class="ruby-comment"># in tests.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># Note that this action is not embedded into e_eof like e_heredoc_nl and e_bs</span>
    <span class="ruby-comment"># below. This is due to the fact that scanner state at EOF is observed</span>
    <span class="ruby-comment"># by tests, and encapsulating it in a rule would break the introspection.</span>
    <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">92</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2310 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">97</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2313 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-ivar">@eq_begin_s</span> = <span class="ruby-ivar">@ts</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">947</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">96</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2320 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">1</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2320 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">66</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">102</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">131</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">158</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">164</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">170</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">176</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">179</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">186</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">257</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1451 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-comment"># Unlike expr_beg as invoked in the next rule, do not warn</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">248</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1510 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;     <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">240</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1521 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">331</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1786 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">escape</span> = { <span class="ruby-string">&quot; &quot;</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\s&#39;</span>, <span class="ruby-string">&quot;\r&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\r&#39;</span>, <span class="ruby-string">&quot;\n&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\n&#39;</span>, <span class="ruby-string">&quot;\t&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\t&#39;</span>,
                   <span class="ruby-string">&quot;\v&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\v&#39;</span>, <span class="ruby-string">&quot;\f&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;\f&#39;</span> }[<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)]
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:warning</span>, <span class="ruby-value">:invalid_escape_use</span>, { <span class="ruby-value">:escape</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">escape</span> }, <span class="ruby-identifier">range</span>

        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">303</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1916 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@cs_before_block_comment</span> = <span class="ruby-ivar">@cs</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">182</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">484</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2295 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@eq_begin_s</span>, <span class="ruby-ivar">@te</span>)
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = (<span class="ruby-ivar">@cs_before_block_comment</span>)
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">481</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2300 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">99</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2313 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-ivar">@eq_begin_s</span> = <span class="ruby-ivar">@ts</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">947</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">3</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2317 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">pe</span> <span class="ruby-operator">-</span> <span class="ruby-value">3</span>  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">432</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 621 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tRATIONAL</span>,  <span class="ruby-constant">Rational</span>(<span class="ruby-identifier">chars</span>)) }              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">430</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 622 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIMAGINARY</span>, <span class="ruby-constant">Complex</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">chars</span>)) }            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">434</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 623 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIMAGINARY</span>, <span class="ruby-constant">Complex</span>(<span class="ruby-value">0</span>, <span class="ruby-constant">Rational</span>(<span class="ruby-identifier">chars</span>))) }          <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">431</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 624 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>); <span class="ruby-identifier">p</span> <span class="ruby-operator">-=</span> <span class="ruby-value">2</span> }          <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">433</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 625 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">6</span>); <span class="ruby-identifier">p</span> <span class="ruby-operator">-=</span> <span class="ruby-value">6</span> }          <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">422</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 629 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIMAGINARY</span>, <span class="ruby-constant">Complex</span>(<span class="ruby-value">0</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">chars</span>))) }             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2142 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">423</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 630 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>,     <span class="ruby-constant">Float</span>(<span class="ruby-identifier">chars</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>); <span class="ruby-identifier">p</span> <span class="ruby-operator">-=</span> <span class="ruby-value">2</span> }           <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2142 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">424</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 634 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tRATIONAL</span>,  <span class="ruby-constant">Rational</span>(<span class="ruby-identifier">chars</span>)) }              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2142 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">426</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 635 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIMAGINARY</span>, <span class="ruby-constant">Complex</span>(<span class="ruby-value">0</span>, <span class="ruby-constant">Rational</span>(<span class="ruby-identifier">chars</span>))) }          <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2142 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">425</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 636 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>,     <span class="ruby-constant">Float</span>(<span class="ruby-identifier">chars</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">6</span>); <span class="ruby-identifier">p</span> <span class="ruby-operator">-=</span> <span class="ruby-value">6</span> }           <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2142 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">125</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 651 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-string">&quot;&quot;</span>

    <span class="ruby-identifier">codepoints</span>  = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
    <span class="ruby-identifier">codepoint_s</span> = <span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">24</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot; &quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;\t&quot;</span>)
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>,
          <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">3</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">spaces_p</span> = <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[ \t]{2}/</span>)
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>,
          <span class="ruby-identifier">range</span>(<span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">spaces_p</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">spaces_p</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot; &quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;\t&quot;</span>)
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/([0-9a-fA-F]+)|([ \t]+)/</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">codepoint_str</span>, <span class="ruby-identifier">spaces</span>)<span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">spaces</span>
        <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">spaces</span>.<span class="ruby-identifier">length</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">codepoint</span> = <span class="ruby-identifier">codepoint_str</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0x110000</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:unicode_point_too_large</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">codepoint_s</span>, <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">codepoint_str</span>.<span class="ruby-identifier">length</span>)
          <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-ivar">@escape</span>     <span class="ruby-operator">+=</span> <span class="ruby-identifier">codepoint</span>.<span class="ruby-identifier">chr</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
        <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">codepoint_str</span>.<span class="ruby-identifier">length</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">152</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 651 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-string">&quot;&quot;</span>

    <span class="ruby-identifier">codepoints</span>  = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
    <span class="ruby-identifier">codepoint_s</span> = <span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">24</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot; &quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;\t&quot;</span>)
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>,
          <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">3</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">spaces_p</span> = <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[ \t]{2}/</span>)
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>,
          <span class="ruby-identifier">range</span>(<span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">spaces_p</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">spaces_p</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot; &quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;\t&quot;</span>)
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/([0-9a-fA-F]+)|([ \t]+)/</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">codepoint_str</span>, <span class="ruby-identifier">spaces</span>)<span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">spaces</span>
        <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">spaces</span>.<span class="ruby-identifier">length</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">codepoint</span> = <span class="ruby-identifier">codepoint_str</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0x110000</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:unicode_point_too_large</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">codepoint_s</span>, <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">codepoint_str</span>.<span class="ruby-identifier">length</span>)
          <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-ivar">@escape</span>     <span class="ruby-operator">+=</span> <span class="ruby-identifier">codepoint</span>.<span class="ruby-identifier">chr</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
        <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">codepoint_str</span>.<span class="ruby-identifier">length</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">352</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 651 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-string">&quot;&quot;</span>

    <span class="ruby-identifier">codepoints</span>  = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
    <span class="ruby-identifier">codepoint_s</span> = <span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">24</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot; &quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">start_with?</span>(<span class="ruby-string">&quot;\t&quot;</span>)
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>,
          <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">3</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">spaces_p</span> = <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[ \t]{2}/</span>)
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>,
          <span class="ruby-identifier">range</span>(<span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">spaces_p</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">spaces_p</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot; &quot;</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;\t&quot;</span>)
        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">codepoints</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp">/([0-9a-fA-F]+)|([ \t]+)/</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span>(<span class="ruby-identifier">codepoint_str</span>, <span class="ruby-identifier">spaces</span>)<span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">spaces</span>
        <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">spaces</span>.<span class="ruby-identifier">length</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">codepoint</span> = <span class="ruby-identifier">codepoint_str</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">codepoint</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0x110000</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:unicode_point_too_large</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">codepoint_s</span>, <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">codepoint_str</span>.<span class="ruby-identifier">length</span>)
          <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-ivar">@escape</span>     <span class="ruby-operator">+=</span> <span class="ruby-identifier">codepoint</span>.<span class="ruby-identifier">chr</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)
        <span class="ruby-identifier">codepoint_s</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">codepoint_str</span>.<span class="ruby-identifier">length</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">109</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">136</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">336</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">112</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 698 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_escape</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">139</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 698 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_escape</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">339</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 698 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_escape</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">114</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 717 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-string">&quot;\x7f&quot;</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">141</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 717 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-string">&quot;\x7f&quot;</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">341</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 717 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-string">&quot;\x7f&quot;</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">111</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 724 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span>, <span class="ruby-identifier">p</span>).<span class="ruby-identifier">to_i</span>(<span class="ruby-value">8</span>) <span class="ruby-operator">%</span> <span class="ruby-value">0x100</span>)             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">138</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 724 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span>, <span class="ruby-identifier">p</span>).<span class="ruby-identifier">to_i</span>(<span class="ruby-value">8</span>) <span class="ruby-operator">%</span> <span class="ruby-value">0x100</span>)             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">338</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 724 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span>, <span class="ruby-identifier">p</span>).<span class="ruby-identifier">to_i</span>(<span class="ruby-value">8</span>) <span class="ruby-operator">%</span> <span class="ruby-value">0x100</span>)             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">128</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 728 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>).<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>))                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">155</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 728 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>).<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>))                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">355</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 728 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>).<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>))                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">127</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 732 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_hex_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">154</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 732 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_hex_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">354</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 732 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_hex_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">122</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 738 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>).<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>).<span class="ruby-identifier">chr</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)          <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">149</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 738 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>).<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>).<span class="ruby-identifier">chr</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)          <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">349</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 738 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>).<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>).<span class="ruby-identifier">chr</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>)          <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">121</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 742 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">148</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 742 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">348</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 742 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">126</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 748 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">153</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 748 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">353</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 748 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">123</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 762 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:unterminated_unicode</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                        <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">150</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 762 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:unterminated_unicode</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                        <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">350</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 762 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:unterminated_unicode</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                        <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">110</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 788 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:escape_eof</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">137</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 788 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:escape_eof</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">337</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 788 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:escape_eof</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">161</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 794 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape_s</span> = <span class="ruby-identifier">p</span>
    <span class="ruby-ivar">@escape</span>   = <span class="ruby-keyword">nil</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">166</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 794 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape_s</span> = <span class="ruby-identifier">p</span>
    <span class="ruby-ivar">@escape</span>   = <span class="ruby-keyword">nil</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">57</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">30</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1465 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">32</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1481 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">34</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1509 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">201</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1340 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">220</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1358 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">228</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1390 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">33</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1521 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">259</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1526 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">251</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1532 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">270</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1608 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">282</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1629 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">278</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1632 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">58</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1650 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tUNARY_NUM</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">49</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1897 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>, <span class="ruby-identifier">ident_tok</span>, <span class="ruby-identifier">ident_ts</span>, <span class="ruby-identifier">ident_te</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">ident_te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>

        <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">ident_tok</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">25</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;
        <span class="ruby-keyword">else</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">498</span>;
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">300</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1913 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">371</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1940 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">367</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1943 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@in_kwarg</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;      <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">182</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
     <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">380</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1971 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">377</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1974 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">182</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">465</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2255 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">395</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2258 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">944</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">93</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2310 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">250</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1005 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">start_interp_brace</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1434 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@paren_nest</span>
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLCURLY</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">272</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1005 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">start_interp_brace</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1594 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@paren_nest</span>
          <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">pop</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLAMBEG</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLBRACE_ARG</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
        <span class="ruby-keyword">end</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">363</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1005 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">start_interp_brace</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1813 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@paren_nest</span>
          <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">pop</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLAMBEG</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLBRACE</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">477</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1005 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">start_interp_brace</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1996 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@paren_nest</span>
          <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">pop</span>

          <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>
            <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLAMBEG</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
          <span class="ruby-keyword">else</span> <span class="ruby-comment"># &#39;do&#39;</span>
            <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kDO_LAMBDA</span>, <span class="ruby-string">&#39;do&#39;</span>.<span class="ruby-identifier">freeze</span>)
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>
            <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLCURLY</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
          <span class="ruby-keyword">else</span> <span class="ruby-comment"># &#39;do&#39;</span>
            <span class="ruby-identifier">emit_do</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">478</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1014 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">end_interp_brace_and_try_closing</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tRCURLY</span>, <span class="ruby-string">&#39;}&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSTRING_DEND</span>, <span class="ruby-string">&#39;}&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">saved_herebody_s</span>
          <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">saved_herebody_s</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">stack_pop</span>);
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2216 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
        <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">lexpop</span>; <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">pop</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;}&#39;</span>.<span class="ruby-identifier">freeze</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">504</span>;
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;]&#39;</span>
          <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">24</span>
             <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;
          <span class="ruby-keyword">else</span>
             <span class="ruby-ivar">@cs</span> = <span class="ruby-value">504</span>;
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span> <span class="ruby-comment"># )</span>
          <span class="ruby-comment"># fnext expr_endfn; ?</span>
        <span class="ruby-keyword">end</span>

                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">60</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">64</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">204</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1340 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">219</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1358 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">231</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1390 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">253</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1529 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">268</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1608 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">280</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1629 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">306</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1913 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">369</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1940 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">379</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1971 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">399</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2255 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">95</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2310 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">225</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1196 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1380 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFID</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
            <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>); <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">318</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1196 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1751 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">291</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1196 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1886 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">392</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1196 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">case</span>  <span class="ruby-ivar">@act</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">134</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">last</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@paren_nest</span>
          <span class="ruby-ivar">@lambda_stack</span>.<span class="ruby-identifier">pop</span>

          <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>
            <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLAMBEG</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
          <span class="ruby-keyword">else</span> <span class="ruby-comment"># &#39;do&#39;</span>
            <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kDO_LAMBDA</span>, <span class="ruby-string">&#39;do&#39;</span>.<span class="ruby-identifier">freeze</span>)
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>
            <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLCURLY</span>, <span class="ruby-string">&#39;{&#39;</span>.<span class="ruby-identifier">freeze</span>)
          <span class="ruby-keyword">else</span> <span class="ruby-comment"># &#39;do&#39;</span>
            <span class="ruby-identifier">emit_do</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">135</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">326</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">136</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kCLASS</span>, <span class="ruby-string">&#39;class&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">5</span>)
           <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLSHFT</span>, <span class="ruby-string">&#39;&lt;&lt;&#39;</span>.<span class="ruby-identifier">freeze</span>,    <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@te</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">137</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">138</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">139</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">512</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">140</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;not&#39;</span>.<span class="ruby-identifier">freeze</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">else</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">141</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)

          <span class="ruby-keyword">unless</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">tok</span>)
             <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:k__ENCODING__</span>, <span class="ruby-string">&#39;__ENCODING__&#39;</span>.<span class="ruby-identifier">freeze</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">142</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS</span>)
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">143</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">145</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>,
                     <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>) },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">to_i</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">146</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>,
                     <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>) },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">to_f</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;    <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">147</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">149</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCONSTANT</span>)
            <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);      <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">153</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">tok</span>)
       <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
       <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">154</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tm</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@te</span>
          <span class="ruby-comment"># Suffix was consumed, e.g. foo!</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFID</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-comment"># Suffix was not consumed, e.g. foo!=</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">end</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span> 
                        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">226</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1197 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1380 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFID</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
            <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>); <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">319</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1197 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1751 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">293</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1197 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1886 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">393</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1197 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2192 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tm</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@te</span>
          <span class="ruby-comment"># Suffix was consumed, e.g. foo!</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFID</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-comment"># Suffix was not consumed, e.g. foo!=</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">end</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">467</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">320</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1202 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1751 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">294</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1202 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1886 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">321</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1203 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1751 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">295</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1203 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1886 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">325</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1204 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1751 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">298</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1204 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1886 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">324</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1205 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1751 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">297</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1205 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
        <span class="ruby-keyword">case</span>  <span class="ruby-ivar">@act</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">94</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tUNARY_NUM</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">112</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION_BEGIN</span>)
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">113</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kRESCUE</span>, <span class="ruby-string">&#39;rescue&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">512</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">114</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">KEYWORDS_BEGIN</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">116</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">117</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>

    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tIDENTIFIER</span>)

    <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@static_env</span>.<span class="ruby-identifier">declared?</span>(<span class="ruby-identifier">tok</span>)
       <span class="ruby-ivar">@cs</span> = <span class="ruby-value">439</span>;       <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">else</span>
       <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">arg_or_cmdarg</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">121</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">begin</span> <span class="ruby-keyword">begin</span> <span class="ruby-identifier">p</span> = (( <span class="ruby-ivar">@te</span>))<span class="ruby-operator">-</span><span class="ruby-value">1</span>; <span class="ruby-keyword">end</span>
 <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;   <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
 <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span> 
                        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">322</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1206 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">3</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1751 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">296</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1206 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">3</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1886 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">323</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1211 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1751 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tSYMBOL</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">460</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1216 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2174 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCONSTANT</span>, <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">249</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1222 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1428 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLBRACK</span>, <span class="ruby-string">&#39;[&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">356</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1222 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1825 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLBRACK</span>, <span class="ruby-string">&#39;[&#39;</span>.<span class="ruby-identifier">freeze</span>)
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">463</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1222 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2244 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLBRACK2</span>, <span class="ruby-string">&#39;[&#39;</span>.<span class="ruby-identifier">freeze</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">241</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1229 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)

    <span class="ruby-ivar">@paren_nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1409 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLPAREN2</span>, <span class="ruby-string">&#39;(&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLPAREN_ARG</span>, <span class="ruby-string">&#39;(&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">254</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1229 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)

    <span class="ruby-ivar">@paren_nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1422 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLPAREN2</span>, <span class="ruby-string">&#39;(&#39;</span>.<span class="ruby-identifier">freeze</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">262</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1229 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)

    <span class="ruby-ivar">@paren_nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1548 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLPAREN_ARG</span>, <span class="ruby-string">&#39;(&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">759</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">else</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">311</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1229 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)

    <span class="ruby-ivar">@paren_nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1830 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLPAREN</span>, <span class="ruby-string">&#39;(&#39;</span>.<span class="ruby-identifier">freeze</span>)
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">404</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1229 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>); <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">push</span>(<span class="ruby-keyword">false</span>)

    <span class="ruby-ivar">@paren_nest</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2212 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">405</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1235 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@paren_nest</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2216 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">emit_table</span>(<span class="ruby-constant">PUNCTUATION</span>)
        <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">lexpop</span>; <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">pop</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;}&#39;</span>.<span class="ruby-identifier">freeze</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">504</span>;
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">tok</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;]&#39;</span>
          <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">24</span>
             <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;
          <span class="ruby-keyword">else</span>
             <span class="ruby-ivar">@cs</span> = <span class="ruby-value">504</span>;
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span> <span class="ruby-comment"># )</span>
          <span class="ruby-comment"># fnext expr_endfn; ?</span>
        <span class="ruby-keyword">end</span>

                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">70</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1699 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">heredoc_e</span>      = <span class="ruby-identifier">p</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">327</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1700 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">new_herebody_s</span> = <span class="ruby-identifier">p</span>             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1701 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">heredoc_e</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^&lt;&lt;(-?)(~?)([&quot;&#39;`]?)(.*)\3$/m</span>

        <span class="ruby-identifier">indent</span>      = <span class="ruby-operator">!</span><span class="ruby-node">$1</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">||</span> <span class="ruby-operator">!</span><span class="ruby-node">$2</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">dedent_body</span> = <span class="ruby-operator">!</span><span class="ruby-node">$2</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">type</span>        =  <span class="ruby-node">$3</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-string">&#39;&lt;&lt;&quot;&#39;</span>.<span class="ruby-identifier">freeze</span> <span class="ruby-operator">:</span> (<span class="ruby-string">&#39;&lt;&lt;&#39;</span>.<span class="ruby-identifier">freeze</span> <span class="ruby-operator">+</span> <span class="ruby-node">$3</span>)
        <span class="ruby-identifier">delimiter</span>   =  <span class="ruby-node">$4</span>

        <span class="ruby-keyword">if</span> <span class="ruby-ivar">@version</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">24</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">delimiter</span>.<span class="ruby-identifier">count</span>(<span class="ruby-string">&quot;\n&quot;</span>) <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
            <span class="ruby-keyword">if</span> <span class="ruby-identifier">delimiter</span>.<span class="ruby-identifier">end_with?</span>(<span class="ruby-string">&quot;\n&quot;</span>)
              <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:warning</span>, <span class="ruby-value">:heredoc_id_ends_with_nl</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
              <span class="ruby-identifier">delimiter</span> = <span class="ruby-identifier">delimiter</span>.<span class="ruby-identifier">rstrip</span>
            <span class="ruby-keyword">else</span>
              <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:heredoc_id_has_newline</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
            <span class="ruby-keyword">end</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">dedent_body</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>, <span class="ruby-value">21</span>, <span class="ruby-value">22</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tLSHFT</span>, <span class="ruby-string">&#39;&lt;&lt;&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
           <span class="ruby-ivar">@cs</span> = <span class="ruby-value">536</span>;   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">else</span>
           <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">push_literal</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">delimiter</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">heredoc_e</span>, <span class="ruby-identifier">indent</span>, <span class="ruby-identifier">dedent_body</span>));

          <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">new_herebody_s</span>
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">end</span>
       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">332</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1771 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-keyword">nil</span>          <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">359</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1840 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1841 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kRESCUE</span>, <span class="ruby-string">&#39;rescue&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">tm</span>)
           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
            <span class="ruby-ivar">@cs</span> = <span class="ruby-value">512</span>;  <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">449</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2076 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">16</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">441</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2077 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">445</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2078 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">437</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2079 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">2</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">456</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2080 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">414</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2081 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">458</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">86</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2281 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2282 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span>  <span class="ruby-identifier">p</span> = <span class="ruby-identifier">tm</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;     <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">8</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">429</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">419</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2140 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">210</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1299 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">39</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">197</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1303 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">40</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">193</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1307 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">41</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">26</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1469 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">67</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">243</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1482 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">68</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">27</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1521 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">73</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">236</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1526 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">74</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">263</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1558 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">80</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">45</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1571 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">81</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">284</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1623 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">88</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">273</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1627 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">89</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">287</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1835 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">112</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">358</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1841 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">113</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">357</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1847 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">114</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">72</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1886 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">116</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">285</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1240 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">117</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">288</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1932 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">121</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">473</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1996 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">134</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">468</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2021 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">135</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">476</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2031 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">137</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">469</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2036 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">138</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">470</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2040 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">139</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">475</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2044 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">140</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">467</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2055 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">141</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">462</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2069 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">142</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">386</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">143</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">417</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2127 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">146</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">79</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2142 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">147</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">389</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2170 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">149</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">381</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1240 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">153</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">391</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2192 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">154</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">167</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 905 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
 <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@te</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span>
      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:string_eof</span>, <span class="ruby-keyword">nil</span>,
                 <span class="ruby-identifier">range</span>(<span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span>, <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">str_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc?</span>
      <span class="ruby-identifier">line</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r+$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
        <span class="ruby-comment"># See ruby:c48b4209c</span>
        <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/\r.*$/</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>)
      <span class="ruby-keyword">end</span>

      <span class="ruby-comment"># Try ending the heredoc with the complete most recently</span>
      <span class="ruby-comment"># scanned line. @herebody_s always refers to the start of such line.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">line</span>, <span class="ruby-ivar">@herebody_s</span>, <span class="ruby-ivar">@ts</span>)
        <span class="ruby-comment"># Adjust @herebody_s to point to the next line.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>

        <span class="ruby-comment"># Continue regular lexing after the heredoc reference (&lt;&lt;END).</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">heredoc_e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Calculate indentation level for &lt;&lt;~HEREDOCs.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">infer_indent_level</span>(<span class="ruby-identifier">line</span>)

        <span class="ruby-comment"># Ditto.</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-ivar">@te</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># Try ending the literal with a newline.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">nest_and_try_closing</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
         <span class="ruby-ivar">@cs</span> = (<span class="ruby-identifier">pop_literal</span>);   <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">end</span>

      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
        <span class="ruby-comment"># This is a regular literal intertwined with a heredoc. Like:</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment">#     p &lt;&lt;-foo+&quot;1</span>
        <span class="ruby-comment">#     bar</span>
        <span class="ruby-comment">#     foo</span>
        <span class="ruby-comment">#     2&quot;</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># which, incidentally, evaluates to &quot;bar\n1\n2&quot;.</span>
        <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span>])
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_space</span> <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># A literal newline is appended if the heredoc was _not_ closed</span>
      <span class="ruby-comment"># this time (see fbreak above). See also Literal#nest_and_try_closing</span>
      <span class="ruby-comment"># for rationale of calling #flush_string here.</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>
      <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">flush_string</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 794 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape_s</span> = <span class="ruby-identifier">p</span>
    <span class="ruby-ivar">@escape</span>   = <span class="ruby-keyword">nil</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">115</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">142</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">342</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">120</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">147</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">347</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">119</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 712 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">146</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 712 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">346</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 712 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">117</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 717 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-string">&quot;\x7f&quot;</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">144</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 717 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-string">&quot;\x7f&quot;</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">344</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 717 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-string">&quot;\x7f&quot;</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">113</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 718 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">140</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 718 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">340</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 718 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">124</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 748 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 762 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:unterminated_unicode</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                        <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">151</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 748 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 762 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:unterminated_unicode</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                        <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">351</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 748 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

        <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:invalid_unicode_escape</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@escape_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 762 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:unterminated_unicode</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                        <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">107</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 794 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape_s</span> = <span class="ruby-identifier">p</span>
    <span class="ruby-ivar">@escape</span>   = <span class="ruby-keyword">nil</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 788 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:escape_eof</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">135</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 794 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape_s</span> = <span class="ruby-identifier">p</span>
    <span class="ruby-ivar">@escape</span>   = <span class="ruby-keyword">nil</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 788 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:escape_eof</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">335</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 794 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape_s</span> = <span class="ruby-identifier">p</span>
    <span class="ruby-ivar">@escape</span>   = <span class="ruby-keyword">nil</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 788 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

      <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:fatal</span>, <span class="ruby-value">:escape_eof</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">61</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">203</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1340 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">218</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1358 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">230</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1390 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">252</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1529 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span>        <span class="ruby-keyword">begin</span>
                 <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_again</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">267</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1608 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">279</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1629 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">305</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1913 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">368</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1940 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">378</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1971 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">398</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2255 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">94</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2310 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">452</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2080 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">411</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2081 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">427</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">420</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2139 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 628 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>,     <span class="ruby-constant">Float</span>(<span class="ruby-identifier">chars</span>)) }                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2142 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">416</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2140 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 628 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>,     <span class="ruby-constant">Float</span>(<span class="ruby-identifier">chars</span>)) }                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2142 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tFLOAT</span>, <span class="ruby-constant">Float</span>(<span class="ruby-identifier">digits</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>)
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">258</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 487 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># Record position of a newline for precise location reporting on tNL</span>
    <span class="ruby-comment"># tokens.</span>
    <span class="ruby-comment">#</span>
    <span class="ruby-comment"># This action is embedded directly into c_nl, as it is idempotent and</span>
    <span class="ruby-comment"># there are no cases when we need to skip it.</span>
    <span class="ruby-ivar">@newline_s</span> = <span class="ruby-identifier">p</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1526 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">74</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">35</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1521 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">73</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">46</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1571 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">81</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">65</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1650 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">94</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">82</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2025 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">136</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">37</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1481 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1482 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">68</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">361</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1840 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1886 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">116</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">360</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1840 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1240 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">117</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">450</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2076 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">16</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">442</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2077 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">446</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2078 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">438</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2079 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">2</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">457</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2080 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">453</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2080 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">143</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">415</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2081 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">118</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">145</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">345</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 691 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-identifier">codepoint</span> = <span class="ruby-ivar">@source_pts</span>[<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>]
    <span class="ruby-keyword">if</span> (<span class="ruby-ivar">@escape</span> = <span class="ruby-constant">ESCAPES</span>[<span class="ruby-identifier">codepoint</span>]).<span class="ruby-identifier">nil?</span>
      <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>))
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">116</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 718 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">143</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 718 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 867 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
    <span class="ruby-identifier">current_literal</span> = <span class="ruby-identifier">literal</span>
    <span class="ruby-comment"># Get the first character after the backslash.</span>
    <span class="ruby-identifier">escaped_char</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-ivar">@escape_s</span>).<span class="ruby-identifier">chr</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">munge_escape?</span> <span class="ruby-identifier">escaped_char</span>
      <span class="ruby-comment"># If this particular literal uses this character as an opening</span>
      <span class="ruby-comment"># or closing delimiter, it is an escape sequence for that</span>
      <span class="ruby-comment"># particular character. Write it without the backslash.</span>

      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">REGEXP_META_CHARACTERS</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">escaped_char</span>)
        <span class="ruby-comment"># Regular expressions should include escaped delimiters in their</span>
        <span class="ruby-comment"># escaped form, except when the escaped character is</span>
        <span class="ruby-comment"># a closing delimiter but not a regexp metacharacter.</span>
        <span class="ruby-comment">#</span>
        <span class="ruby-comment"># The backslash itself cannot be used as a closing delimiter</span>
        <span class="ruby-comment"># at the same time as an escape symbol, but it is always munged,</span>
        <span class="ruby-comment"># so this branch also executes for the non-closing-delimiter case</span>
        <span class="ruby-comment"># for the backslash.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">escaped_char</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment"># It does not. So this is an actual escape sequence, yay!</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">regexp?</span>
        <span class="ruby-comment"># Regular expressions should include escape sequences in their</span>
        <span class="ruby-comment"># escaped form. On the other hand, escaped newlines are removed.</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-identifier">tok</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;\\\n&quot;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-string">&#39;&#39;</span>.<span class="ruby-identifier">freeze</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">current_literal</span>.<span class="ruby-identifier">extend_string</span>(<span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>, <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@te</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
   <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">343</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 718 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@escape</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">chr</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 702 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0x9f</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 706 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-ivar">@escape</span> = <span class="ruby-identifier">encode_escape</span>(<span class="ruby-ivar">@escape</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span> <span class="ruby-operator">|</span> <span class="ruby-value">0x80</span>)
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1773 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">value</span> = <span class="ruby-ivar">@escape</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@ts</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">value</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">BINARY</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">ord</span>)
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tCHARACTER</span>, <span class="ruby-identifier">value</span>)
        <span class="ruby-keyword">end</span>

         <span class="ruby-ivar">@cs</span> = <span class="ruby-value">767</span>;     <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">447</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2076 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">16</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">439</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2077 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">443</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2078 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">435</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2079 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">2</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">451</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2080 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">410</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 2081 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2083 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span>
<span class="ruby-identifier">p</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>; <span class="ruby-keyword">begin</span> 
        <span class="ruby-identifier">digits</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-ivar">@num_digits_s</span>, <span class="ruby-ivar">@num_suffix_s</span>)

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">end_with?</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:trailing_in_number</span>, { <span class="ruby-value">:character</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;_&#39;</span>.<span class="ruby-identifier">freeze</span> },
                     <span class="ruby-identifier">range</span>(<span class="ruby-ivar">@te</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@te</span>)
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>)
          <span class="ruby-comment"># 1.8 did not raise an error on 0o.</span>
          <span class="ruby-identifier">digits</span> = <span class="ruby-string">&#39;0&#39;</span>.<span class="ruby-identifier">freeze</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:empty_numeric</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@num_base</span> <span class="ruby-operator">==</span> <span class="ruby-value">8</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-identifier">invalid_idx</span> = <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">index</span>(<span class="ruby-regexp">/[89]/</span>))
          <span class="ruby-identifier">invalid_s</span> = <span class="ruby-ivar">@num_digits_s</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">invalid_idx</span>
          <span class="ruby-identifier">diagnostic</span> <span class="ruby-value">:error</span>, <span class="ruby-value">:invalid_octal</span>, <span class="ruby-keyword">nil</span>,
                     <span class="ruby-identifier">range</span>(<span class="ruby-identifier">invalid_s</span>, <span class="ruby-identifier">invalid_s</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span> <span class="ruby-identifier">version?</span>(<span class="ruby-value">18</span>, <span class="ruby-value">19</span>, <span class="ruby-value">20</span>)
          <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>, <span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>), <span class="ruby-ivar">@ts</span>, <span class="ruby-ivar">@num_suffix_s</span>)
          <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@num_suffix_s</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@num_xfrm</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">digits</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-ivar">@num_base</span>))
        <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">begin</span>
                <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>

       <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">31</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 834 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>

    <span class="ruby-comment"># After every heredoc was parsed, @herebody_s contains the</span>
    <span class="ruby-comment"># position of next token after all heredocs.</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-identifier">p</span> = <span class="ruby-ivar">@herebody_s</span>
      <span class="ruby-ivar">@herebody_s</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1481 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">tm</span> = <span class="ruby-identifier">p</span>                 <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1482 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">68</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">62</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1152 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@sharp_s</span> = <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>               <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1155 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-identifier">emit_comment</span>(<span class="ruby-ivar">@sharp_s</span>, <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pe</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">2</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">p</span>)            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 1650 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">94</span>;             <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">459</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2115 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">145</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">454</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2080 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">10</span>; <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2115 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">145</span>;            <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">when</span> <span class="ruby-value">413</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@te</span> = <span class="ruby-identifier">p</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>
                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2081 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_base</span> = <span class="ruby-value">8</span>;  <span class="ruby-ivar">@num_digits_s</span> = <span class="ruby-ivar">@ts</span>            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2082 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_suffix_s</span> = <span class="ruby-identifier">p</span>              <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 620 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@num_xfrm</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">chars</span><span class="ruby-operator">|</span> <span class="ruby-identifier">emit</span>(<span class="ruby-value">:tINTEGER</span>,   <span class="ruby-identifier">chars</span>) }                <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 2115 &quot;lib/parser/lexer.rl&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@act</span> = <span class="ruby-value">145</span>;            <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 21953 &quot;lib/parser/lexer.rb&quot;</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">_goto_level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">_again</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">_lex_to_state_actions</span>[ <span class="ruby-ivar">@cs</span>] 
        <span class="ruby-keyword">when</span> <span class="ruby-value">88</span> <span class="ruby-keyword">then</span>
<span class="ruby-comment"># line 1 &quot;NONE&quot;</span>
                <span class="ruby-keyword">begin</span>
 <span class="ruby-ivar">@ts</span> = <span class="ruby-keyword">nil</span>;             <span class="ruby-keyword">end</span>
<span class="ruby-comment"># line 21963 &quot;lib/parser/lexer.rb&quot;</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">if</span>  <span class="ruby-ivar">@cs</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">pe</span>
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_resume</span>
                <span class="ruby-keyword">next</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">_goto_level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">_test_eof</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">eof</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">_lex_eof_trans</span>[ <span class="ruby-ivar">@cs</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
                <span class="ruby-identifier">_trans</span> = <span class="ruby-identifier">_lex_eof_trans</span>[ <span class="ruby-ivar">@cs</span>] <span class="ruby-operator">-</span> <span class="ruby-value">1</span>;
                <span class="ruby-identifier">_goto_level</span> = <span class="ruby-identifier">_eof_trans</span>
                <span class="ruby-keyword">next</span>;
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">_goto_level</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">_out</span>
                <span class="ruby-keyword">break</span>
        <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>

<span class="ruby-comment"># line 283 &quot;lib/parser/lexer.rl&quot;</span>
    <span class="ruby-comment"># %</span>

    <span class="ruby-ivar">@p</span> = <span class="ruby-identifier">p</span>

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@token_queue</span>.<span class="ruby-identifier">any?</span>
      <span class="ruby-ivar">@token_queue</span>.<span class="ruby-identifier">shift</span>
    <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@cs</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">lex_error</span>
      [ <span class="ruby-keyword">false</span>, [ <span class="ruby-string">&#39;$error&#39;</span>.<span class="ruby-identifier">freeze</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">p</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p</span>) ] ]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">eof</span> = <span class="ruby-ivar">@source_pts</span>.<span class="ruby-identifier">size</span>
      [ <span class="ruby-keyword">false</span>, [ <span class="ruby-string">&#39;$eof&#39;</span>.<span class="ruby-identifier">freeze</span>,   <span class="ruby-identifier">range</span>(<span class="ruby-identifier">eof</span>, <span class="ruby-identifier">eof</span>) ] ]
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-dedent_level" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">dedent_level</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="dedent_level-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10801</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">dedent_level</span>
  <span class="ruby-comment"># We erase @dedent_level as a precaution to avoid accidentally</span>
  <span class="ruby-comment"># using a stale value.</span>
  <span class="ruby-identifier">dedent_level</span>, <span class="ruby-ivar">@dedent_level</span> = <span class="ruby-ivar">@dedent_level</span>, <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">dedent_level</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-encoding" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">encoding</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="encoding-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10751</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">encoding</span>
  <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">encoding</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-pop_cmdarg" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pop_cmdarg</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="pop_cmdarg-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10788</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pop_cmdarg</span>
  <span class="ruby-ivar">@cmdarg</span> = <span class="ruby-ivar">@cmdarg_stack</span>.<span class="ruby-identifier">pop</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-pop_cond" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pop_cond</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="pop_cond-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10797</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pop_cond</span>
  <span class="ruby-ivar">@cond</span> = <span class="ruby-ivar">@cond_stack</span>.<span class="ruby-identifier">pop</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-push_cmdarg" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">push_cmdarg</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="push_cmdarg-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10783</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">push_cmdarg</span>
  <span class="ruby-ivar">@cmdarg_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@cmdarg</span>)
  <span class="ruby-ivar">@cmdarg</span> = <span class="ruby-constant">StackState</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cmdarg.#{@cmdarg_stack.count}&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-push_cond" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">push_cond</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="push_cond-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10792</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">push_cond</span>
  <span class="ruby-ivar">@cond_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-ivar">@cond</span>)
  <span class="ruby-ivar">@cond</span> = <span class="ruby-constant">StackState</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cond.#{@cond_stack.count}&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-reset" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">reset</span><span
            class="method-args">(reset_state=true)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="reset-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10662</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">reset</span>(<span class="ruby-identifier">reset_state</span>=<span class="ruby-keyword">true</span>)
  <span class="ruby-comment"># Ragel state:</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">reset_state</span>
    <span class="ruby-comment"># Unit tests set state prior to resetting lexer.</span>
    <span class="ruby-ivar">@cs</span>     = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_line_begin</span>

    <span class="ruby-ivar">@cond</span>   = <span class="ruby-constant">StackState</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;cond&#39;</span>)
    <span class="ruby-ivar">@cmdarg</span> = <span class="ruby-constant">StackState</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;cmdarg&#39;</span>)
    <span class="ruby-ivar">@cond_stack</span>   = []
    <span class="ruby-ivar">@cmdarg_stack</span> = []
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@force_utf32</span>   = <span class="ruby-keyword">false</span> <span class="ruby-comment"># Set to true by some tests</span>

  <span class="ruby-ivar">@source_pts</span>    = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># @source as a codepoint array</span>

  <span class="ruby-ivar">@p</span>             = <span class="ruby-value">0</span>   <span class="ruby-comment"># stream position (saved manually in #advance)</span>
  <span class="ruby-ivar">@ts</span>            = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># token start</span>
  <span class="ruby-ivar">@te</span>            = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># token end</span>
  <span class="ruby-ivar">@act</span>           = <span class="ruby-value">0</span>   <span class="ruby-comment"># next action</span>

  <span class="ruby-ivar">@stack</span>         = []  <span class="ruby-comment"># state stack</span>
  <span class="ruby-ivar">@top</span>           = <span class="ruby-value">0</span>   <span class="ruby-comment"># state stack top pointer</span>

  <span class="ruby-comment"># Lexer state:</span>
  <span class="ruby-ivar">@token_queue</span>   = []
  <span class="ruby-ivar">@literal_stack</span> = []

  <span class="ruby-ivar">@eq_begin_s</span>    = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># location of last encountered =begin</span>
  <span class="ruby-ivar">@sharp_s</span>       = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># location of last encountered #</span>

  <span class="ruby-ivar">@newline_s</span>     = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># location of last encountered newline</span>

  <span class="ruby-ivar">@num_base</span>      = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># last numeric base</span>
  <span class="ruby-ivar">@num_digits_s</span>  = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># starting position of numeric digits</span>
  <span class="ruby-ivar">@num_suffix_s</span>  = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># starting position of numeric suffix</span>
  <span class="ruby-ivar">@num_xfrm</span>      = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># numeric suffix-induced transformation</span>

  <span class="ruby-ivar">@escape_s</span>      = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># starting position of current sequence</span>
  <span class="ruby-ivar">@escape</span>        = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># last escaped sequence, as string</span>

  <span class="ruby-ivar">@herebody_s</span>    = <span class="ruby-keyword">nil</span> <span class="ruby-comment"># starting position of current heredoc line</span>

  <span class="ruby-comment"># Ruby 1.9 -&gt;() lambdas emit a distinct token if do/{ is</span>
  <span class="ruby-comment"># encountered after a matching closing parenthesis.</span>
  <span class="ruby-ivar">@paren_nest</span>    = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@lambda_stack</span>  = []

  <span class="ruby-comment"># After encountering the closing line of &lt;&lt;~SQUIGGLY_HEREDOC,</span>
  <span class="ruby-comment"># we store the indentation level and give it out to the parser</span>
  <span class="ruby-comment"># on request. It is not possible to infer indentation level just</span>
  <span class="ruby-comment"># from the AST because escape sequences such as `\ ` or `\t` are</span>
  <span class="ruby-comment"># expanded inside the lexer, but count as non-whitespace for</span>
  <span class="ruby-comment"># indentation purposes.</span>
  <span class="ruby-ivar">@dedent_level</span>  = <span class="ruby-keyword">nil</span>

  <span class="ruby-comment"># If the lexer is in `command state&#39; (aka expr_value)</span>
  <span class="ruby-comment"># at the entry to #advance, it will transition to expr_cmdarg</span>
  <span class="ruby-comment"># instead of expr_arg at certain points.</span>
  <span class="ruby-ivar">@command_state</span> = <span class="ruby-keyword">false</span>

  <span class="ruby-comment"># True at the end of &quot;def foo a:&quot;</span>
  <span class="ruby-ivar">@in_kwarg</span>      = <span class="ruby-keyword">false</span>

  <span class="ruby-comment"># State before =begin / =end block comment</span>
  <span class="ruby-ivar">@cs_before_block_comment</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_line_begin</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-source_buffer-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">source_buffer=</span><span
            class="method-args">(source_buffer)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="source_buffer-3D-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10730</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">source_buffer=</span>(<span class="ruby-identifier">source_buffer</span>)
  <span class="ruby-ivar">@source_buffer</span> = <span class="ruby-identifier">source_buffer</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@source_buffer</span>
    <span class="ruby-identifier">source</span> = <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">source</span>

    <span class="ruby-keyword">if</span> <span class="ruby-identifier">source</span>.<span class="ruby-identifier">encoding</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>
      <span class="ruby-ivar">@source_pts</span> = <span class="ruby-identifier">source</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&#39;U*&#39;</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@source_pts</span> = <span class="ruby-identifier">source</span>.<span class="ruby-identifier">unpack</span>(<span class="ruby-string">&#39;C*&#39;</span>)
    <span class="ruby-keyword">end</span>

    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@source_pts</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">0xfeff</span>
      <span class="ruby-comment"># Skip byte order mark.</span>
      <span class="ruby-ivar">@p</span> = <span class="ruby-value">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-ivar">@source_pts</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-state" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">state</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="state-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10775</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">state</span>
  <span class="ruby-constant">LEX_STATES</span>.<span class="ruby-identifier">invert</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-ivar">@cs</span>, <span class="ruby-ivar">@cs</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-state-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">state=</span><span
            class="method-args">(state)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="state-3D-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 10779</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">state=</span>(<span class="ruby-identifier">state</span>)
  <span class="ruby-ivar">@cs</span> = <span class="ruby-constant">LEX_STATES</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">state</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-arg_or_cmdarg" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">arg_or_cmdarg</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="arg_or_cmdarg-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22059</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">arg_or_cmdarg</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@command_state</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_expr_cmdarg</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_expr_arg</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-diagnostic" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">diagnostic</span><span
            class="method-args">(type, reason, arguments=nil, location=range, highlights=[])</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="diagnostic-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22079</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">diagnostic</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">reason</span>, <span class="ruby-identifier">arguments</span>=<span class="ruby-keyword">nil</span>, <span class="ruby-identifier">location</span>=<span class="ruby-identifier">range</span>, <span class="ruby-identifier">highlights</span>=[])
  <span class="ruby-ivar">@diagnostics</span>.<span class="ruby-identifier">process</span>(
      <span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Diagnostic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">reason</span>, <span class="ruby-identifier">arguments</span>, <span class="ruby-identifier">location</span>, <span class="ruby-identifier">highlights</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-emit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">emit</span><span
            class="method-args">(type, value = tok, s = @ts, e = @te)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="emit-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22033</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">emit</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">value</span> = <span class="ruby-identifier">tok</span>, <span class="ruby-identifier">s</span> = <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">e</span> = <span class="ruby-ivar">@te</span>)
  <span class="ruby-identifier">token</span> = [ <span class="ruby-identifier">type</span>, [ <span class="ruby-identifier">value</span>, <span class="ruby-identifier">range</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">e</span>) ] ]

  <span class="ruby-ivar">@token_queue</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">token</span>)

  <span class="ruby-ivar">@tokens</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">token</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@tokens</span>

  <span class="ruby-identifier">token</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-emit_comment" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">emit_comment</span><span
            class="method-args">(s = @ts, e = @te)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="emit_comment-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22067</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">emit_comment</span>(<span class="ruby-identifier">s</span> = <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">e</span> = <span class="ruby-ivar">@te</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@comments</span>
    <span class="ruby-ivar">@comments</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Comment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">range</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">e</span>)))
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@tokens</span>
    <span class="ruby-ivar">@tokens</span>.<span class="ruby-identifier">push</span>([ <span class="ruby-value">:tCOMMENT</span>, [ <span class="ruby-identifier">tok</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">e</span>), <span class="ruby-identifier">range</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">e</span>) ] ])
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-emit_do" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">emit_do</span><span
            class="method-args">(do_block=false)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="emit_do-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22049</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">emit_do</span>(<span class="ruby-identifier">do_block</span>=<span class="ruby-keyword">false</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@cond</span>.<span class="ruby-identifier">active?</span>
    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kDO_COND</span>, <span class="ruby-string">&#39;do&#39;</span>.<span class="ruby-identifier">freeze</span>)
  <span class="ruby-keyword">elsif</span> <span class="ruby-ivar">@cmdarg</span>.<span class="ruby-identifier">active?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">do_block</span>
    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kDO_BLOCK</span>, <span class="ruby-string">&#39;do&#39;</span>.<span class="ruby-identifier">freeze</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">emit</span>(<span class="ruby-value">:kDO</span>, <span class="ruby-string">&#39;do&#39;</span>.<span class="ruby-identifier">freeze</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-emit_table" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">emit_table</span><span
            class="method-args">(table, s = @ts, e = @te)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="emit_table-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22043</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">emit_table</span>(<span class="ruby-identifier">table</span>, <span class="ruby-identifier">s</span> = <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">e</span> = <span class="ruby-ivar">@te</span>)
  <span class="ruby-identifier">value</span> = <span class="ruby-identifier">tok</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">e</span>)

  <span class="ruby-identifier">emit</span>(<span class="ruby-identifier">table</span>[<span class="ruby-identifier">value</span>], <span class="ruby-identifier">value</span>, <span class="ruby-identifier">s</span>, <span class="ruby-identifier">e</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-encode_escape" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">encode_escape</span><span
            class="method-args">(ord)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="encode_escape-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22021</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">encode_escape</span>(<span class="ruby-identifier">ord</span>)
  <span class="ruby-identifier">ord</span>.<span class="ruby-identifier">chr</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">source</span>.<span class="ruby-identifier">encoding</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-eof_codepoint-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">eof_codepoint?</span><span
            class="method-args">(point)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="eof_codepoint-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22008</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">eof_codepoint?</span>(<span class="ruby-identifier">point</span>)
  [<span class="ruby-value">0x04</span>, <span class="ruby-value">0x1a</span>, <span class="ruby-value">0x00</span>].<span class="ruby-identifier">include?</span> <span class="ruby-identifier">point</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-literal" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">literal</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="literal-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">literal</span>
  <span class="ruby-ivar">@literal_stack</span>.<span class="ruby-identifier">last</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-pop_literal" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">pop_literal</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="pop_literal-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22123</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">pop_literal</span>
  <span class="ruby-identifier">old_literal</span> = <span class="ruby-ivar">@literal_stack</span>.<span class="ruby-identifier">pop</span>

  <span class="ruby-ivar">@dedent_level</span> = <span class="ruby-identifier">old_literal</span>.<span class="ruby-identifier">dedent_level</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">old_literal</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-value">:tREGEXP_BEG</span>
    <span class="ruby-comment"># Fetch modifiers.</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_regexp_modifiers</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_expr_end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-push_literal" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">push_literal</span><span
            class="method-args">(*args)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <h3 id="method-i-push_literal-label-LITERAL+STACK+-3D-3D-3D">LITERAL STACK ===<span><a href="#method-i-push_literal-label-LITERAL+STACK+-3D-3D-3D">&para;</a> <a href="#top">&uarr;</a></span></h3>
          
          

          
          <div class="method-source-code" id="push_literal-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22088</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">push_literal</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-identifier">new_literal</span> = <span class="ruby-constant">Literal</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
  <span class="ruby-ivar">@literal_stack</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">new_literal</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">backslash_delimited?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">interpolate?</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_interp_backslash_delimited_words</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_plain_backslash_delimited_words</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">backslash_delimited?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">interpolate?</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_interp_words</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_plain_words</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">words?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">backslash_delimited?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">interpolate?</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_interp_backslash_delimited</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_plain_backslash_delimited</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">new_literal</span>.<span class="ruby-identifier">interpolate?</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_interp_string</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">lex_en_plain_string</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">range</span><span
            class="method-args">(s = @ts, e = @te)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="range-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22029</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">range</span>(<span class="ruby-identifier">s</span> = <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">e</span> = <span class="ruby-ivar">@te</span>)
  <span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">Source</span><span class="ruby-operator">::</span><span class="ruby-constant">Range</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@source_buffer</span>, <span class="ruby-identifier">s</span>, <span class="ruby-identifier">e</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-stack_pop" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stack_pop</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="stack_pop-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22016</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stack_pop</span>
  <span class="ruby-ivar">@top</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
  <span class="ruby-ivar">@stack</span>[<span class="ruby-ivar">@top</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-tok" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tok</span><span
            class="method-args">(s = @ts, e = @te)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="tok-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22025</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">tok</span>(<span class="ruby-identifier">s</span> = <span class="ruby-ivar">@ts</span>, <span class="ruby-identifier">e</span> = <span class="ruby-ivar">@te</span>)
  <span class="ruby-ivar">@source_buffer</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-identifier">s</span><span class="ruby-operator">...</span><span class="ruby-identifier">e</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-version-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">version?</span><span
            class="method-args">(*versions)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="version-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/parser-2.5.0.0/lib/parser/lexer.rb, line 22012</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">version?</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">versions</span>)
  <span class="ruby-identifier">versions</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-ivar">@version</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

