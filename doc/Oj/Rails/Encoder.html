<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Oj::Rails::Encoder - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../../Object.html">Object</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-deoptimize">#deoptimize</a>
    
    <li ><a href="#method-i-encode">#encode</a>
    
    <li ><a href="#method-i-optimize">#optimize</a>
    
    <li ><a href="#method-i-optimized-3F">#optimized?</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Oj::Rails::Encoder">
  <h1 id="class-Oj::Rails::Encoder" class="class">
    class Oj::Rails::Encoder
  </h1>

  <section class="description">
    
<p>The <a href="../../Oj.html">Oj</a> <a
href="../../ActiveSupport.html">ActiveSupport</a> compliant encoder.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            new(options=nil)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Creates a new <a href="Encoder.html">Encoder</a>.</p>
<ul><li>
<p><strong>options</strong> [<em>Hash</em>] formatting options</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre>static VALUE
encoder_new(int argc, VALUE *argv, VALUE self) {
    Encoder     e = ALLOC(struct _Encoder);

    e-&gt;opts = oj_default_options;
    e-&gt;arg = Qnil;
    copy_opts(&amp;ropts, &amp;e-&gt;ropts);
    
    if (1 &lt;= argc &amp;&amp; Qnil != *argv) {
        oj_parse_options(*argv, &amp;e-&gt;opts);
        e-&gt;arg = *argv;
    }
    return Data_Wrap_Struct(encoder_class, encoder_mark, encoder_free, e);
}</pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-deoptimize" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            deoptimize(*classes)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Turn off <a href="../../Oj.html">Oj</a> rails optimization on the specified
classes.</p>
<ul><li>
<p><strong>classes</strong> [<em>Class</em>] a list of classes to deoptimize</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="deoptimize-source">
            <pre>static VALUE
encoder_deoptimize(int argc, VALUE *argv, VALUE self) {
    Encoder     e = (Encoder)DATA_PTR(self);

    optimize(argc, argv, &amp;e-&gt;ropts, false);

    return Qnil;
}</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-encode" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            encode(obj)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <ul><li>
<p><strong>obj</strong> [<em>Object</em>] object to encode</p>
</li></ul>

<p>Returns encoded object as a <a href="../../JSON.html">JSON</a> string.</p>
          
          

          
          <div class="method-source-code" id="encode-source">
            <pre>static VALUE
encoder_encode(VALUE self, VALUE obj) {
    Encoder     e = (Encoder)DATA_PTR(self);

    if (Qnil != e-&gt;arg) {
        VALUE  argv[1] = { e-&gt;arg };
        
        return encode(obj, &amp;e-&gt;ropts, &amp;e-&gt;opts, 1, argv);
    }
    return encode(obj, &amp;e-&gt;ropts, &amp;e-&gt;opts, 0, NULL);
}</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-optimize" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            optimize(*classes)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Use <a href="../../Oj.html">Oj</a> rails optimized routines to encode the
specified classes. This ignores the as_json() method on the class and uses
an internal encoding instead. Passing in no classes indicates all should
use the optimized version of encoding for all previously optimized classes.
Passing in the <a href="../../Object.html">Object</a> class set a global
switch that will then use the optimized behavior for all classes.</p>
<ul><li>
<p><strong>classes</strong> [<em>Class</em>] a list of classes to optimize</p>
</li></ul>
          
          

          
          <div class="method-source-code" id="optimize-source">
            <pre>static VALUE
encoder_optimize(int argc, VALUE *argv, VALUE self) {
    Encoder     e = (Encoder)DATA_PTR(self);

    optimize(argc, argv, &amp;e-&gt;ropts, true);

    return Qnil;
}</pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-optimized-3F" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            optimized?(clas)
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns true if the specified <a href="../../Class.html">Class</a> is being
optimized.</p>
          
          

          
          <div class="method-source-code" id="optimized-3F-source">
            <pre>static VALUE
encoder_optimized(VALUE self, VALUE clas) {
    Encoder     e = (Encoder)DATA_PTR(self);
    ROpt        ro = oj_rails_get_opt(&amp;e-&gt;ropts, clas);

    if (NULL == ro) {
        return Qfalse;
    }
    return (ro-&gt;on) ? Qtrue : Qfalse;
}</pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

