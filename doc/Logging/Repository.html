<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Logging::Repository - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../Object.html">Object</a>
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="Repository/Singleton.html">Logging::Repository::Singleton</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-5B-5D">#[]</a>
    
    <li ><a href="#method-i-5B-5D-3D">#[]=</a>
    
    <li ><a href="#method-i-children">#children</a>
    
    <li ><a href="#method-i-delete">#delete</a>
    
    <li ><a href="#method-i-fetch">#fetch</a>
    
    <li ><a href="#method-i-has_logger-3F">#has_logger?</a>
    
    <li ><a href="#method-i-parent">#parent</a>
    
    <li ><a href="#method-i-parent_name">#parent_name</a>
    
    <li ><a href="#method-i-to_key">#to_key</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Logging::Repository">
  <h1 id="class-Logging::Repository" class="class">
    class Logging::Repository
  </h1>

  <section class="description">
    
<p>The <a href="Repository.html">Repository</a> is a hash that stores
references to all Loggers that have been created. It provides methods to
determine parent/child relationships between Loggers and to retrieve
Loggers from the hash.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>nodoc:</p>

<p>This is a singleton class – use the <code>instance</code> method to obtain
the <code>Repository</code> instance.</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 20</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>
  <span class="ruby-ivar">@h</span> = {<span class="ruby-value">:root</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-operator">::</span><span class="ruby-constant">Logging</span><span class="ruby-operator">::</span><span class="ruby-constant">RootLogger</span>.<span class="ruby-identifier">new</span>}

  <span class="ruby-comment"># configures the internal logger which is disabled by default</span>
  <span class="ruby-identifier">logger</span> = <span class="ruby-operator">::</span><span class="ruby-constant">Logging</span><span class="ruby-operator">::</span><span class="ruby-constant">Logger</span>.<span class="ruby-identifier">allocate</span>
  <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">_setup</span>(
      <span class="ruby-identifier">to_key</span>(<span class="ruby-operator">::</span><span class="ruby-constant">Logging</span>),
      <span class="ruby-value">:parent</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-ivar">@h</span>[<span class="ruby-value">:root</span>],
      <span class="ruby-value">:additive</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>,
      <span class="ruby-value">:level</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-operator">::</span><span class="ruby-constant">Logging</span><span class="ruby-operator">::</span><span class="ruby-constant">LEVELS</span>.<span class="ruby-identifier">length</span>   <span class="ruby-comment"># turns this logger off</span>
  )
  <span class="ruby-ivar">@h</span>[<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">logger</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-5B-5D" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            instance[name]
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns the <code>Logger</code> named <em>name</em>.</p>

<p>When <em>name</em> is a <code>String</code> or a <code>Symbol</code> it
will be used “as is” to retrieve the logger. When <em>name</em> is a
<code>Class</code> the class name will be used to retrieve the logger. When
<em>name</em> is an object the name of the object&#39;s class will be used
to retrieve the logger.</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">repo</span> = <span class="ruby-constant">Repository</span>.<span class="ruby-identifier">instance</span>
<span class="ruby-identifier">obj</span> = <span class="ruby-constant">MyClass</span>.<span class="ruby-identifier">new</span>

<span class="ruby-identifier">log1</span> = <span class="ruby-identifier">repo</span>[<span class="ruby-identifier">obj</span>]
<span class="ruby-identifier">log2</span> = <span class="ruby-identifier">repo</span>[<span class="ruby-constant">MyClass</span>]
<span class="ruby-identifier">log3</span> = <span class="ruby-identifier">repo</span>[<span class="ruby-string">&#39;MyClass&#39;</span>]

<span class="ruby-identifier">log1</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">log2</span>.<span class="ruby-identifier">object_id</span>         <span class="ruby-comment"># =&gt; true</span>
<span class="ruby-identifier">log2</span>.<span class="ruby-identifier">object_id</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">log3</span>.<span class="ruby-identifier">object_id</span>         <span class="ruby-comment"># =&gt; true</span>
</pre>
          
          

          
          <div class="method-source-code" id="5B-5D-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]</span>( <span class="ruby-identifier">key</span> ) <span class="ruby-ivar">@h</span>[<span class="ruby-identifier">to_key</span>(<span class="ruby-identifier">key</span>)] <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-5B-5D-3D" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            instance[name] = logger
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Stores the <em>logger</em> under the given <em>name</em>.</p>

<p>When <em>name</em> is a <code>String</code> or a <code>Symbol</code> it
will be used “as is” to store the logger. When <em>name</em> is a
<code>Class</code> the class name will be used to store the logger. When
<em>name</em> is an object the name of the object&#39;s class will be used
to store the logger.</p>
          
          

          
          <div class="method-source-code" id="5B-5D-3D-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 68</span>
<span class="ruby-keyword">def</span> <span class="ruby-operator">[]=</span>( <span class="ruby-identifier">key</span>, <span class="ruby-identifier">val</span> ) <span class="ruby-ivar">@h</span>[<span class="ruby-identifier">to_key</span>(<span class="ruby-identifier">key</span>)] = <span class="ruby-identifier">val</span> <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-children" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            children( key )
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns an array of the children loggers for the logger identified by
<em>key</em> where <em>key</em> follows the same identification rules
described in +Repository#[]+. Children are returned regardless of the
existence of the logger referenced by <em>key</em>.</p>
          
          

          
          <div class="method-source-code" id="children-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 146</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">children</span>( <span class="ruby-identifier">parent</span> )
  <span class="ruby-identifier">ary</span> = []
  <span class="ruby-identifier">parent</span> = <span class="ruby-identifier">to_key</span>(<span class="ruby-identifier">parent</span>)

  <span class="ruby-ivar">@h</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span>,<span class="ruby-identifier">logger</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-value">:root</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">child</span>
    <span class="ruby-identifier">ary</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">logger</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">parent_name</span>(<span class="ruby-identifier">child</span>)
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">sort</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-delete" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            delete( name )
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Deletes the named logger from the repository. All direct children of the
logger will have their parent reassigned. So the parent of the logger being
deleted becomes the new parent of the children.</p>

<p>When <em>name</em> is a <code>String</code> or a <code>Symbol</code> it
will be used “as is” to remove the logger. When <em>name</em> is a
<code>Class</code> the class name will be used to remove the logger. When
<em>name</em> is an object the name of the object&#39;s class will be used
to remove the logger.</p>

<p>Raises a RuntimeError if you try to delete the root logger. Raises an
KeyError if the named logger is not found.</p>
          
          

          
          <div class="method-source-code" id="delete-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">delete</span>( <span class="ruby-identifier">key</span> )
  <span class="ruby-identifier">key</span> = <span class="ruby-identifier">to_key</span>(<span class="ruby-identifier">key</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&#39;the :root logger cannot be deleted&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-value">:root</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">key</span>

  <span class="ruby-identifier">parent</span> = <span class="ruby-ivar">@h</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">key</span>).<span class="ruby-identifier">parent</span>
  <span class="ruby-identifier">children</span>(<span class="ruby-identifier">key</span>).<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-value">:parent=</span>, <span class="ruby-identifier">parent</span>)}
  <span class="ruby-ivar">@h</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">key</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-fetch" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            fetch( name )
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns the <code>Logger</code> named <em>name</em>. An
<code>KeyError</code> will be raised if the logger does not exist.</p>

<p>When <em>name</em> is a <code>String</code> or a <code>Symbol</code> it
will be used “as is” to retrieve the logger. When <em>name</em> is a
<code>Class</code> the class name will be used to retrieve the logger. When
<em>name</em> is an object the name of the object&#39;s class will be used
to retrieve the logger.</p>
          
          

          
          <div class="method-source-code" id="fetch-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 81</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">fetch</span>( <span class="ruby-identifier">key</span> ) <span class="ruby-ivar">@h</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-identifier">to_key</span>(<span class="ruby-identifier">key</span>)) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-has_logger-3F" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            has_logger?( name )
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns <code>true</code> if the given logger exists in the repository.
Returns <code>false</code> if this is not the case.</p>

<p>When <em>name</em> is a <code>String</code> or a <code>Symbol</code> it
will be used “as is” to retrieve the logger. When <em>name</em> is a
<code>Class</code> the class name will be used to retrieve the logger. When
<em>name</em> is an object the name of the object&#39;s class will be used
to retrieve the logger.</p>
          
          

          
          <div class="method-source-code" id="has_logger-3F-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 94</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">has_logger?</span>( <span class="ruby-identifier">key</span> ) <span class="ruby-ivar">@h</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">to_key</span>(<span class="ruby-identifier">key</span>)) <span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-parent" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            parent( key )
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Returns the parent logger for the logger identified by <em>key</em> where
<em>key</em> follows the same identification rules described in
<code>Repository#[]</code>. A parent is returned regardless of the
existence of the logger referenced by <em>key</em>.</p>

<p>A note about parents -</p>

<p>If you have a class A::B::C, then the parent of C is B, and the parent of B
is A. Parents are determined by namespace.</p>
          
          

          
          <div class="method-source-code" id="parent-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent</span>( <span class="ruby-identifier">key</span> )
  <span class="ruby-identifier">name</span> = <span class="ruby-identifier">parent_name</span>(<span class="ruby-identifier">to_key</span>(<span class="ruby-identifier">key</span>))
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-ivar">@h</span>[<span class="ruby-identifier">name</span>]
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-parent_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">parent_name</span><span
            class="method-args">( key )</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the name of the parent for the logger identified by the given
<em>key</em>. If the <em>key</em> is for the root logger, then
<code>nil</code> is returned.</p>
          
          

          
          <div class="method-source-code" id="parent_name-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 180</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">parent_name</span>( <span class="ruby-identifier">key</span> )
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">if</span> <span class="ruby-value">:root</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">key</span>

  <span class="ruby-identifier">a</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">split</span> <span class="ruby-constant">PATH_DELIMITER</span>
  <span class="ruby-identifier">p</span> = <span class="ruby-value">:root</span>
  <span class="ruby-keyword">while</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-value">-1</span>) <span class="ruby-keyword">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">a</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">k</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">join</span> <span class="ruby-constant">PATH_DELIMITER</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@h</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-identifier">k</span> <span class="ruby-keyword">then</span> <span class="ruby-identifier">p</span> = <span class="ruby-identifier">k</span>; <span class="ruby-keyword">break</span> <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">p</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-to_key" class="method-detail ">
        
        
        <div class="method-heading">
          <span class="method-callseq">
            to_key( key )
          </span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        
        

        <div class="method-description">
          
          <p>Takes the given <em>key</em> and converts it into a form that can be used
to retrieve a logger from the <code>Repository</code> hash.</p>

<p>When <em>key</em> is a <code>String</code> or a <code>Symbol</code> it will
be returned “as is”. When <em>key</em> is a <code>Class</code> the class
name will be returned. When <em>key</em> is an object the name of the
object&#39;s class will be returned.</p>
          
          

          
          <div class="method-source-code" id="to_key-source">
            <pre><span class="ruby-comment"># File vendor/bundle/ruby/2.4.0/gems/logging-2.2.2/lib/logging/repository.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">to_key</span>( <span class="ruby-identifier">key</span> )
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">key</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:root</span>, <span class="ruby-string">&#39;root&#39;</span>; <span class="ruby-value">:root</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">String</span>; <span class="ruby-identifier">key</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Symbol</span>; <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Module</span>; <span class="ruby-identifier">key</span>.<span class="ruby-identifier">logger_name</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Object</span>; <span class="ruby-identifier">key</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">logger_name</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

