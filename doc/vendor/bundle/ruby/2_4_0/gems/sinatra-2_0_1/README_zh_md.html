<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>README.zh - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../../../../";
  var index_rel_prefix = "../../../../../../";
</script>

<script src="../../../../../../js/jquery.js"></script>
<script src="../../../../../../js/darkfish.js"></script>

<link href="../../../../../../css/fonts.css" rel="stylesheet">
<link href="../../../../../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Sinatra">Sinatra</a>
    <li><a href="#label-E7-9B-AE-E5-BD-95">目录</a>
    <li><a href="#label-E8-B7-AF-E7-94-B1">路由</a>
    <li><a href="#label-E6-9D-A1-E4-BB-B6">条件</a>
    <li><a href="#label-E8-BF-94-E5-9B-9E-E5-80-BC">返回值</a>
    <li><a href="#label-E8-87-AA-E5-AE-9A-E4-B9-89-E8-B7-AF-E7-94-B1-E5-8C-B9-E9-85-8D-E5-99-A8">自定义路由匹配器</a>
    <li><a href="#label-E9-9D-99-E6-80-81-E6-96-87-E4-BB-B6">静态文件</a>
    <li><a href="#label-E8-A7-86-E5-9B-BE+-2F+-E6-A8-A1-E6-9D-BF">视图 / 模板</a>
    <li><a href="#label-E5-AD-97-E9-9D-A2-E9-87-8F-E6-A8-A1-E6-9D-BF">字面量模板</a>
    <li><a href="#label-E5-8F-AF-E9-80-89-E7-9A-84-E6-A8-A1-E6-9D-BF-E8-AF-AD-E8-A8-80">可选的模板语言</a>
    <li><a href="#label-Haml+-E6-A8-A1-E6-9D-BF">Haml 模板</a>
    <li><a href="#label-Erb+-E6-A8-A1-E6-9D-BF">Erb 模板</a>
    <li><a href="#label-Builder+-E6-A8-A1-E6-9D-BF">Builder 模板</a>
    <li><a href="#label-Nokogiri+-E6-A8-A1-E6-9D-BF">Nokogiri 模板</a>
    <li><a href="#label-Sass+-E6-A8-A1-E6-9D-BF">Sass 模板</a>
    <li><a href="#label-SCSS+-E6-A8-A1-E6-9D-BF">SCSS 模板</a>
    <li><a href="#label-Less+-E6-A8-A1-E6-9D-BF">Less 模板</a>
    <li><a href="#label-Liquid+-E6-A8-A1-E6-9D-BF">Liquid 模板</a>
    <li><a href="#label-Markdown+-E6-A8-A1-E6-9D-BF">Markdown 模板</a>
    <li><a href="#label-Textile+-E6-A8-A1-E6-9D-BF">Textile 模板</a>
    <li><a href="#label-RDoc+-E6-A8-A1-E6-9D-BF">RDoc 模板</a>
    <li><a href="#label-AsciiDoc+-E6-A8-A1-E6-9D-BF">AsciiDoc 模板</a>
    <li><a href="#label-Radius+-E6-A8-A1-E6-9D-BF">Radius 模板</a>
    <li><a href="#label-Markaby+-E6-A8-A1-E6-9D-BF">Markaby 模板</a>
    <li><a href="#label-RABL+-E6-A8-A1-E6-9D-BF">RABL 模板</a>
    <li><a href="#label-Slim+-E6-A8-A1-E6-9D-BF">Slim 模板</a>
    <li><a href="#label-Creole+-E6-A8-A1-E6-9D-BF">Creole 模板</a>
    <li><a href="#label-MediaWiki+-E6-A8-A1-E6-9D-BF">MediaWiki 模板</a>
    <li><a href="#label-CoffeeScript+-E6-A8-A1-E6-9D-BF">CoffeeScript 模板</a>
    <li><a href="#label-Stylus+-E6-A8-A1-E6-9D-BF">Stylus 模板</a>
    <li><a href="#label-Yajl+-E6-A8-A1-E6-9D-BF">Yajl 模板</a>
    <li><a href="#label-WLang+-E6-A8-A1-E6-9D-BF">WLang 模板</a>
    <li><a href="#label-E5-9C-A8-E6-A8-A1-E6-9D-BF-E4-B8-AD-E8-AE-BF-E9-97-AE-E5-8F-98-E9-87-8F">在模板中访问变量</a>
    <li><a href="#label-E5-B8-A6+yield+-E7-9A-84-E6-A8-A1-E6-9D-BF-E5-92-8C-E5-B5-8C-E5-A5-97-E5-B8-83-E5-B1-80">带 <code>yield</code> 的模板和嵌套布局</a>
    <li><a href="#label-E5-86-85-E8-81-94-E6-A8-A1-E6-9D-BF">内联模板</a>
    <li><a href="#label-E5-85-B7-E5-90-8D-E6-A8-A1-E6-9D-BF">具名模板</a>
    <li><a href="#label-E5-85-B3-E8-81-94-E6-96-87-E4-BB-B6-E6-89-A9-E5-B1-95-E5-90-8D">关联文件扩展名</a>
    <li><a href="#label-E6-B7-BB-E5-8A-A0-E8-87-AA-E5-AE-9A-E4-B9-89-E6-A8-A1-E6-9D-BF-E5-BC-95-E6-93-8E">添加自定义模板引擎</a>
    <li><a href="#label-E8-87-AA-E5-AE-9A-E4-B9-89-E6-A8-A1-E6-9D-BF-E6-9F-A5-E6-89-BE-E9-80-BB-E8-BE-91">自定义模板查找逻辑</a>
    <li><a href="#label-E8-BF-87-E6-BB-A4-E5-99-A8">过滤器</a>
    <li><a href="#label-E8-BE-85-E5-8A-A9-E6-96-B9-E6-B3-95">辅助方法</a>
    <li><a href="#label-E4-BD-BF-E7-94-A8-E4-BC-9A-E8-AF-9D">使用会话</a>
    <li><a href="#label-E4-BC-9A-E8-AF-9D-E5-8A-A0-E5-AF-86">会话加密</a>
    <li><a href="#label-E7-94-9F-E6-88-90-E5-AF-86-E9-92-A5">生成密钥</a>
    <li><a href="#label-E7-94-9F-E6-88-90-E5-AF-86-E9-92-A5-28-E5-B0-8F-E8-B4-B4-E5-A3-AB-29">生成密钥(小贴士)</a>
    <li><a href="#label-E4-BB-8E-E7-8E-AF-E5-A2-83-E5-8F-98-E9-87-8F-E4-BD-BF-E7-94-A8-E5-AF-86-E9-92-A5">从环境变量使用密钥</a>
    <li><a href="#label-E5-BA-94-E7-94-A8-E7-9A-84-E5-AF-86-E9-92-A5-E9-85-8D-E7-BD-AE">应用的密钥配置</a>
    <li><a href="#label-E4-BC-9A-E8-AF-9D-E9-85-8D-E7-BD-AE">会话配置</a>
    <li><a href="#label-E9-80-89-E6-8B-A9-E4-BD-A0-E8-87-AA-E5-B7-B1-E7-9A-84-E4-BC-9A-E8-AF-9D-E4-B8-AD-E9-97-B4-E4-BB-B6">选择你自己的会话中间件</a>
    <li><a href="#label-E4-B8-AD-E6-96-AD-E8-AF-B7-E6-B1-82">中断请求</a>
    <li><a href="#label-E4-BC-A0-E9-80-92-E8-AF-B7-E6-B1-82">传递请求</a>
    <li><a href="#label-E8-A7-A6-E5-8F-91-E5-8F-A6-E4-B8-80-E4-B8-AA-E8-B7-AF-E7-94-B1">触发另一个路由</a>
    <li><a href="#label-E8-AE-BE-E7-BD-AE-E5-93-8D-E5-BA-94-E4-B8-BB-E4-BD-93-E3-80-81-E7-8A-B6-E6-80-81-E7-A0-81-E5-92-8C-E5-93-8D-E5-BA-94-E9-A6-96-E9-83-A8">设置响应主体、状态码和响应首部</a>
    <li><a href="#label-E5-93-8D-E5-BA-94-E7-9A-84-E6-B5-81-E5-BC-8F-E4-BC-A0-E8-BE-93">响应的流式传输</a>
    <li><a href="#label-E6-97-A5-E5-BF-97">日志</a>
    <li><a href="#label-E5-AA-92-E4-BD-93-E7-B1-BB-E5-9E-8B">媒体类型</a>
    <li><a href="#label-E7-94-9F-E6-88-90+URL">生成 URL</a>
    <li><a href="#label-E6-B5-8F-E8-A7-88-E5-99-A8-E9-87-8D-E5-AE-9A-E5-90-91">浏览器重定向</a>
    <li><a href="#label-E7-BC-93-E5-AD-98-E6-8E-A7-E5-88-B6">缓存控制</a>
    <li><a href="#label-E5-8F-91-E9-80-81-E6-96-87-E4-BB-B6">发送文件</a>
    <li><a href="#label-E8-AE-BF-E9-97-AE-E8-AF-B7-E6-B1-82-E5-AF-B9-E8-B1-A1">访问请求对象</a>
    <li><a href="#label-E9-99-84-E4-BB-B6">附件</a>
    <li><a href="#label-E5-A4-84-E7-90-86-E6-97-A5-E6-9C-9F-E5-92-8C-E6-97-B6-E9-97-B4">处理日期和时间</a>
    <li><a href="#label-E6-9F-A5-E6-89-BE-E6-A8-A1-E6-9D-BF-E6-96-87-E4-BB-B6">查找模板文件</a>
    <li><a href="#label-E9-85-8D-E7-BD-AE">配置</a>
    <li><a href="#label-E9-85-8D-E7-BD-AE-E6-94-BB-E5-87-BB-E9-98-B2-E6-8A-A4">配置攻击防护</a>
    <li><a href="#label-E5-8F-AF-E9-80-89-E7-9A-84-E8-AE-BE-E7-BD-AE">可选的设置</a>
    <li><a href="#label-E7-8E-AF-E5-A2-83">环境</a>
    <li><a href="#label-E9-94-99-E8-AF-AF-E5-A4-84-E7-90-86">错误处理</a>
    <li><a href="#label-E6-9C-AA-E6-89-BE-E5-88-B0">未找到</a>
    <li><a href="#label-E9-94-99-E8-AF-AF">错误</a>
    <li><a href="#label-Rack+-E4-B8-AD-E9-97-B4-E4-BB-B6">Rack 中间件</a>
    <li><a href="#label-E6-B5-8B-E8-AF-95">测试</a>
    <li><a href="#label-Sinatra-3A-3ABase+-+-E4-B8-AD-E9-97-B4-E4-BB-B6-E3-80-81-E5-BA-93-E5-92-8C-E6-A8-A1-E5-9D-97-E5-8C-96-E5-BA-94-E7-94-A8">Sinatra::Base - 中间件、库和模块化应用</a>
    <li><a href="#label-E6-A8-A1-E5-9D-97-E5-8C-96-E9-A3-8E-E6-A0-BC+vs.+-E7-BB-8F-E5-85-B8-E9-A3-8E-E6-A0-BC">模块化风格 vs. 经典风格</a>
    <li><a href="#label-E8-BF-90-E8-A1-8C-E4-B8-80-E4-B8-AA-E6-A8-A1-E5-9D-97-E5-8C-96-E5-BA-94-E7-94-A8">运行一个模块化应用</a>
    <li><a href="#label-E4-BD-BF-E7-94-A8+config.ru+-E8-BF-90-E8-A1-8C-E7-BB-8F-E5-85-B8-E9-A3-8E-E6-A0-BC-E7-9A-84-E5-BA-94-E7-94-A8">使用 config.ru 运行经典风格的应用</a>
    <li><a href="#label-E4-BD-95-E6-97-B6-E4-BD-BF-E7-94-A8+config.ru-EF-BC-9F">何时使用 config.ru？</a>
    <li><a href="#label-E6-8A-8A+Sinatra+-E5-BD-93-E4-BD-9C-E4-B8-AD-E9-97-B4-E4-BB-B6-E4-BD-BF-E7-94-A8">把 Sinatra 当作中间件使用</a>
    <li><a href="#label-E5-88-9B-E5-BB-BA-E5-8A-A8-E6-80-81-E5-BA-94-E7-94-A8">创建动态应用</a>
    <li><a href="#label-E4-BD-9C-E7-94-A8-E5-9F-9F-E5-92-8C-E7-BB-91-E5-AE-9A">作用域和绑定</a>
    <li><a href="#label-E5-BA-94-E7-94-A8-2F-E7-B1-BB-E4-BD-9C-E7-94-A8-E5-9F-9F">应用/类作用域</a>
    <li><a href="#label-E8-AF-B7-E6-B1-82-2F-E5-AE-9E-E4-BE-8B-E4-BD-9C-E7-94-A8-E5-9F-9F">请求/实例作用域</a>
    <li><a href="#label-E4-BB-A3-E7-90-86-E4-BD-9C-E7-94-A8-E5-9F-9F">代理作用域</a>
    <li><a href="#label-E5-91-BD-E4-BB-A4-E8-A1-8C">命令行</a>
    <li><a href="#label-E5-A4-9A-E7-BA-BF-E7-A8-8B">多线程</a>
    <li><a href="#label-E5-BF-85-E8-A6-81-E6-9D-A1-E4-BB-B6">必要条件</a>
    <li><a href="#label-E7-B4-A7-E8-B7-9F-E5-89-8D-E6-B2-BF">紧跟前沿</a>
    <li><a href="#label-E9-80-9A-E8-BF-87+Bundler+-E4-BD-BF-E7-94-A8+Sinatra">通过 Bundler 使用 Sinatra</a>
    <li><a href="#label-E4-BD-BF-E7-94-A8-E8-87-AA-E5-B7-B1-E6-9C-AC-E5-9C-B0-E7-9A-84+Sinatra">使用自己本地的 Sinatra</a>
    <li><a href="#label-E5-85-A8-E5-B1-80-E5-AE-89-E8-A3-85">全局安装</a>
    <li><a href="#label-E7-89-88-E6-9C-AC">版本</a>
    <li><a href="#label-E6-9B-B4-E5-A4-9A-E8-B5-84-E6-96-99">更多资料</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../../../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../../../../Guardfile.html">Guardfile</a>
  
    <li><a href="../../../../../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../config_ru.html">config.ru</a>
  
    <li><a href="../../../../../../db/cesdr_json.html">cesdr.json</a>
  
    <li><a href="../../../../../../gitpush_bat.html">gitpush.bat</a>
  
    <li><a href="../../../../../../run_bat.html">run.bat</a>
  
    <li><a href="../../../../../../spec/examples_txt.html">examples</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/_guard-core.html">_guard-core</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/_guard-core_bat.html">_guard-core.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/coderay.html">coderay</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/coderay_bat.html">coderay.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/guard.html">guard</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/guard_bat.html">guard.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/htmldiff.html">htmldiff</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/htmldiff_bat.html">htmldiff.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/ldiff.html">ldiff</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/ldiff_bat.html">ldiff.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/listen.html">listen</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/listen_bat.html">listen.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/pry.html">pry</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/pry_bat.html">pry.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rackup.html">rackup</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rackup_bat.html">rackup.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rake.html">rake</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rake_bat.html">rake.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rerun.html">rerun</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rerun_bat.html">rerun.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rspec.html">rspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rspec_bat.html">rspec.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rubocop.html">rubocop</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/rubocop_bat.html">rubocop.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/ruby-parse.html">ruby-parse</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/ruby-parse_bat.html">ruby-parse.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/ruby-rewrite.html">ruby-rewrite</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/ruby-rewrite_bat.html">ruby-rewrite.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/thor.html">thor</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/thor_bat.html">thor.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/tilt.html">tilt</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/bin/tilt_bat.html">tilt.bat</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/extensions/x64-mingw32/2_4_0/oj-3_4_0/gem_build_complete.html">gem.build_complete</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/extensions/x64-mingw32/2_4_0/oj-3_4_0/gem_make_out.html">gem_make.out</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/extensions/x64-mingw32/2_4_0/rainbow-2_2_2/gem_build_complete.html">gem.build_complete</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/extensions/x64-mingw32/2_4_0/rainbow-2_2_2/gem_make_out.html">gem_make.out</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/extensions/x64-mingw32/2_4_0/wdm-0_1_1/gem_build_complete.html">gem.build_complete</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/extensions/x64-mingw32/2_4_0/wdm-0_1_1/gem_make_out.html">gem_make.out</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/extensions/x64-mingw32/2_4_0/wdm-0_1_1/mkmf_log.html">mkmf.log</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activemodel-5_1_5/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activemodel-5_1_5/MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activemodel-5_1_5/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activerecord-5_1_5/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activerecord-5_1_5/MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activerecord-5_1_5/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activerecord-5_1_5/lib/active_record/railties/databases_rake.html">databases.rake</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activesupport-5_1_5/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activesupport-5_1_5/MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/activesupport-5_1_5/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/alexa_verifier-1_0_0/CODE_OF_CONDUCT_md.html">CODE_OF_CONDUCT</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/alexa_verifier-1_0_0/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/alexa_verifier-1_0_0/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/alexa_verifier-1_0_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/alexa_verifier-1_0_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/alexa_verifier-1_0_0/alexa_verifier_gemspec.html">alexa_verifier.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/alexa_verifier-1_0_0/bin/setup.html">setup</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/arel-8_0_0/History_txt.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/arel-8_0_0/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/arel-8_0_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ast-2_4_0/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ast-2_4_0/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ast-2_4_0/LICENSE_MIT.html">LICENSE.MIT</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ast-2_4_0/README_YARD_md.html">README.YARD</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ast-2_4_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ast-2_4_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ast-2_4_0/ast_gemspec.html">ast.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/coderay-1_1_2/MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/coderay-1_1_2/README_INDEX_rdoc.html">README_INDEX</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/concurrent-ruby-1_0_5/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/concurrent-ruby-1_0_5/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/concurrent-ruby-1_0_5/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/CONTRIBUTE_markdown.html">CONTRIBUTE.markdown</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/History_rdoc.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/README_markdown.html">README.markdown</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/TODO.html">TODO</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/examples/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/examples/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/examples/config/database_yml_example.html">database.yml.example</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/examples/db/sqlite_databases_go_here.html">sqlite_databases_go_here</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/examples/features/example_feature.html">example.feature</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/examples/features/example_multiple_db_feature.html">example_multiple_db.feature</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/examples/features/example_multiple_orm_feature.html">example_multiple_orm.feature</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/features/cleaning_feature.html">cleaning.feature</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/features/cleaning_default_strategy_feature.html">cleaning_default_strategy.feature</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/features/cleaning_multiple_dbs_feature.html">cleaning_multiple_dbs.feature</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/features/cleaning_multiple_orms_feature.html">cleaning_multiple_orms.feature</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_1/spec/rcov_opts.html">rcov.opts</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_2/CONTRIBUTE_markdown.html">CONTRIBUTE.markdown</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_2/Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_2/History_rdoc.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_2/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_2/README_markdown.html">README.markdown</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_2/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/database_cleaner-1_6_2/TODO.html">TODO</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/Code-of-Conduct_md.html">Code-of-Conduct</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/Contributing_md.html">Contributing</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/History_md.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/License_md.html">License</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/Manifest_txt.html">Manifest</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/bin/htmldiff.html">htmldiff</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/bin/ldiff.html">ldiff</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/docs/COPYING_txt.html">COPYING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/docs/artistic_txt.html">artistic</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/spec/fixtures/ds1_csv.html">ds1.csv</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/diff-lcs-1_3/spec/fixtures/ds2_csv.html">ds2.csv</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/COPYING.html">COPYING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/ChangeLog_libffi.html">ChangeLog.libffi</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/ChangeLog_libffi-3_1.html">ChangeLog.libffi-3.1</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/ChangeLog_libgcj.html">ChangeLog.libgcj</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/ChangeLog_v1.html">ChangeLog.v1</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/Makefile_am.html">Makefile.am</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/Makefile_in.html">Makefile.in</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/README.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/acinclude_m4.html">acinclude.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autogen_sh.html">autogen.sh</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autom4te_cache/output_0.html">output.0</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autom4te_cache/output_1.html">output.1</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autom4te_cache/output_2.html">output.2</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autom4te_cache/output_3.html">output.3</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autom4te_cache/requests.html">requests</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autom4te_cache/traces_0.html">traces.0</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autom4te_cache/traces_1.html">traces.1</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autom4te_cache/traces_2.html">traces.2</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/autom4te_cache/traces_3.html">traces.3</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/compile.html">compile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/config_guess.html">config.guess</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/config_sub.html">config.sub</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/configure.html">configure</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/configure_ac.html">configure.ac</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/configure_host.html">configure.host</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/depcomp.html">depcomp</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/doc/Makefile_am.html">Makefile.am</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/doc/Makefile_in.html">Makefile.in</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/doc/mdate-sh.html">mdate-sh</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/doc/texinfo_tex.html">texinfo.tex</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/doc/version_texi.html">version.texi</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/fficonfig_h_in.html">fficonfig.h.in</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/fficonfig_h_in~.html">fficonfig.h.in~</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/generate-darwin-source-and-headers_py.html">generate-darwin-source-and-headers.py</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/include/Makefile_am.html">Makefile.am</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/include/Makefile_in.html">Makefile.in</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/install-sh.html">install-sh</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/libffi_map_in.html">libffi.map.in</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/libffi_pc_in.html">libffi.pc.in</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/libffi_xcodeproj/project_pbxproj.html">project.pbxproj</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/libtool-ldflags.html">libtool-ldflags</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/libtool-version.html">libtool-version</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/ltmain_sh.html">ltmain.sh</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/asmcfi_m4.html">asmcfi.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/ax_append_flag_m4.html">ax_append_flag.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/ax_cc_maxopt_m4.html">ax_cc_maxopt.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/ax_cflags_warn_all_m4.html">ax_cflags_warn_all.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/ax_check_compile_flag_m4.html">ax_check_compile_flag.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/ax_compiler_vendor_m4.html">ax_compiler_vendor.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/ax_configure_args_m4.html">ax_configure_args.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/ax_enable_builddir_m4.html">ax_enable_builddir.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/ax_gcc_archflag_m4.html">ax_gcc_archflag.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/m4/ax_gcc_x86_cpuid_m4.html">ax_gcc_x86_cpuid.m4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/man/Makefile_am.html">Makefile.am</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/man/Makefile_in.html">Makefile.in</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/man/ffi_3.html">ffi.3</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/man/ffi_call_3.html">ffi_call.3</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/man/ffi_prep_cif_3.html">ffi_prep_cif.3</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/man/ffi_prep_cif_var_3.html">ffi_prep_cif_var.3</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/missing.html">missing</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/msvcc_sh.html">msvcc.sh</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/aarch64/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/alpha/osf_S.html">osf.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/arc/arcompact_S.html">arcompact.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/arm/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/avr32/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/bfin/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/cris/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/frv/eabi_S.html">eabi.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/ia64/unix_S.html">unix.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/m32r/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/m68k/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/m88k/obsd_S.html">obsd.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/metag/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/microblaze/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/mips/n32_S.html">n32.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/mips/o32_S.html">o32.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/moxie/eabi_S.html">eabi.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/nios2/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/or1k/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/pa/hpux32_S.html">hpux32.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/pa/linux_S.html">linux.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/powerpc/aix_S.html">aix.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/powerpc/aix_closure_S.html">aix_closure.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/powerpc/darwin_S.html">darwin.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/powerpc/darwin_closure_S.html">darwin_closure.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/powerpc/linux64_S.html">linux64.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/powerpc/linux64_closure_S.html">linux64_closure.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/powerpc/ppc_closure_S.html">ppc_closure.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/powerpc/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/s390/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/sh/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/sh64/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/sparc/v8_S.html">v8.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/sparc/v9_S.html">v9.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/tile/tile_S.html">tile.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/vax/elfbsd_S.html">elfbsd.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/x86/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/x86/unix64_S.html">unix64.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/x86/win64_S.html">win64.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/x86/win64_intel_S.html">win64_intel.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/src/xtensa/sysv_S.html">sysv.S</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/stamp-h_in.html">stamp-h.in</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/testsuite/Makefile_am.html">Makefile.am</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/testsuite/Makefile_in.html">Makefile.in</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/testsuite/config/default_exp.html">default.exp</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/testsuite/lib/libffi_exp.html">libffi.exp</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/testsuite/lib/target-libpath_exp.html">target-libpath.exp</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/testsuite/lib/wrapper_exp.html">wrapper.exp</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/testsuite/libffi_call/call_exp.html">call.exp</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/testsuite/libffi_complex/complex_exp.html">complex.exp</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ext/ffi_c/libffi/testsuite/libffi_go/go_exp.html">go.exp</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/ffi_gemspec.html">ffi.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/gen/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/aarch64-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/arm-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/i386-cygwin/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/i386-darwin/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/i386-freebsd/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/i386-gnu/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/i386-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/i386-netbsd/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/i386-openbsd/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/i386-solaris/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/i386-windows/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/ia64-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/mips-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/mips64el-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/mipsel-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/powerpc-aix/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/powerpc-darwin/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/powerpc-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/powerpc64-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/s390-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/s390x-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/sparc-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/sparc-solaris/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/sparc64-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/sparcv9-solaris/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/x86_64-cygwin/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/x86_64-darwin/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/x86_64-freebsd/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/x86_64-linux/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/x86_64-netbsd/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/x86_64-openbsd/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/x86_64-solaris/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/lib/ffi/platform/x86_64-windows/types_conf.html">types.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/libtest/GNUmakefile.html">GNUmakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/spec/ffi/LICENSE_SPECS.html">LICENSE.SPECS</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/spec/ffi/embed-test/ext/Makefile.html">Makefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/spec/ffi/fixtures/GNUmakefile.html">GNUmakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ffi-1_9_21-x64-mingw32/spec/spec_opts.html">spec.opts</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/formatador-0_2_5/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/formatador-0_2_5/CONTRIBUTORS_md.html">CONTRIBUTORS</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/formatador-0_2_5/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/formatador-0_2_5/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/formatador-0_2_5/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/formatador-0_2_5/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/formatador-0_2_5/changelog_txt.html">changelog</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/formatador-0_2_5/formatador_gemspec.html">formatador.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-2_14_2/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-2_14_2/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-2_14_2/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-2_14_2/lib/guard/templates/Guardfile.html">Guardfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-2_14_2/man/guard_1.html">guard.1</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-2_14_2/man/guard_1_html.html">guard.1.html</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-compat-1_2_1/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-compat-1_2_1/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-compat-1_2_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-compat-1_2_1/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-compat-1_2_1/guard-compat_gemspec.html">guard-compat.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/Guardfile.html">Guardfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/gemfiles/Gemfile_rspec-2_99.html">Gemfile.rspec-2.99</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/gemfiles/Gemfile_rspec-3_4.html">Gemfile.rspec-3.4</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/gemfiles/common.html">common</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/guard-rspec_gemspec.html">guard-rspec.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/guard-rspec-4_7_3/lib/guard/rspec/templates/Guardfile.html">Guardfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/gemfiles/Gemfile_rails-3_2_x.html">Gemfile.rails-3.2.x</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/gemfiles/Gemfile_rails-4_0_x.html">Gemfile.rails-4.0.x</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/gemfiles/Gemfile_rails-4_1_x.html">Gemfile.rails-4.1.x</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/gemfiles/Gemfile_rails-4_2_x.html">Gemfile.rails-4.2.x</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/gemfiles/Gemfile_rails-5_0_x.html">Gemfile.rails-5.0.x</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/gemfiles/Gemfile_rails-5_1_x.html">Gemfile.rails-5.1.x</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/gemfiles/Gemfile_rails-master.html">Gemfile.rails-master</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/i18n-0_9_5/test/test_data/locales/de_po.html">de.po</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/Appraisals.html">Appraisals</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/CODE_OF_CONDUCT_md.html">CODE_OF_CONDUCT</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/UPGRADE_GUIDE_md.html">UPGRADE_GUIDE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/bin/setup.html">setup</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/gemfiles/activerecord_5_0_0_gemfile.html">activerecord_5.0.0.gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/gemfiles/activerecord_5_0_0_gemfile_lock.html">activerecord_5.0.0.gemfile.lock</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/gemfiles/activerecord_5_1_0_gemfile.html">activerecord_5.1.0.gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/gemfiles/activerecord_5_1_0_gemfile_lock.html">activerecord_5.1.0.gemfile.lock</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/jsonb_accessor-1_0_0/jsonb_accessor_gemspec.html">jsonb_accessor.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/listen-3_1_5/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/listen-3_1_5/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/listen-3_1_5/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/listen-3_1_5/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/little-plugger-1_1_4/History_txt.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/little-plugger-1_1_4/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/little-plugger-1_1_4/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/logging-2_2_2/History_txt.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/logging-2_2_2/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/logging-2_2_2/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/logging-2_2_2/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/logging-2_2_2/logging_gemspec.html">logging.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/logging-2_2_2/script/bootstrap.html">bootstrap</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/lumberjack-1_0_12/MIT_LICENSE.html">MIT_LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/lumberjack-1_0_12/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/lumberjack-1_0_12/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/lumberjack-1_0_12/VERSION.html">VERSION</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/method_source-0_9_0/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/method_source-0_9_0/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/method_source-0_9_0/README_markdown.html">README.markdown</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/method_source-0_9_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/method_source-0_9_0/method_source_gemspec.html">method_source.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/minitest-5_11_3/History_rdoc.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/minitest-5_11_3/Manifest_txt.html">Manifest</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/minitest-5_11_3/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/minitest-5_11_3/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/multi_json-1_13_1/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/multi_json-1_13_1/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/multi_json-1_13_1/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/multi_json-1_13_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/mustermann-1_0_2/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/mustermann-1_0_2/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/mustermann-1_0_2/mustermann_gemspec.html">mustermann.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/nenv-0_3_0/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/nenv-0_3_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/nenv-0_3_0/nenv_gemspec.html">nenv.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/notiffany-0_1_1/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/notiffany-0_1_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/ext/oj/Makefile.html">Makefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/ext/oj/oj-x64-mingw32_def.html">oj-x64-mingw32.def</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/Advanced_md.html">Advanced</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/Compatibility_md.html">Compatibility</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/Custom_md.html">Custom</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/Encoding_md.html">Encoding</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/JsonGem_md.html">JsonGem</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/Modes_md.html">Modes</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/Options_md.html">Options</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/Rails_md.html">Rails</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/Security_md.html">Security</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/oj-3_4_0/pages/WAB_md.html">WAB</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parallel-1_12_1/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/doc/AST_FORMAT_md.html">AST_FORMAT</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/doc/CUSTOMIZATION_md.html">CUSTOMIZATION</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/doc/INTERNALS_md.html">INTERNALS</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/doc/css/common_css.html">common.css</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/lib/parser/lexer_rl.html">lexer.rl</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_0/parser_gemspec.html">parser.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/doc/AST_FORMAT_md.html">AST_FORMAT</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/doc/CUSTOMIZATION_md.html">CUSTOMIZATION</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/doc/INTERNALS_md.html">INTERNALS</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/doc/css/common_css.html">common.css</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/lib/parser/lexer_rl.html">lexer.rl</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_1/parser_gemspec.html">parser.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/doc/AST_FORMAT_md.html">AST_FORMAT</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/doc/CUSTOMIZATION_md.html">CUSTOMIZATION</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/doc/INTERNALS_md.html">INTERNALS</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/doc/css/common_css.html">common.css</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/lib/parser/lexer_rl.html">lexer.rl</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/parser-2_5_0_2/parser_gemspec.html">parser.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/BSDL.html">BSDL</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/ChangeLog.html">ChangeLog</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/Contributors_rdoc.html">Contributors</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/History_rdoc.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/Manifest_txt.html">Manifest</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/POSTGRES.html">POSTGRES</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/README-OS_X_rdoc.html">README-OS_X</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/README-Windows_rdoc.html">README-Windows</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/README_ja_rdoc.html">README.ja</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/Rakefile_cross.html">Rakefile.cross</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/ext/errorcodes_def.html">errorcodes.def</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/ext/errorcodes_txt.html">errorcodes</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/ext/vc/pg_sln.html">pg.sln</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/ext/vc/pg_18/pg_vcproj.html">pg.vcproj</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/ext/vc/pg_19/pg_19_vcproj.html">pg_19.vcproj</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pg-1_0_0-x64-mingw32/spec/data/expected_trace_out.html">expected_trace.out</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/powerpack-0_1_1/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/powerpack-0_1_1/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/powerpack-0_1_1/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/powerpack-0_1_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/powerpack-0_1_1/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/powerpack-0_1_1/powerpack_gemspec.html">powerpack.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pry-0_11_3/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pry-0_11_3/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pry-0_11_3/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/pry-0_11_3/lib/pry/slop/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/COPYING.html">COPYING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/SPEC.html">SPEC</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/contrib/rdoc_css.html">rdoc.css</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/example/lobster_ru.html">lobster.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/example/protectedlobster_ru.html">protectedlobster.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/rack_gemspec.html">rack.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/builder/comment_ru.html">comment.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/builder/end_ru.html">end.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/builder/line_ru.html">line.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/builder/options_ru.html">options.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/assets/folder/test_js.html">test.js</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/assets/fonts/font_eot.html">font.eot</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/assets/images/image_png.html">image.png</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/assets/index_html.html">index.html</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/assets/javascripts/app_js.html">app.js</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/assets/stylesheets/app_css.html">app.css</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/lighttpd_conf.html">lighttpd.conf</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/test+directory/test+file.html">test+file</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/test_fcgi.html">test.fcgi</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/cgi/test_ru.html">test.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/bad_robots.html">bad_robots</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/content_type_and_no_filename.html">content_type_and_no_filename</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/empty.html">empty</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/fail_16384_nofile.html">fail_16384_nofile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/file1_txt.html">file1</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_and_modification_param.html">filename_and_modification_param</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_and_no_name.html">filename_and_no_name</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_encoded_words.html">filename_with_encoded_words</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_escaped_quotes.html">filename_with_escaped_quotes</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_escaped_quotes_and_modification_param.html">filename_with_escaped_quotes_and_modification_param</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_null_byte.html">filename_with_null_byte</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_percent_escaped_quotes.html">filename_with_percent_escaped_quotes</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_single_quote.html">filename_with_single_quote</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_unescaped_percentages.html">filename_with_unescaped_percentages</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_unescaped_percentages2.html">filename_with_unescaped_percentages2</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_unescaped_percentages3.html">filename_with_unescaped_percentages3</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/filename_with_unescaped_quotes.html">filename_with_unescaped_quotes</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/ie.html">ie</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/mixed_files.html">mixed_files</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/nested.html">nested</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/none.html">none</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/quoted.html">quoted</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/semicolon.html">semicolon</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/text.html">text</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/three_files_three_fields.html">three_files_three_fields</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/unity3d_wwwform.html">unity3d_wwwform</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/multipart/webkit.html">webkit</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/rackup/config_ru.html">config.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/static/another/index_html.html">index.html</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/static/foo_html.html">foo.html</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-2_0_4/test/static/index_html.html">index.html</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-protection-2_0_1/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-protection-2_0_1/License.html">License</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-protection-2_0_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-protection-2_0_1/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-protection-2_0_1/rack-protection_gemspec.html">rack-protection.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-test-0_8_2/History_md.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-test-0_8_2/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rack-test-0_8_2/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rainbow-3_0_0/Changelog_md.html">Changelog</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rainbow-3_0_0/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rainbow-3_0_0/Guardfile.html">Guardfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rainbow-3_0_0/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rainbow-3_0_0/README_markdown.html">README.markdown</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rainbow-3_0_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rainbow-3_0_0/rainbow_gemspec.html">rainbow.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/CONTRIBUTING_rdoc.html">CONTRIBUTING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/History_rdoc.html">History</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/README_rdoc.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/bin/setup.html">setup</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/doc/command_line_usage_rdoc.html">command_line_usage</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/doc/example/Rakefile1.html">Rakefile1</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/doc/example/Rakefile2.html">Rakefile2</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/doc/glossary_rdoc.html">glossary</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/doc/proto_rake_rdoc.html">proto_rake</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/doc/rake_1.html">rake.1</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/doc/rakefile_rdoc.html">rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/doc/rational_rdoc.html">rational</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rake-12_3_0/rake_gemspec.html">rake.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ralyxa-1_6_2/CODE_OF_CONDUCT_md.html">CODE_OF_CONDUCT</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ralyxa-1_6_2/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ralyxa-1_6_2/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ralyxa-1_6_2/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ralyxa-1_6_2/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ralyxa-1_6_2/bin/setup.html">setup</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ralyxa-1_6_2/ralyxa_gemspec.html">ralyxa.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-fsevent-0_10_2/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-fsevent-0_10_2/Guardfile.html">Guardfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-fsevent-0_10_2/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-fsevent-0_10_2/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-fsevent-0_10_2/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-fsevent-0_10_2/ext/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-fsevent-0_10_2/rb-fsevent_gemspec.html">rb-fsevent.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-inotify-0_9_10/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-inotify-0_9_10/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-inotify-0_9_10/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rb-inotify-0_9_10/rb-inotify_gemspec.html">rb-inotify.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rerun-0_13_0/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rerun-0_13_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rerun-0_13_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rerun-0_13_0/rerun_gemspec.html">rerun.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-3_7_0/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-3_7_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-core-3_7_1/Changelog_md.html">Changelog</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-core-3_7_1/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-core-3_7_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-expectations-3_7_0/Changelog_md.html">Changelog</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-expectations-3_7_0/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-expectations-3_7_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-mocks-3_7_0/Changelog_md.html">Changelog</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-mocks-3_7_0/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-mocks-3_7_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-support-3_7_1/Changelog_md.html">Changelog</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-support-3_7_1/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rspec-support-3_7_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rubocop-0_52_1/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/rubocop-0_52_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ruby-progressbar-1_9_0/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ruby-progressbar-1_9_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ruby-progressbar-1_9_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ruby_dep-1_5_0/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/ruby_dep-1_5_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/shellany-0_0_1/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/shellany-0_0_1/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/shellany-0_0_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/shellany-0_0_1/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/shellany-0_0_1/shellany_gemspec.html">shellany.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/AUTHORS_md.html">AUTHORS</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/MAINTENANCE_md.html">MAINTENANCE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_de_md.html">README.de</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_es_md.html">README.es</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_fr_md.html">README.fr</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_hu_md.html">README.hu</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_ja_md.html">README.ja</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_ko_md.html">README.ko</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_pt-br_md.html">README.pt-br</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_pt-pt_md.html">README.pt-pt</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_ru_md.html">README.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/README_zh_md.html">README.zh</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/SECURITY_md.html">SECURITY</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/VERSION.html">VERSION</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/examples/stream_ru.html">stream.ru</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-2_0_1/sinatra_gemspec.html">sinatra.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-activerecord-2_0_13/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-activerecord-2_0_13/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/sinatra-activerecord-2_0_13/lib/sinatra/activerecord/tasks_rake.html">tasks.rake</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thor-0_20_0/LICENSE_md.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/org/jruby/ext/thread_safe/JRubyCacheBackendLibrary_java.html">JRubyCacheBackendLibrary.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/org/jruby/ext/thread_safe/jsr166e/ConcurrentHashMap_java.html">ConcurrentHashMap.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/org/jruby/ext/thread_safe/jsr166e/ConcurrentHashMapV8_java.html">ConcurrentHashMapV8.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/org/jruby/ext/thread_safe/jsr166e/LongAdder_java.html">LongAdder.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/org/jruby/ext/thread_safe/jsr166e/Striped64_java.html">Striped64.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/org/jruby/ext/thread_safe/jsr166e/nounsafe/ConcurrentHashMapV8_java.html">ConcurrentHashMapV8.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/org/jruby/ext/thread_safe/jsr166e/nounsafe/LongAdder_java.html">LongAdder.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/org/jruby/ext/thread_safe/jsr166e/nounsafe/Striped64_java.html">Striped64.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/org/jruby/ext/thread_safe/jsr166y/ThreadLocalRandom_java.html">ThreadLocalRandom.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/ext/thread_safe/JrubyCacheBackendService_java.html">JrubyCacheBackendService.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/spec/src/thread_safe/SecurityManager_java.html">SecurityManager.java</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/tasks/update_doc_rake.html">update_doc.rake</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/thread_safe_gemspec.html">thread_safe.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/thread_safe-0_3_6/yard-template/default/fulldoc/html/css/common_css.html">common.css</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/COPYING.html">COPYING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/HACKING.html">HACKING</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/docs/TEMPLATES_md.html">TEMPLATES</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/docs/common_css.html">common.css</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/man/index_txt.html">index</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/man/tilt_1_ronn.html">tilt.1.ronn</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/test/markaby/locals_mab.html">locals.mab</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/test/markaby/markaby_mab.html">markaby.mab</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/test/markaby/markaby_other_static_mab.html">markaby_other_static.mab</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/test/markaby/render_twice_mab.html">render_twice.mab</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/test/markaby/scope_mab.html">scope.mab</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/test/markaby/yielding_mab.html">yielding.mab</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/test/tilt_lesstemplate_test_less.html">tilt_lesstemplate_test.less</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/test/tilt_prawntemplate_prawn.html">tilt_prawntemplate.prawn</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tilt-2_0_8/tilt_gemspec.html">tilt.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tzinfo-1_2_5/CHANGES_md.html">CHANGES</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tzinfo-1_2_5/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tzinfo-1_2_5/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tzinfo-1_2_5/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tzinfo-1_2_5/test/zoneinfo/iso3166_tab.html">iso3166.tab</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tzinfo-1_2_5/test/zoneinfo/leapseconds.html">leapseconds</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tzinfo-1_2_5/test/zoneinfo/zone_tab.html">zone.tab</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tzinfo-1_2_5/test/zoneinfo/zone1970_tab.html">zone1970.tab</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/tzinfo-1_2_5/tzinfo_gemspec.html">tzinfo.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/unicode-display_width-1_3_0/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/unicode-display_width-1_3_0/MIT-LICENSE_txt.html">MIT-LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/unicode-display_width-1_3_0/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/unicode-display_width-1_3_0/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/unicode-display_width-1_3_0/unicode-display_width_gemspec.html">unicode-display_width.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/wdm-0_1_1/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/wdm-0_1_1/README_md.html">README</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/wdm-0_1_1/ext/wdm/Makefile.html">Makefile</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/wdm-0_1_1/ext/wdm/wdm_sln.html">wdm.sln</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/wdm-0_1_1/ext/wdm/wdm_vcxproj.html">wdm.vcxproj</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/wdm-0_1_1/ext/wdm/wdm_vcxproj_filters.html">wdm.vcxproj.filters</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/gems/wdm-0_1_1/ext/wdm/wdm_ext-x64-mingw32_def.html">wdm_ext-x64-mingw32.def</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/activemodel-5_1_5_gemspec.html">activemodel-5.1.5.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/activerecord-5_1_5_gemspec.html">activerecord-5.1.5.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/activesupport-5_1_5_gemspec.html">activesupport-5.1.5.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/alexa_verifier-1_0_0_gemspec.html">alexa_verifier-1.0.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/arel-8_0_0_gemspec.html">arel-8.0.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/ast-2_4_0_gemspec.html">ast-2.4.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/coderay-1_1_2_gemspec.html">coderay-1.1.2.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/concurrent-ruby-1_0_5_gemspec.html">concurrent-ruby-1.0.5.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/database_cleaner-1_6_1_gemspec.html">database_cleaner-1.6.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/diff-lcs-1_3_gemspec.html">diff-lcs-1.3.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/ffi-1_9_21-x64-mingw32_gemspec.html">ffi-1.9.21-x64-mingw32.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/formatador-0_2_5_gemspec.html">formatador-0.2.5.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/guard-2_14_2_gemspec.html">guard-2.14.2.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/guard-compat-1_2_1_gemspec.html">guard-compat-1.2.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/guard-rspec-4_7_3_gemspec.html">guard-rspec-4.7.3.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/i18n-0_9_5_gemspec.html">i18n-0.9.5.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/jsonb_accessor-1_0_0_gemspec.html">jsonb_accessor-1.0.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/listen-3_1_5_gemspec.html">listen-3.1.5.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/little-plugger-1_1_4_gemspec.html">little-plugger-1.1.4.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/logging-2_2_2_gemspec.html">logging-2.2.2.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/lumberjack-1_0_12_gemspec.html">lumberjack-1.0.12.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/method_source-0_9_0_gemspec.html">method_source-0.9.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/minitest-5_11_3_gemspec.html">minitest-5.11.3.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/multi_json-1_13_1_gemspec.html">multi_json-1.13.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/mustermann-1_0_2_gemspec.html">mustermann-1.0.2.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/nenv-0_3_0_gemspec.html">nenv-0.3.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/notiffany-0_1_1_gemspec.html">notiffany-0.1.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/oj-3_4_0_gemspec.html">oj-3.4.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/parallel-1_12_1_gemspec.html">parallel-1.12.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/parser-2_5_0_0_gemspec.html">parser-2.5.0.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/parser-2_5_0_1_gemspec.html">parser-2.5.0.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/parser-2_5_0_2_gemspec.html">parser-2.5.0.2.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/pg-1_0_0-x64-mingw32_gemspec.html">pg-1.0.0-x64-mingw32.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/powerpack-0_1_1_gemspec.html">powerpack-0.1.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/pry-0_11_3_gemspec.html">pry-0.11.3.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rack-2_0_4_gemspec.html">rack-2.0.4.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rack-protection-2_0_1_gemspec.html">rack-protection-2.0.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rack-test-0_8_2_gemspec.html">rack-test-0.8.2.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rainbow-3_0_0_gemspec.html">rainbow-3.0.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rake-12_3_0_gemspec.html">rake-12.3.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/ralyxa-1_6_2_gemspec.html">ralyxa-1.6.2.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rb-fsevent-0_10_2_gemspec.html">rb-fsevent-0.10.2.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rb-inotify-0_9_10_gemspec.html">rb-inotify-0.9.10.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rerun-0_13_0_gemspec.html">rerun-0.13.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rspec-3_7_0_gemspec.html">rspec-3.7.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rspec-core-3_7_1_gemspec.html">rspec-core-3.7.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rspec-expectations-3_7_0_gemspec.html">rspec-expectations-3.7.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rspec-mocks-3_7_0_gemspec.html">rspec-mocks-3.7.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rspec-support-3_7_1_gemspec.html">rspec-support-3.7.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/rubocop-0_52_1_gemspec.html">rubocop-0.52.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/ruby-progressbar-1_9_0_gemspec.html">ruby-progressbar-1.9.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/ruby_dep-1_5_0_gemspec.html">ruby_dep-1.5.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/shellany-0_0_1_gemspec.html">shellany-0.0.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/sinatra-2_0_1_gemspec.html">sinatra-2.0.1.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/sinatra-activerecord-2_0_13_gemspec.html">sinatra-activerecord-2.0.13.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/thor-0_20_0_gemspec.html">thor-0.20.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/thread_safe-0_3_6_gemspec.html">thread_safe-0.3.6.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/tilt-2_0_8_gemspec.html">tilt-2.0.8.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/tzinfo-1_2_5_gemspec.html">tzinfo-1.2.5.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/unicode-display_width-1_3_0_gemspec.html">unicode-display_width-1.3.0.gemspec</a>
  
    <li><a href="../../../../../../vendor/bundle/ruby/2_4_0/specifications/wdm-0_1_1_gemspec.html">wdm-0.1.1.gemspec</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page vendor/bundle/ruby/2.4.0/gems/sinatra-2.0.1/README.zh.md">

<h1 id="label-Sinatra"><a href="../../../../../../Sinatra.html">Sinatra</a><span><a href="#label-Sinatra">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>注：本文档是英文版的翻译，内容更新有可能不及时。如有不一致的地方，请以英文版为准。*</p>

<p><a href="../../../../../../Sinatra.html">Sinatra</a> 是一门基于 Ruby 的<a
href="https://en.wikipedia.org/wiki/Domain-specific_language">领域专属语言</a>，致力于轻松、快速地创建网络应用：</p>

<pre class="ruby"><span class="ruby-comment"># myapp.rb</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Hello world!&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>安装 <a href="../../../../../../Sinatra.html">Sinatra</a> 这个 gem：</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-identifier">install</span> <span class="ruby-identifier">sinatra</span>
</pre>

<p>然后运行 myapp.rb 中的代码：</p>

<pre class="ruby"><span class="ruby-identifier">ruby</span> <span class="ruby-identifier">myapp</span>.<span class="ruby-identifier">rb</span>
</pre>

<p>在该地址查看： <a href="http://localhost:4567">localhost:4567</a></p>

<p>推荐运行 <code>gem install thin</code> 安装 Thin。这样，Sinatra 会优先选择 <a
href="../../../../../../Thin.html">Thin</a> 作为服务器。</p>

<h2 id="label-E7-9B-AE-E5-BD-95">目录<span><a href="#label-E7-9B-AE-E5-BD-95">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="#sinatra">Sinatra</a>  <a href="#目录">目录</a>  <a href="#路由">路由</a> 
<a href="#条件">条件</a>  <a href="#返回值">返回值</a>  <a
href="#自定义路由匹配器">自定义路由匹配器</a>  <a href="#静态文件">静态文件</a>  <a
href="#视图--模板">视图 / 模板</a>  <a href="#字面量模板">字面量模板</a>  <a
href="#可选的模板语言">可选的模板语言</a>  <a href="#haml-模板">Haml 模板</a>  <a
href="#erb-模板">Erb 模板</a>  <a href="#builder-模板">Builder 模板</a>  <a
href="#nokogiri-模板">Nokogiri 模板</a>  <a href="#sass-模板">Sass 模板</a>  <a
href="#scss-模板">SCSS 模板</a>  <a href="#less-模板">Less 模板</a>  <a
href="#liquid-模板">Liquid 模板</a>  <a href="#markdown-模板">Markdown 模板</a>  <a
href="#textile-模板">Textile 模板</a>  <a href="#rdoc-模板">RDoc 模板</a>  <a
href="#asciidoc-模板">AsciiDoc 模板</a>  <a href="#radius-模板">Radius 模板</a>  <a
href="#markaby-模板">Markaby 模板</a>  <a href="#rabl-模板">RABL 模板</a>  <a
href="#slim-模板">Slim 模板</a>  <a href="#creole-模板">Creole 模板</a>  <a
href="#mediawiki-模板">MediaWiki 模板</a>  <a
href="#coffeescript-模板">CoffeeScript 模板</a>  <a href="#stylus-模板">Stylus
模板</a>  <a href="#yajl-模板">Yajl 模板</a>  <a href="#wlang-模板">WLang 模板</a> 
<a href="#在模板中访问变量">在模板中访问变量</a>  <a href="#带-yield-的模板和嵌套布局">带 yield
的模板和嵌套布局</a>  <a href="#内联模板">内联模板</a>  <a href="#具名模板">具名模板</a>  <a
href="#关联文件扩展名">关联文件扩展名</a>  <a href="#添加自定义模板引擎">添加自定义模板引擎</a>  <a
href="#自定义模板查找逻辑">自定义模板查找逻辑</a>  <a href="#过滤器">过滤器</a>  <a
href="#辅助方法">辅助方法</a>  <a href="#使用会话">使用会话</a>  <a href="#中断请求">中断请求</a> 
<a href="#传递请求">传递请求</a>  <a href="#触发另一个路由">触发另一个路由</a>  <a
href="#设置响应主体状态码和响应首部">设置响应主体、状态码和响应首部</a>  <a href="#响应的流式传输">响应的流式传输</a> 
<a href="#日志">日志</a>  <a href="#媒体类型">媒体类型</a>  <a href="#生成-url">生成
URL</a>  <a href="#浏览器重定向">浏览器重定向</a>  <a href="#缓存控制">缓存控制</a>  <a
href="#发送文件">发送文件</a>  <a href="#访问请求对象">访问请求对象</a>  <a href="#附件">附件</a> 
<a href="#处理日期和时间">处理日期和时间</a>  <a href="#查找模板文件">查找模板文件</a>  <a
href="#配置">配置</a>  <a href="#配置攻击防护">配置攻击防护</a>  <a href="#可选的设置">可选的设置</a>
<a href="#环境">环境</a>  <a href="#错误处理">错误处理</a>  <a href="#未找到">未找到</a>  <a
href="#错误">错误</a>  <a href="#rack-中间件">Rack 中间件</a>  <a href="#测试">测试</a> 
<a href="#sinatrabase---中间件库和模块化应用">Sinatra::Base - 中间件、库和模块化应用</a>  <a
href="#模块化风格-vs-经典风格">模块化风格 vs. 经典风格</a>  <a
href="#运行一个模块化应用">运行一个模块化应用</a>  <a href="#使用-configru-运行经典风格的应用">使用
config.ru 运行经典风格的应用</a>  <a href="#何时使用-configru">何时使用 config.ru？</a>  <a
href="#把-sinatra-当作中间件使用">把 Sinatra 当作中间件使用</a>  <a
href="#创建动态应用">创建动态应用</a>  <a href="#作用域和绑定">作用域和绑定</a>  <a
href="#应用类作用域">应用/类作用域</a>  <a href="#请求实例作用域">请求/实例作用域</a>  <a
href="#代理作用域">代理作用域</a>  <a href="#命令行">命令行</a>  <a href="#多线程">多线程</a>  <a
href="#必要条件">必要条件</a>  <a href="#紧跟前沿">紧跟前沿</a>  <a
href="#通过-bundler-使用-sinatra">通过 Bundler 使用 Sinatra</a>  <a
href="#使用自己本地的-sinatra">使用自己本地的 Sinatra</a>  <a href="#全局安装">全局安装</a>  <a
href="#版本">版本</a>  <a href="#更多资料">更多资料</a></p>

<h2 id="label-E8-B7-AF-E7-94-B1">路由<span><a href="#label-E8-B7-AF-E7-94-B1">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>在 <a href="../../../../../../Sinatra.html">Sinatra</a> 中，一个路由分为两部分：HTTP 方法和
URL 匹配范式。每个路由都有一个要执行的代码块：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">显示内容</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">post</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">创建内容</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">put</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">替换内容</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">patch</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">修改内容</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">delete</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">删除内容</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">options</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">显示命令列表</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">link</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">建立某种联系</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">unlink</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">..</span> <span class="ruby-identifier">解除某种联系</span> <span class="ruby-operator">..</span>
<span class="ruby-keyword">end</span>
</pre>

<p>路由按照它们定义时的顺序进行匹配。第一个与请求匹配的路由会被调用。</p>

<p>路由范式可以包括具名参数，具名参数可以通过 <code>params</code> hash 访问：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/hello/:name&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># 匹配 &quot;GET /hello/foo&quot; 和 &quot;GET /hello/bar&quot;</span>
  <span class="ruby-comment"># params[&#39;name&#39;] 的值是 &#39;foo&#39; 或者 &#39;bar&#39;</span>
  <span class="ruby-node">&quot;Hello #{params[&#39;name&#39;]}!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>也可以通过代码块参数访问具名参数：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/hello/:name&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
  <span class="ruby-comment"># 匹配 &quot;GET /hello/foo&quot; 和 &quot;GET /hello/bar&quot;</span>
  <span class="ruby-comment"># params[&#39;name&#39;] 的值是 &#39;foo&#39; 或者 &#39;bar&#39;</span>
  <span class="ruby-comment"># n 存储 params[&#39;name&#39;] 的值</span>
  <span class="ruby-node">&quot;Hello #{n}!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>路由范式也可以包含通配符参数， 参数值可以通过 <code>params['splat']</code> 数组访问。</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/say  /to/*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># 匹配 &quot;GET /say/hello/to/world&quot;</span>
  <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;splat&#39;</span>] <span class="ruby-comment"># =&gt; [&quot;hello&quot;, &quot;world&quot;]</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/download/*.*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># 匹配 &quot;GET /download/path/to/file.xml&quot;</span>
  <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;splat&#39;</span>] <span class="ruby-comment"># =&gt; [&quot;path/to/file&quot;, &quot;xml&quot;]</span>
<span class="ruby-keyword">end</span>
</pre>

<p>或者通过代码块参数访问：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/download/*.*&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span>, <span class="ruby-identifier">ext</span><span class="ruby-operator">|</span>
  [<span class="ruby-identifier">path</span>, <span class="ruby-identifier">ext</span>] <span class="ruby-comment"># =&gt; [&quot;path/to/file&quot;, &quot;xml&quot;]</span>
<span class="ruby-keyword">end</span>
</pre>

<p>通过正则表达式匹配路由：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-regexp">/\/hello\/([\w]+)/</span> <span class="ruby-keyword">do</span>
  <span class="ruby-node">&quot;Hello, #{params[&#39;captures&#39;].first}!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>或者使用代码块参数：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-regexp">%r{/hello/([\w]+)}</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
  <span class="ruby-comment"># 匹配 &quot;GET /meta/hello/world&quot;、&quot;GET /hello/world/1234&quot; 等</span>
  <span class="ruby-node">&quot;Hello, #{c}!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>路由范式可以包含可选参数：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/posts/:format?&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># 匹配 &quot;GET /posts/&quot; 和任意扩展 &quot;GET /posts/json&quot;、&quot;GET /posts/xml&quot; 等</span>
<span class="ruby-keyword">end</span>
</pre>

<p>路由也可以使用查询参数：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/posts&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># 匹配 &quot;GET /posts?title=foo&amp;author=bar&quot;</span>
  <span class="ruby-identifier">title</span> = <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;title&#39;</span>]
  <span class="ruby-identifier">author</span> = <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;author&#39;</span>]
  <span class="ruby-comment"># 使用 title 和 author 变量；对于 /posts 路由来说，查询字符串是可选的</span>
<span class="ruby-keyword">end</span>
</pre>

<p>顺便一提，除非你禁用了路径遍历攻击防护（见下文），请求路径可能在匹配路由前发生改变。</p>

<p>你也可以通过<code>:mustermann_opt</code>选项定义<a
href="https://github.com/sinatra/mustermann">Mustermann</a>来匹配路由。</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;\A/posts\z&#39;</span>, :<span class="ruby-identifier">mustermann_opts</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">type</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">regexp</span>, :<span class="ruby-identifier">check_anchors</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> } <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># matches /posts exactly, with explicit anchoring</span>
  <span class="ruby-string">&quot;If you match an anchored pattern clap your hands!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>它看起来像一个{条件}[https://github.com/sinatra/sinatra/blob/master/README.zh.md#%E6%9D%A1%E4%BB%B6]，但实际不是！这些选项将被合并到全局的mustermann_opts。</p>

<h3 id="label-E6-9D-A1-E4-BB-B6">条件<span><a href="#label-E6-9D-A1-E4-BB-B6">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>路由可以包含各种匹配条件，比如 user agent：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span>, :<span class="ruby-identifier">agent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/Songbird (\d\.\d)[\d\/]*?/</span> <span class="ruby-keyword">do</span>
  <span class="ruby-node">&quot;你正在使用 Songbird，版本是 #{params[&#39;agent&#39;][0]}&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># 匹配非 Songbird 浏览器</span>
<span class="ruby-keyword">end</span>
</pre>

<p>其它可以使用的条件有 <code>host_name</code> 和 <code>provides</code>：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, :<span class="ruby-identifier">host_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/^admin\./</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;管理员区域，无权进入！&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, :<span class="ruby-identifier">provides</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;html&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, :<span class="ruby-identifier">provides</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">&#39;rss&#39;</span>, <span class="ruby-string">&#39;atom&#39;</span>, <span class="ruby-string">&#39;xml&#39;</span>] <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">builder</span> :<span class="ruby-identifier">feed</span>
<span class="ruby-keyword">end</span>
</pre>

<p><code>provides</code> 会搜索请求的 Accept 首部字段。</p>

<p>也可以轻易地使用自定义条件：</p>

<pre class="ruby"><span class="ruby-identifier">set</span>(:<span class="ruby-identifier">probability</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">condition</span> { <span class="ruby-identifier">rand</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">value</span> } }

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/win_a_car&#39;</span>, :<span class="ruby-identifier">probability</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0.1</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;You won!&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/win_a_car&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;Sorry, you lost.&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>对于一个需要提供多个值的条件，可以使用 splat：</p>

<pre class="ruby"><span class="ruby-identifier">set</span>(:<span class="ruby-identifier">auth</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">roles</span><span class="ruby-operator">|</span>   <span class="ruby-comment"># &lt;- 注意此处使用了 splat</span>
  <span class="ruby-identifier">condition</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">logged_in?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">roles</span>.<span class="ruby-identifier">any?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">role</span><span class="ruby-operator">|</span> <span class="ruby-identifier">current_user</span>.<span class="ruby-identifier">in_role?</span> <span class="ruby-identifier">role</span> }
      <span class="ruby-identifier">redirect</span> <span class="ruby-string">&quot;/login/&quot;</span>, <span class="ruby-value">303</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/my/account/&quot;</span>, :<span class="ruby-identifier">auth</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">user</span>, :<span class="ruby-identifier">admin</span>] <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;Your Account Details&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/only/admin/&quot;</span>, :<span class="ruby-identifier">auth</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">admin</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;Only admins are allowed here!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E8-BF-94-E5-9B-9E-E5-80-BC">返回值<span><a href="#label-E8-BF-94-E5-9B-9E-E5-80-BC">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>路由代码块的返回值至少决定了返回给 HTTP 客户端的响应主体，或者至少决定了在 <a
href="../../../../../../Rack.html">Rack</a>
堆栈中的下一个中间件。大多数情况下，返回值是一个字符串，就像上面的例子中的一样。但是，其它类型的值也是可以接受的。</p>

<p>你可以返回任何对象，该对象要么是一个合理的 <a href="../../../../../../Rack.html">Rack</a>
响应，要么是一个 <a href="../../../../../../Rack.html">Rack</a> body 对象，要么是 HTTP
状态码：</p>

<p>一个包含三个元素的数组: <code>[状态 (Fixnum), 响应首部 (Hash), 响应主体 (可以响应 #each 方法)]</code> 
一个包含两个元素的数组: <code>[状态 (Fixnum), 响应主体 (可以响应 #each 方法)]</code>  一个响应
<code>#each</code> 方法，只传回字符串的对象  一个代表状态码的数字</p>

<p>例如，我们可以轻松地实现流式传输：</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">Stream</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">each</span>
    <span class="ruby-value">100</span>.<span class="ruby-identifier">times</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-keyword">yield</span> <span class="ruby-node">&quot;#{i}\n&quot;</span> }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;/&#39;</span>) { <span class="ruby-constant">Stream</span>.<span class="ruby-identifier">new</span> }
</pre>

<p>也可以使用 <code>stream</code> 辅助方法（见下文描述）以减少样板代码并在路由中直接使用流式传输。</p>

<h3 id="label-E8-87-AA-E5-AE-9A-E4-B9-89-E8-B7-AF-E7-94-B1-E5-8C-B9-E9-85-8D-E5-99-A8">自定义路由匹配器<span><a href="#label-E8-87-AA-E5-AE-9A-E4-B9-89-E8-B7-AF-E7-94-B1-E5-8C-B9-E9-85-8D-E5-99-A8">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>如上文所示，Sinatra 本身支持使用字符串和正则表达式作为路由匹配。但不限于此，你可以轻松地定义自己的匹配器：</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">AllButPattern</span>
  <span class="ruby-constant">Match</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(:<span class="ruby-identifier">captures</span>)

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">except</span>)
    <span class="ruby-ivar">@except</span>   = <span class="ruby-identifier">except</span>
    <span class="ruby-ivar">@captures</span> = <span class="ruby-constant">Match</span>.<span class="ruby-identifier">new</span>([])
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">match</span>(<span class="ruby-identifier">str</span>)
    <span class="ruby-ivar">@captures</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@except</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">str</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">def</span> <span class="ruby-identifier">all_but</span>(<span class="ruby-identifier">pattern</span>)
  <span class="ruby-constant">AllButPattern</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">pattern</span>)
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-identifier">all_but</span>(<span class="ruby-string">&quot;/index&quot;</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>上面的例子可能太繁琐了， 因为它也可以用更简单的方式表述：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-regexp">//</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">pass</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_info</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;/index&quot;</span>
  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>或者，使用消极向前查找:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-regexp">%r{(?!/index)}</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-E9-9D-99-E6-80-81-E6-96-87-E4-BB-B6">静态文件<span><a href="#label-E9-9D-99-E6-80-81-E6-96-87-E4-BB-B6">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>静态文件从 <code>./public</code> 目录提供服务。可以通过设置<code>:public_folder</code>
选项设定一个不同的位置：</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">public_folder</span>, <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/static&#39;</span>
</pre>

<p>请注意 public 目录名并没有包含在 URL 中。文件 <code>./public/css/style.css</code> 可以通过
<code>http://example.com/css/style.css</code> 访问。</p>

<p>可以使用 <code>:static_cache_control</code> 设置（见下文）添加
<code>Cache-Control</code> 首部信息。</p>

<h2 id="label-E8-A7-86-E5-9B-BE+-2F+-E6-A8-A1-E6-9D-BF">视图 / 模板<span><a href="#label-E8-A7-86-E5-9B-BE+-2F+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>每一门模板语言都将自身的渲染方法暴露给 <a href="../../../../../../Sinatra.html">Sinatra</a>
调用。这些渲染方法只是简单地返回字符串。</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">erb</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>这段代码会渲染 <code>views/index.erb</code> 文件。</p>

<p>除了模板文件名，也可以直接传入模板内容：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">code</span> = <span class="ruby-string">&quot;&lt;%= Time.now %&gt;&quot;</span>
  <span class="ruby-identifier">erb</span> <span class="ruby-identifier">code</span>
<span class="ruby-keyword">end</span>
</pre>

<p>渲染方法接受第二个参数，即选项 hash：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">erb</span> :<span class="ruby-identifier">index</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">post</span>
<span class="ruby-keyword">end</span>
</pre>

<p>这段代码会将 <code>views/index.erb</code> 嵌入在 <code>views/post.erb</code>
布局中并一起渲染（<code>views/layout.erb</code> 是默认的布局，如果它存在的话）。</p>

<p>任何 <a href="../../../../../../Sinatra.html">Sinatra</a> 不能理解的选项都会传递给模板引擎。</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>, :<span class="ruby-identifier">format</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">html5</span>
<span class="ruby-keyword">end</span>
</pre>

<p>也可以为每种模板语言设置通用的选项：</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">haml</span>, :<span class="ruby-identifier">format</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">html5</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>在渲染方法中传入的选项会覆盖通过 <code>set</code> 设置的通用选项。</p>

<p>可用的选项：</p>
<dl>
  <dt>locals</dt>
  <dd>
    传递给模板文档的 locals 对象列表。对于 partials
    很方便。例如：<tt>erb "<%= foo %>", :locals => {:foo => "bar"}</tt>
  </dd>

  <dt>default_encoding</dt>
  <dd>默认的字符编码。默认值为 <tt>settings.default_encoding</tt>。</dd>

  <dt>views</dt>
  <dd>存放模板文件的目录。默认为 <tt>settings.views</tt>。</dd>

  <dt>layout</dt>
  <dd>
    是否使用布局 (<tt>true</tt> 或 <tt>false</tt>)。
    如果使用一个符号类型的值，则是用于明确使用的模板。例如：
    <tt>erb :index, :layout => !request.xhr?</tt>
  </dd>

  <dt>content_type</dt>
  <dd>由模板生成的 Content-Type。默认值由模板语言决定。</dd>

  <dt>scope</dt>
  <dd>
    渲染模板时的作用域。默认值为应用类的实例对象。如果更改此项，实例变量和辅助方法将不可用。
  </dd>

  <dt>layout_engine</dt>
  <dd>
    渲染布局所使用的模板引擎。用于不支持布局的模板语言。默认值为模板所使用的引擎。例如：
    <tt>set :rdoc, :layout_engine => :erb</tt>
  </dd>

  <dt>layout_options</dt>
  <dd>
    渲染布局的特殊选项。例如：
    <tt>set :rdoc, :layout_options => { :views => 'views/layouts' }</tt>
  </dd>
</dl>
<p><a href="../../../../../../Sinatra.html">Sinatra</a> 假定模板文件直接位于
<code>./views</code> 目录。要使用不同的视图目录：</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">views</span>, <span class="ruby-identifier">settings</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">+</span> <span class="ruby-string">&#39;/templates&#39;</span>
</pre>

<p>需要牢记的一点是，你必须通过符号引用模板， 即使它们存放在子目录下 （在这种情况下，使用
<code>:&#39;subdir/template&#39;</code> 或
<code>&#39;subdir/template&#39;.to_sym</code>）。
如果你不使用符号，渲染方法会直接渲染你传入的任何字符串。</p>

<h3 id="label-E5-AD-97-E9-9D-A2-E9-87-8F-E6-A8-A1-E6-9D-BF">字面量模板<span><a href="#label-E5-AD-97-E9-9D-A2-E9-87-8F-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h3>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> <span class="ruby-string">&#39;%div.title Hello World&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>这段代码直接渲染模板字符串。</p>

<h3 id="label-E5-8F-AF-E9-80-89-E7-9A-84-E6-A8-A1-E6-9D-BF-E8-AF-AD-E8-A8-80">可选的模板语言<span><a href="#label-E5-8F-AF-E9-80-89-E7-9A-84-E6-A8-A1-E6-9D-BF-E8-AF-AD-E8-A8-80">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>一些语言有多种实现。为了确定使用哪种实现（以及保证线程安全），你应该首先引入该实现：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rdiscount&#39;</span> <span class="ruby-comment"># 或 require &#39;bluecloth&#39;</span>
<span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;/&#39;</span>) { <span class="ruby-identifier">markdown</span> :<span class="ruby-identifier">index</span> }
</pre>

<h4 id="label-Haml+-E6-A8-A1-E6-9D-BF">Haml 模板<span><a href="#label-Haml+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://haml.info/" title="haml">haml</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.haml</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>haml :index, :format => :html5</tt></td>
  </tr>
</table>
<h4 id="label-Erb+-E6-A8-A1-E6-9D-BF">Erb 模板<span><a href="#label-Erb+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td>
      <a href="http://www.kuwata-lab.com/erubis/" title="erubis">erubis</a>
      或 erb (Ruby 标准库中已经包含)
    </td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.erb</tt>, <tt>.rhtml</tt> or <tt>.erubis</tt> (仅用于 Erubis)</td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>erb :index</tt></td>
  </tr>
</table>
<h4 id="label-Builder+-E6-A8-A1-E6-9D-BF">Builder 模板<span><a href="#label-Builder+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td>
      <a href="https://github.com/jimweirich/builder" title="builder">builder</a>
    </td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.builder</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>builder { |xml| xml.em "hi" }</tt></td>
  </tr>
</table>
<p><code>builder</code> 渲染方法也接受一个代码块，用于内联模板（见例子）。</p>

<h4 id="label-Nokogiri+-E6-A8-A1-E6-9D-BF">Nokogiri 模板<span><a href="#label-Nokogiri+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://www.nokogiri.org/" title="nokogiri">nokogiri</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.nokogiri</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>nokogiri { |xml| xml.em "hi" }</tt></td>
  </tr>
</table>
<p><code>nokogiri</code> 渲染方法也接受一个代码块，用于内联模板（见例子）。</p>

<h4 id="label-Sass+-E6-A8-A1-E6-9D-BF">Sass 模板<span><a href="#label-Sass+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://sass-lang.com/" title="sass">sass</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.sass</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>sass :stylesheet, :style => :expanded</tt></td>
  </tr>
</table>
<h4 id="label-SCSS+-E6-A8-A1-E6-9D-BF">SCSS 模板<span><a href="#label-SCSS+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://sass-lang.com/" title="sass">sass</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.scss</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>scss :stylesheet, :style => :expanded</tt></td>
  </tr>
</table>
<h4 id="label-Less+-E6-A8-A1-E6-9D-BF">Less 模板<span><a href="#label-Less+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://lesscss.org/" title="less">less</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.less</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>less :stylesheet</tt></td>
  </tr>
</table>
<h4 id="label-Liquid+-E6-A8-A1-E6-9D-BF">Liquid 模板<span><a href="#label-Liquid+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://liquidmarkup.org/" title="liquid">liquid</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.liquid</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>liquid :index, :locals => { :key => 'value' }</tt></td>
  </tr>
</table>
<p>因为不能在 Liquid 模板中调用 Ruby 方法（除了 <code>yield</code>），你几乎总是需要传递 locals 对象给它。</p>

<h4 id="label-Markdown+-E6-A8-A1-E6-9D-BF">Markdown 模板<span><a href="#label-Markdown+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td>
      下列任一:
        <a href="https://github.com/davidfstr/rdiscount" title="RDiscount">RDiscount</a>,
        <a href="https://github.com/vmg/redcarpet" title="RedCarpet">RedCarpet</a>,
        <a href="http://deveiate.org/projects/BlueCloth" title="BlueCloth">BlueCloth</a>,
        <a href="http://kramdown.gettalong.org/" title="kramdown">kramdown</a>,
        <a href="https://github.com/bhollis/maruku" title="maruku">maruku</a>
    </td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.markdown</tt>, <tt>.mkd</tt> and <tt>.md</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>markdown :index, :layout_engine => :erb</tt></td>
  </tr>
</table>
<p>不能在 markdown 中调用 Ruby 方法，也不能传递 locals 给它。 因此，你一般会结合其它的渲染引擎来使用它：</p>

<pre class="ruby"><span class="ruby-identifier">erb</span> :<span class="ruby-identifier">overview</span>, :<span class="ruby-identifier">locals</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">markdown</span>(:<span class="ruby-identifier">introduction</span>) }
</pre>

<p>请注意你也可以在其它模板中调用 markdown 方法：</p>

<pre class="ruby"><span class="ruby-operator">%</span><span class="ruby-value">1</span> <span class="ruby-constant">Hello</span> <span class="ruby-constant">From</span> <span class="ruby-constant">Haml!</span>
<span class="ruby-operator">%</span>= <span class="ruby-identifier">markdown</span>(:<span class="ruby-identifier">greetings</span>)
</pre>

<p>因为不能在 Markdown 中使用 Ruby 语言，你不能使用 Markdown 书写的布局。
不过，使用其它渲染引擎作为模板的布局是可能的，这需要通过传入 <code>:layout_engine</code> 选项。</p>

<h4 id="label-Textile+-E6-A8-A1-E6-9D-BF">Textile 模板<span><a href="#label-Textile+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://redcloth.org/" title="RedCloth">RedCloth</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.textile</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>textile :index, :layout_engine => :erb</tt></td>
  </tr>
</table>
<p>不能在 textile 中调用 Ruby 方法，也不能传递 locals 给它。 因此，你一般会结合其它的渲染引擎来使用它：</p>

<pre class="ruby"><span class="ruby-identifier">erb</span> :<span class="ruby-identifier">overview</span>, :<span class="ruby-identifier">locals</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">textile</span>(:<span class="ruby-identifier">introduction</span>) }
</pre>

<p>请注意你也可以在其他模板中调用 <code>textile</code> 方法：</p>

<pre class="ruby"><span class="ruby-operator">%</span><span class="ruby-value">1</span> <span class="ruby-constant">Hello</span> <span class="ruby-constant">From</span> <span class="ruby-constant">Haml!</span>
<span class="ruby-operator">%</span>= <span class="ruby-identifier">textile</span>(:<span class="ruby-identifier">greetings</span>)
</pre>

<p>因为不能在 Textile 中调用 Ruby 方法，你不能用 Textile 书写布局。 不过，使用其它渲染引擎作为模版的布局是可能的，这需要通过传递
<code>:layout_engine</code> 选项。</p>

<h4 id="label-RDoc+-E6-A8-A1-E6-9D-BF"><a href="../../../../../../RDoc.html">RDoc</a> 模板<span><a href="#label-RDoc+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://rdoc.sourceforge.net/" title="RDoc">RDoc</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.rdoc</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>rdoc :README, :layout_engine => :erb</tt></td>
  </tr>
</table>
<p>不能在 rdoc 中调用 Ruby 方法，也不能传递 locals 给它。 因此，你一般会结合其它的渲染引擎来使用它：</p>

<pre class="ruby"><span class="ruby-identifier">erb</span> :<span class="ruby-identifier">overview</span>, :<span class="ruby-identifier">locals</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">rdoc</span>(:<span class="ruby-identifier">introduction</span>) }
</pre>

<p>请注意你也可以在其他模板中调用 <code>rdoc</code> 方法：</p>

<pre class="ruby"><span class="ruby-operator">%</span><span class="ruby-value">1</span> <span class="ruby-constant">Hello</span> <span class="ruby-constant">From</span> <span class="ruby-constant">Haml!</span>
<span class="ruby-operator">%</span>= <span class="ruby-identifier">rdoc</span>(:<span class="ruby-identifier">greetings</span>)
</pre>

<p>因为不能在 <a href="../../../../../../RDoc.html">RDoc</a> 中调用 Ruby 方法，你不能用 <a
href="../../../../../../RDoc.html">RDoc</a> 书写布局。
不过，使用其它渲染引擎作为模版的布局是可能的，这需要通过传递 <code>:layout_engine</code> 选项。</p>

<h4 id="label-AsciiDoc+-E6-A8-A1-E6-9D-BF">AsciiDoc 模板<span><a href="#label-AsciiDoc+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://asciidoctor.org/" title="Asciidoctor">Asciidoctor</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.asciidoc</tt>, <tt>.adoc</tt> and <tt>.ad</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>asciidoc :README, :layout_engine => :erb</tt></td>
  </tr>
</table>
<p>因为不能在 AsciiDoc 模板中直接调用 Ruby 方法，你几乎总是需要传递 locals 对象给它。</p>

<h4 id="label-Radius+-E6-A8-A1-E6-9D-BF">Radius 模板<span><a href="#label-Radius+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="https://github.com/jlong/radius" title="Radius">Radius</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.radius</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>radius :index, :locals => { :key => 'value' }</tt></td>
  </tr>
</table>
<p>因为不能在 Radius 模板中直接调用 Ruby 方法，你几乎总是可以传递 locals 对象给它。</p>

<h4 id="label-Markaby+-E6-A8-A1-E6-9D-BF">Markaby 模板<span><a href="#label-Markaby+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://markaby.github.io/" title="Markaby">Markaby</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.mab</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>markaby { h1 "Welcome!" }</tt></td>
  </tr>
</table>
<p><code>markaby</code> 渲染方法也接受一个代码块，用于内联模板（见例子）。</p>

<h4 id="label-RABL+-E6-A8-A1-E6-9D-BF">RABL 模板<span><a href="#label-RABL+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="https://github.com/nesquena/rabl" title="Rabl">Rabl</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.rabl</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>rabl :index</tt></td>
  </tr>
</table>
<h4 id="label-Slim+-E6-A8-A1-E6-9D-BF">Slim 模板<span><a href="#label-Slim+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="http://slim-lang.com/" title="Slim Lang">Slim Lang</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.slim</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>slim :index</tt></td>
  </tr>
</table>
<h4 id="label-Creole+-E6-A8-A1-E6-9D-BF">Creole 模板<span><a href="#label-Creole+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="https://github.com/minad/creole" title="Creole">Creole</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.creole</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>creole :wiki, :layout_engine => :erb</tt></td>
  </tr>
</table>
<p>不能在 creole 中调用 Ruby 方法，也不能传递 locals 对象给它。 因此你一般会结合其它的渲染引擎来使用它：</p>

<pre class="ruby"><span class="ruby-identifier">erb</span> :<span class="ruby-identifier">overview</span>, :<span class="ruby-identifier">locals</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">creole</span>(:<span class="ruby-identifier">introduction</span>) }
</pre>

<p>注意你也可以在其它模板内调用 <code>creole</code> 方法：</p>

<pre class="ruby"><span class="ruby-operator">%</span><span class="ruby-value">1</span> <span class="ruby-constant">Hello</span> <span class="ruby-constant">From</span> <span class="ruby-constant">Haml!</span>
<span class="ruby-operator">%</span>= <span class="ruby-identifier">creole</span>(:<span class="ruby-identifier">greetings</span>)
</pre>

<p>因为不能在 Creole 模板文件内调用 Ruby 方法，你不能用 Creole 书写布局文件。
然而，使用其它渲染引擎作为模版的布局是可能的，这需要通过传递 <code>:layout_engine</code> 选项。</p>

<h4 id="label-MediaWiki+-E6-A8-A1-E6-9D-BF">MediaWiki 模板<span><a href="#label-MediaWiki+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="https://github.com/nricciar/wikicloth" title="WikiCloth">WikiCloth</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.mediawiki</tt> and <tt>.mw</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>mediawiki :wiki, :layout_engine => :erb</tt></td>
  </tr>
</table>
<p>在 MediaWiki 标记文件内不能调用 Ruby 方法，也不能传递 locals 对象给它。 因此你一般会结合其它的渲染引擎来使用它：</p>

<pre class="ruby"><span class="ruby-identifier">erb</span> :<span class="ruby-identifier">overview</span>, :<span class="ruby-identifier">locals</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">mediawiki</span>(:<span class="ruby-identifier">introduction</span>) }
</pre>

<p>注意你也可以在其它模板内调用 <code>mediawiki</code> 方法：</p>

<pre class="ruby"><span class="ruby-operator">%</span><span class="ruby-value">1</span> <span class="ruby-constant">Hello</span> <span class="ruby-constant">From</span> <span class="ruby-constant">Haml!</span>
<span class="ruby-operator">%</span>= <span class="ruby-identifier">mediawiki</span>(:<span class="ruby-identifier">greetings</span>)
</pre>

<p>因为不能在 MediaWiki 文件内调用 Ruby 方法，你不能用 MediaWiki 书写布局文件。
然而，使用其它渲染引擎作为模版的布局是可能的，这需要通过传递 <code>:layout_engine</code> 选项。</p>

<h4 id="label-CoffeeScript+-E6-A8-A1-E6-9D-BF">CoffeeScript 模板<span><a href="#label-CoffeeScript+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td>
      <a href="https://github.com/josh/ruby-coffee-script" title="Ruby CoffeeScript">
        CoffeeScript
      </a> 以及一种
      <a href="https://github.com/sstephenson/execjs/blob/master/README.md#readme" title="ExecJS">
        执行 JavaScript 的方式
      </a>
    </td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.coffee</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>coffee :index</tt></td>
  </tr>
</table>
<h4 id="label-Stylus+-E6-A8-A1-E6-9D-BF">Stylus 模板<span><a href="#label-Stylus+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td>
      <a href="https://github.com/forgecrafted/ruby-stylus" title="Ruby Stylus">
        Stylus
      </a> 以及一种
      <a href="https://github.com/sstephenson/execjs/blob/master/README.md#readme" title="ExecJS">
        执行 JavaScript 的方式
      </a>
    </td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.styl</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>stylus :index</tt></td>
  </tr>
</table>
<p>在使用 Stylus 模板之前，你需要先加载 <code>stylus</code> 和 <code>stylus/tilt</code>：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;stylus&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;stylus/tilt&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">stylus</span> :<span class="ruby-identifier">example</span>
<span class="ruby-keyword">end</span>
</pre>

<h4 id="label-Yajl+-E6-A8-A1-E6-9D-BF"><a href="../../../../../../Yajl.html">Yajl</a> 模板<span><a href="#label-Yajl+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="https://github.com/brianmario/yajl-ruby" title="yajl-ruby">yajl-ruby</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.yajl</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td>
      <tt>
        yajl :index,
             :locals => { :key => 'qux' },
             :callback => 'present',
             :variable => 'resource'
      </tt>
    </td>
  </tr>
</table>
<p>模板文件的源码作为一个 Ruby 字符串被求值，得到的 json 变量是通过 <code>#to_json</code> 方法转换的：</p>

<pre class="ruby"><span class="ruby-identifier">json</span> = { :<span class="ruby-identifier">foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;bar&#39;</span> }
<span class="ruby-identifier">json</span>[:<span class="ruby-identifier">baz</span>] = <span class="ruby-identifier">key</span>
</pre>

<p>可以使用 <code>:callback</code> 和 <code>:variable</code> 选项装饰被渲染的对象：</p>

<pre class="ruby"><span class="ruby-identifier">var</span> <span class="ruby-identifier">resource</span> = {<span class="ruby-string">&quot;foo&quot;</span><span class="ruby-operator">:</span><span class="ruby-string">&quot;bar&quot;</span>,<span class="ruby-string">&quot;baz&quot;</span><span class="ruby-operator">:</span><span class="ruby-string">&quot;qux&quot;</span>};
<span class="ruby-identifier">present</span>(<span class="ruby-identifier">resource</span>);
</pre>

<h4 id="label-WLang+-E6-A8-A1-E6-9D-BF">WLang 模板<span><a href="#label-WLang+-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h4>
<table>
  <tr>
    <td>依赖项</td>
    <td><a href="https://github.com/blambeau/wlang/" title="WLang">WLang</a></td>
  </tr>
  <tr>
    <td>文件扩展名</td>
    <td><tt>.wlang</tt></td>
  </tr>
  <tr>
    <td>例子</td>
    <td><tt>wlang :index, :locals => { :key => 'value' }</tt></td>
  </tr>
</table>
<p>因为在 WLang 中调用 Ruby 方法不符合语言习惯，你几乎总是需要传递 locals 给 WLang 木板。 然而，可以用 WLang
编写布局文件，也可以在 WLang 中使用 <code>yield</code> 方法。</p>

<h3 id="label-E5-9C-A8-E6-A8-A1-E6-9D-BF-E4-B8-AD-E8-AE-BF-E9-97-AE-E5-8F-98-E9-87-8F">在模板中访问变量<span><a href="#label-E5-9C-A8-E6-A8-A1-E6-9D-BF-E4-B8-AD-E8-AE-BF-E9-97-AE-E5-8F-98-E9-87-8F">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>模板的求值发生在路由处理器内部的上下文中。模板可以直接访问路由处理器中设置的实例变量。</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:id&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-ivar">@foo</span> = <span class="ruby-constant">Foo</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;id&#39;</span>])
  <span class="ruby-identifier">haml</span> <span class="ruby-string">&#39;%h1= @foo.name&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>或者，也可以显式地指定一个由局部变量组成的 locals 哈希：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:id&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">foo</span> = <span class="ruby-constant">Foo</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;id&#39;</span>])
  <span class="ruby-identifier">haml</span> <span class="ruby-string">&#39;%h1= foo.name&#39;</span>, :<span class="ruby-identifier">locals</span> =<span class="ruby-operator">&gt;</span> { :<span class="ruby-identifier">foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span> }
<span class="ruby-keyword">end</span>
</pre>

<p>locals 哈希典型的使用情景是在别的模板中渲染 partials。</p>

<h3 id="label-E5-B8-A6+yield+-E7-9A-84-E6-A8-A1-E6-9D-BF-E5-92-8C-E5-B5-8C-E5-A5-97-E5-B8-83-E5-B1-80">带 <code>yield</code> 的模板和嵌套布局<span><a href="#label-E5-B8-A6+yield+-E7-9A-84-E6-A8-A1-E6-9D-BF-E5-92-8C-E5-B5-8C-E5-A5-97-E5-B8-83-E5-B1-80">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>布局通常就是使用了 <code>yield</code> 方法的模板。 这样的布局文件可以通过上面描述的 <code>:template</code>
选项指定，也可以通过下面的代码块渲染：</p>

<pre class="ruby"><span class="ruby-identifier">erb</span> :<span class="ruby-identifier">post</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">erb</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>这段代码几乎完全等同于 <code>erb :index, :layout =&gt; :post</code>。</p>

<p>向渲染方法传递代码块对于创建嵌套布局是最有用的：</p>

<pre class="ruby"><span class="ruby-identifier">erb</span> :<span class="ruby-identifier">main_layout</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">erb</span> :<span class="ruby-identifier">admin_layout</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">erb</span> :<span class="ruby-identifier">user</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>代码行数可以更少：</p>

<pre class="ruby"><span class="ruby-identifier">erb</span> :<span class="ruby-identifier">admin_layout</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">main_layout</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">erb</span> :<span class="ruby-identifier">user</span>
<span class="ruby-keyword">end</span>
</pre>

<p>当前，以下的渲染方法接受一个代码块：<code>erb</code>、<code>haml</code>、<code>liquid</code>、<code>slim</code>
和 <code>wlang</code>。 通用的 <code>render</code> 方法也接受。</p>

<h3 id="label-E5-86-85-E8-81-94-E6-A8-A1-E6-9D-BF">内联模板<span><a href="#label-E5-86-85-E8-81-94-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>模板可以在源文件的末尾定义：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>

__END__

<span class="ruby-identifier">@@</span> <span class="ruby-identifier">layout</span>
<span class="ruby-operator">%</span><span class="ruby-identifier">tml</span>
  = <span class="ruby-keyword">yield</span>

<span class="ruby-identifier">@@</span> <span class="ruby-identifier">index</span>
<span class="ruby-operator">%</span><span class="ruby-identifier">iv</span>.<span class="ruby-identifier">title</span> <span class="ruby-constant">Hello</span> <span class="ruby-identifier">world</span>.
</pre>

<p>注意：在引入了 sinatra 的源文件中定义的内联模板会自动载入。 如果你在其他源文件中也有内联模板，需要显式调用 <code>enable
:inline_templates</code>。</p>

<h3 id="label-E5-85-B7-E5-90-8D-E6-A8-A1-E6-9D-BF">具名模板<span><a href="#label-E5-85-B7-E5-90-8D-E6-A8-A1-E6-9D-BF">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>可以使用顶层 <code>template</code> 方法定义模板：</p>

<pre class="ruby"><span class="ruby-identifier">template</span> :<span class="ruby-identifier">layout</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;%html\n  =yield\n&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">template</span> :<span class="ruby-identifier">index</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;%div.title Hello World!&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>如果存在名为 “layout” 的模板，该模板会在每个模板渲染的时候作为布局使用。 你可以为渲染方法传送 <code>:layout =&gt;
false</code> 来禁用该次渲染的布局， 也可以设置 <code>set :haml, :layout =&gt; false</code>
来默认禁用布局。</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">index</span>, :<span class="ruby-identifier">layout</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">request</span>.<span class="ruby-identifier">xhr?</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E5-85-B3-E8-81-94-E6-96-87-E4-BB-B6-E6-89-A9-E5-B1-95-E5-90-8D">关联文件扩展名<span><a href="#label-E5-85-B3-E8-81-94-E6-96-87-E4-BB-B6-E6-89-A9-E5-B1-95-E5-90-8D">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>为了将一个文件扩展名到对应的模版引擎，要使用 <code>Tilt.register</code>。 比如，如果你喜欢使用
<code>tt</code> 作为 Textile 模版的扩展名，你可以这样做:</p>

<pre class="ruby"><span class="ruby-constant">Tilt</span>.<span class="ruby-identifier">register</span> :<span class="ruby-identifier">tt</span>, <span class="ruby-constant">Tilt</span>[:<span class="ruby-identifier">textile</span>]
</pre>

<h3 id="label-E6-B7-BB-E5-8A-A0-E8-87-AA-E5-AE-9A-E4-B9-89-E6-A8-A1-E6-9D-BF-E5-BC-95-E6-93-8E">添加自定义模板引擎<span><a href="#label-E6-B7-BB-E5-8A-A0-E8-87-AA-E5-AE-9A-E4-B9-89-E6-A8-A1-E6-9D-BF-E5-BC-95-E6-93-8E">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>首先，通过 <a href="../../../../../../Tilt.html">Tilt</a> 注册你自定义的引擎，然后创建一个渲染方法：</p>

<pre class="ruby"><span class="ruby-constant">Tilt</span>.<span class="ruby-identifier">register</span> :<span class="ruby-identifier">myat</span>, <span class="ruby-constant">MyAwesomeTemplateEngine</span>

<span class="ruby-identifier">helpers</span> <span class="ruby-keyword">do</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">myat</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>) <span class="ruby-identifier">render</span>(:<span class="ruby-identifier">myat</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>) <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">myat</span> :<span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span>
</pre>

<p>这段代码将会渲染 <code>./views/index.myat</code> 文件。 查看 <a
href="https://github.com/rtomayko/tilt">github.com/rtomayko/tilt</a>
以了解更多关于 <a href="../../../../../../Tilt.html">Tilt</a> 的信息。</p>

<h3 id="label-E8-87-AA-E5-AE-9A-E4-B9-89-E6-A8-A1-E6-9D-BF-E6-9F-A5-E6-89-BE-E9-80-BB-E8-BE-91">自定义模板查找逻辑<span><a href="#label-E8-87-AA-E5-AE-9A-E4-B9-89-E6-A8-A1-E6-9D-BF-E6-9F-A5-E6-89-BE-E9-80-BB-E8-BE-91">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>要实现自定义的模板查找机制，你可以构建自己的 <code>#find_template</code> 方法：</p>

<pre class="ruby"><span class="ruby-identifier">configure</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">set</span> :<span class="ruby-identifier">views</span>, [ <span class="ruby-string">&#39;./views/a&#39;</span>, <span class="ruby-string">&#39;./views/b&#39;</span> ]
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_template</span>(<span class="ruby-identifier">views</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">engine</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-constant">Array</span>(<span class="ruby-identifier">views</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">super</span>(<span class="ruby-identifier">v</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">engine</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-E8-BF-87-E6-BB-A4-E5-99-A8">过滤器<span><a href="#label-E8-BF-87-E6-BB-A4-E5-99-A8">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><code>before</code> 过滤器在每个请求之前调用，调用的上下文与请求的上下文相同，并且可以修改请求和响应。
在过滤器中设置的变量可以被路由和模板访问：</p>

<pre class="ruby"><span class="ruby-identifier">before</span> <span class="ruby-keyword">do</span>
  <span class="ruby-ivar">@note</span> = <span class="ruby-string">&#39;Hi!&#39;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_info</span> = <span class="ruby-string">&#39;/foo/bar/baz&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo/*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-ivar">@note</span> <span class="ruby-comment">#=&gt; &#39;Hi!&#39;</span>
  <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;splat&#39;</span>] <span class="ruby-comment">#=&gt; &#39;bar/baz&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p><code>after</code> 过滤器在每个请求之后调用，调用上下文与请求的上下文相同，并且也会修改请求和响应。 在
<code>before</code> 过滤器和路由中设置的实例变量可以被 <code>after</code> 过滤器访问：</p>

<pre class="ruby"><span class="ruby-identifier">after</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">response</span>.<span class="ruby-identifier">status</span>
<span class="ruby-keyword">end</span>
</pre>

<p>请注意：除非你显式使用 <code>body</code> 方法，而不是在路由中直接返回字符串， 响应主体在 <code>after</code>
过滤器是不可访问的， 因为它在之后才会生成。</p>

<p>过滤器可以可选地带有范式， 只有请求路径满足该范式时才会执行：</p>

<pre class="ruby"><span class="ruby-identifier">before</span> <span class="ruby-string">&#39;/protected/*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">authenticate!</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">after</span> <span class="ruby-string">&#39;/create/:slug&#39;</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">slug</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">session</span>[<span class="ruby-string">&#39;last_slug&#39;</span>] = <span class="ruby-identifier">slug</span>
<span class="ruby-keyword">end</span>
</pre>

<p>和路由一样，过滤器也可以带有条件：</p>

<pre class="ruby"><span class="ruby-identifier">before</span> :<span class="ruby-identifier">agent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp">/Songbird/</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">after</span> <span class="ruby-string">&#39;/blog/*&#39;</span>, :<span class="ruby-identifier">host_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;example.com&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-E8-BE-85-E5-8A-A9-E6-96-B9-E6-B3-95">辅助方法<span><a href="#label-E8-BE-85-E5-8A-A9-E6-96-B9-E6-B3-95">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>使用顶层的 <code>helpers</code> 方法来定义辅助方法， 以便在路由处理器和模板中使用：</p>

<pre class="ruby"><span class="ruby-identifier">helpers</span> <span class="ruby-keyword">do</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">bar</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-node">&quot;#{name}bar&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:name&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">bar</span>(<span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;name&#39;</span>])
<span class="ruby-keyword">end</span>
</pre>

<p>也可以在多个分散的模块中定义辅助方法：</p>

<pre class="ruby"><span class="ruby-keyword">module</span> <span class="ruby-constant">FooUtils</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">foo</span>(<span class="ruby-identifier">name</span>) <span class="ruby-node">&quot;#{name}foo&quot;</span> <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">module</span> <span class="ruby-constant">BarUtils</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">bar</span>(<span class="ruby-identifier">name</span>) <span class="ruby-node">&quot;#{name}bar&quot;</span> <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">helpers</span> <span class="ruby-constant">FooUtils</span>, <span class="ruby-constant">BarUtils</span>
</pre>

<p>以上代码块与在应用类中包含模块等效。</p>

<h3 id="label-E4-BD-BF-E7-94-A8-E4-BC-9A-E8-AF-9D">使用会话<span><a href="#label-E4-BD-BF-E7-94-A8-E4-BC-9A-E8-AF-9D">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>会话用于在请求之间保持状态。如果激活了会话，每一个用户会话都对应一个会话 hash：</p>

<pre class="ruby"><span class="ruby-identifier">enable</span> :<span class="ruby-identifier">sessions</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;value = &quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">session</span>[<span class="ruby-string">&#39;value&#39;</span>].<span class="ruby-identifier">inspect</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/:value&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">session</span>[<span class="ruby-string">&#39;value&#39;</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;value&#39;</span>]
<span class="ruby-keyword">end</span>
</pre>

<h4 id="label-E4-BC-9A-E8-AF-9D-E5-8A-A0-E5-AF-86">会话加密<span><a href="#label-E4-BC-9A-E8-AF-9D-E5-8A-A0-E5-AF-86">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>为提高安全性，cookie
中的会话数据使用<code>HMAC-SHA1</code>进行加密。会话加密的最佳实践应当是像<code>HMAC-SHA1</code>这样生成大于或等于64字节
(512 bits, 128 hex characters)的随机值。应当避免使用少于32字节(256 bits, 64 hex
characters)的随机值。应当使用生成器来创建安全的密钥，而不是拍脑袋决定。</p>

<p>默认情况下，Sinatra会生成一个32字节的密钥，但随着应用程序的每次重新启动，它都会发生改变。如果有多个应用程序的实例，使用Sinatra生成密钥，每个实例将有不同的密钥，这可能不是您想要的。</p>

<p>为了更好的安全性和可用性，{建议}[https://12factor.net/config]生成安全的随机密钥，并将其存储在运行应用程序的每个主机上的环境变量中，以便所有应用程序实例都将共享相同的密钥。并且应该定期更新会话密钥。下面是一些创建64比特密钥的例子:</p>

<h4 id="label-E7-94-9F-E6-88-90-E5-AF-86-E9-92-A5">生成密钥<span><a href="#label-E7-94-9F-E6-88-90-E5-AF-86-E9-92-A5">&para;</a> <a href="#top">&uarr;</a></span></h4>

<pre class="ruby">$ <span class="ruby-identifier">ruby</span> <span class="ruby-operator">-</span><span class="ruby-identifier">e</span> <span class="ruby-string">&quot;require &#39;securerandom&#39;; puts SecureRandom.hex(64)&quot;</span>
<span class="ruby-value">99</span><span class="ruby-identifier">ae8af</span><span class="ruby-operator">...</span><span class="ruby-identifier">snip</span><span class="ruby-operator">...</span><span class="ruby-identifier">ec0f262ac</span>
</pre>

<h4 id="label-E7-94-9F-E6-88-90-E5-AF-86-E9-92-A5-28-E5-B0-8F-E8-B4-B4-E5-A3-AB-29">生成密钥(小贴士)<span><a href="#label-E7-94-9F-E6-88-90-E5-AF-86-E9-92-A5-28-E5-B0-8F-E8-B4-B4-E5-A3-AB-29">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>MRI Ruby目前认为{sysrandom
gem}[https://github.com/cryptosphere/sysrandom]使用系统的随机数生成器要比用户态的OpenSSL好。</p>

<pre class="ruby">$ <span class="ruby-identifier">gem</span> <span class="ruby-identifier">install</span> <span class="ruby-identifier">sysrandom</span>
<span class="ruby-constant">Building</span> <span class="ruby-identifier">native</span> <span class="ruby-identifier">extensions</span>.  <span class="ruby-constant">This</span> <span class="ruby-identifier">could</span> <span class="ruby-identifier">take</span> <span class="ruby-identifier">a</span> <span class="ruby-keyword">while</span><span class="ruby-operator">...</span>
<span class="ruby-constant">Successfully</span> <span class="ruby-identifier">installed</span> <span class="ruby-identifier">sysrandom</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>.<span class="ruby-identifier">x</span>
<span class="ruby-value">1</span> <span class="ruby-identifier">gem</span> <span class="ruby-identifier">installed</span>

$ <span class="ruby-identifier">ruby</span> <span class="ruby-operator">-</span><span class="ruby-identifier">e</span> <span class="ruby-string">&quot;require &#39;sysrandom/securerandom&#39;; puts SecureRandom.hex(64)&quot;</span>
<span class="ruby-value">99</span><span class="ruby-identifier">ae8af</span><span class="ruby-operator">...</span><span class="ruby-identifier">snip</span><span class="ruby-operator">...</span><span class="ruby-identifier">ec0f262ac</span>
</pre>

<h4 id="label-E4-BB-8E-E7-8E-AF-E5-A2-83-E5-8F-98-E9-87-8F-E4-BD-BF-E7-94-A8-E5-AF-86-E9-92-A5">从环境变量使用密钥<span><a href="#label-E4-BB-8E-E7-8E-AF-E5-A2-83-E5-8F-98-E9-87-8F-E4-BD-BF-E7-94-A8-E5-AF-86-E9-92-A5">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>将Sinatra的SESSION_SECRET环境变量设置为生成的值。在主机的重新启动之间保存这个值。由于这样做的方法会因系统而异，仅供说明之用：
<code> # echo &quot;export SESSION_SECRET=99ae8af...snip...ec0f262ac&quot;
&gt;&gt; ~/.bashrc </code></p>

<h4 id="label-E5-BA-94-E7-94-A8-E7-9A-84-E5-AF-86-E9-92-A5-E9-85-8D-E7-BD-AE">应用的密钥配置<span><a href="#label-E5-BA-94-E7-94-A8-E7-9A-84-E5-AF-86-E9-92-A5-E9-85-8D-E7-BD-AE">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>如果SESSION SECRET环境变量不可用，将把应用的随机密钥设置为不安全的。</p>

<p>关于<a href="https://github.com/cryptosphere/sysrandom">sysrandom
gem</a>的更多用法:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;securerandom&#39;</span>
<span class="ruby-comment"># -or- require &#39;sysrandom/securerandom&#39;</span>
<span class="ruby-identifier">set</span> :<span class="ruby-identifier">session_secret</span>, <span class="ruby-constant">ENV</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;SESSION_SECRET&#39;</span>) { <span class="ruby-constant">SecureRandom</span>.<span class="ruby-identifier">hex</span>(<span class="ruby-value">64</span>) }
</pre>

<h4 id="label-E4-BC-9A-E8-AF-9D-E9-85-8D-E7-BD-AE">会话配置<span><a href="#label-E4-BC-9A-E8-AF-9D-E9-85-8D-E7-BD-AE">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>如果你想进一步配置会话，可以在设置 <code>sessions</code> 时提供一个选项 hash 作为第二个参数：</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">sessions</span>, :<span class="ruby-identifier">domain</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;foo.com&#39;</span>
</pre>

<p>为了在 foo.com 的子域名间共享会话数据，可以在域名前添加一个 <em>.</em>：</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">sessions</span>, :<span class="ruby-identifier">domain</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;.foo.com&#39;</span>
</pre>

<h4 id="label-E9-80-89-E6-8B-A9-E4-BD-A0-E8-87-AA-E5-B7-B1-E7-9A-84-E4-BC-9A-E8-AF-9D-E4-B8-AD-E9-97-B4-E4-BB-B6">选择你自己的会话中间件<span><a href="#label-E9-80-89-E6-8B-A9-E4-BD-A0-E8-87-AA-E5-B7-B1-E7-9A-84-E4-BC-9A-E8-AF-9D-E4-B8-AD-E9-97-B4-E4-BB-B6">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>请注意 <code>enable :sessions</code> 实际将所有的数据保存在一个 cookie 中。
这可能并不总是你想要的（cookie 中存储大量的数据会增加你的流量）。 你可以使用任何 <a
href="../../../../../../Rack.html">Rack</a> session
中间件：要达到此目的，<strong>不要</strong>使用 <code>enable :sessions</code>，
而是按照自己的需要引入想使用的中间件：</p>

<pre class="ruby"><span class="ruby-identifier">enable</span> :<span class="ruby-identifier">sessions</span>
<span class="ruby-identifier">set</span> :<span class="ruby-identifier">session_store</span>, <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Session</span><span class="ruby-operator">::</span><span class="ruby-constant">Pool</span>
</pre>

<p>另一种选择是不要调用enable：sessions，而是像你想要的其他中间件一样加入你的中间件。</p>

<p>重要的是要注意，使用此方法时，默认情况下不会启用基于会话的保护。</p>

<p>还需要添加Rack中间件：</p>

<pre class="ruby"><span class="ruby-identifier">use</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Session</span><span class="ruby-operator">::</span><span class="ruby-constant">Pool</span>, :<span class="ruby-identifier">expire_after</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2592000</span>
<span class="ruby-identifier">use</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Protection</span><span class="ruby-operator">::</span><span class="ruby-constant">RemoteToken</span>
<span class="ruby-identifier">use</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Protection</span><span class="ruby-operator">::</span><span class="ruby-constant">SessionHijacking</span>
</pre>

<p>更多<a
href="https://github.com/sinatra/sinatra#configuring-attack-protection">安全防护配置</a>的信息。</p>

<h3 id="label-E4-B8-AD-E6-96-AD-E8-AF-B7-E6-B1-82">中断请求<span><a href="#label-E4-B8-AD-E6-96-AD-E8-AF-B7-E6-B1-82">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>要想在过滤器或路由中立即中断一个请求：</p>

<pre class="ruby"><span class="ruby-identifier">halt</span>
</pre>

<p>你也可以指定中断时的状态码：</p>

<pre class="ruby"><span class="ruby-identifier">halt</span> <span class="ruby-value">410</span>
</pre>

<p>或者响应主体：</p>

<pre class="ruby"><span class="ruby-identifier">halt</span> <span class="ruby-string">&#39;this will be the body&#39;</span>
</pre>

<p>或者同时指定两者：</p>

<pre class="ruby"><span class="ruby-identifier">halt</span> <span class="ruby-value">401</span>, <span class="ruby-string">&#39;go away!&#39;</span>
</pre>

<p>也可以指定响应首部：</p>

<pre class="ruby"><span class="ruby-identifier">halt</span> <span class="ruby-value">402</span>, {<span class="ruby-string">&#39;Content-Type&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;text/plain&#39;</span>}, <span class="ruby-string">&#39;revenge&#39;</span>
</pre>

<p>当然也可以使用模板：</p>

<pre class="ruby"><span class="ruby-identifier">halt</span> <span class="ruby-identifier">erb</span>(:<span class="ruby-identifier">error</span>)
</pre>

<h3 id="label-E4-BC-A0-E9-80-92-E8-AF-B7-E6-B1-82">传递请求<span><a href="#label-E4-BC-A0-E9-80-92-E8-AF-B7-E6-B1-82">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>一个路由可以放弃对请求的处理并将处理让给下一个匹配的路由，这要通过 <code>pass</code> 实现：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/guess/:who&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">pass</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;who&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;Frank&#39;</span>
  <span class="ruby-string">&#39;You got me!&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/guess/*&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;You missed!&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>执行 <code>pass</code> 后，控制流从该路由代码块直接退出，并继续前进到下一个匹配的路由。 如果没有匹配的路由，将返回 404。</p>

<h3 id="label-E8-A7-A6-E5-8F-91-E5-8F-A6-E4-B8-80-E4-B8-AA-E8-B7-AF-E7-94-B1">触发另一个路由<span><a href="#label-E8-A7-A6-E5-8F-91-E5-8F-A6-E4-B8-80-E4-B8-AA-E8-B7-AF-E7-94-B1">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>有些时候，<code>pass</code> 并不是你想要的，你希望得到的是调用另一个路由的结果。 使用 <code>call</code>
就可以做到这一点:</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">status</span>, <span class="ruby-identifier">headers</span>, <span class="ruby-identifier">body</span> = <span class="ruby-identifier">call</span> <span class="ruby-identifier">env</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-string">&quot;PATH_INFO&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;/bar&#39;</span>)
  [<span class="ruby-identifier">status</span>, <span class="ruby-identifier">headers</span>, <span class="ruby-identifier">body</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span>:<span class="ruby-identifier">upcase</span>)]
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/bar&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;bar&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>请注意在以上例子中，你只需简单地移动 <code>&quot;bar&quot;</code> 到一个被 <code>/foo</code> 和
<code>/bar</code> 同时使用的辅助方法中， 就可以简化测试和增加性能。</p>

<p>如果你希望请求发送到同一个应用，而不是应用副本，应使用 <code>call!</code> 而不是 <code>call</code>。</p>

<p>如果想更多了解关于 <code>call</code> 的信息，请查看 <a
href="../../../../../../Rack.html">Rack</a> 规范。</p>

<h3 id="label-E8-AE-BE-E7-BD-AE-E5-93-8D-E5-BA-94-E4-B8-BB-E4-BD-93-E3-80-81-E7-8A-B6-E6-80-81-E7-A0-81-E5-92-8C-E5-93-8D-E5-BA-94-E9-A6-96-E9-83-A8">设置响应主体、状态码和响应首部<span><a href="#label-E8-AE-BE-E7-BD-AE-E5-93-8D-E5-BA-94-E4-B8-BB-E4-BD-93-E3-80-81-E7-8A-B6-E6-80-81-E7-A0-81-E5-92-8C-E5-93-8D-E5-BA-94-E9-A6-96-E9-83-A8">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>推荐在路由代码块的返回值中设定状态码和响应主体。 但是，在某些场景下你可能想在别处设置响应主体，这时你可以使用 <code>body</code>
辅助方法。 设置之后，你可以在那以后使用该方法访问响应主体：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">body</span> <span class="ruby-string">&quot;bar&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">after</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-identifier">body</span>
<span class="ruby-keyword">end</span>
</pre>

<p>也可以传递一个代码块给 <code>body</code> 方法， 它会被 <a
href="../../../../../../Rack.html">Rack</a> 处理器执行（这可以用来实现流式传输，参见“返回值”）。</p>

<p>与响应主体类似，你也可以设定状态码和响应首部：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">status</span> <span class="ruby-value">418</span>
  <span class="ruby-identifier">headers</span>      <span class="ruby-string">&quot;Allow&quot;</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;BREW, POST, GET, PROPFIND, WHEN&quot;</span>,
    <span class="ruby-string">&quot;Refresh&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;Refresh: 20; http://www.ietf.org/rfc/rfc2324.txt&quot;</span>
  <span class="ruby-identifier">body</span> <span class="ruby-string">&quot;I&#39;m a tea pot!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>正如 <code>body</code> 方法，不带参数调用 <code>headers</code> 和 <code>status</code>
方法可以访问它们的当前值。</p>

<h3 id="label-E5-93-8D-E5-BA-94-E7-9A-84-E6-B5-81-E5-BC-8F-E4-BC-A0-E8-BE-93">响应的流式传输<span><a href="#label-E5-93-8D-E5-BA-94-E7-9A-84-E6-B5-81-E5-BC-8F-E4-BC-A0-E8-BE-93">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>有时你可能想在完全生成响应主体前返回数据。 更极端的情况是，你希望在客户端关闭连接前一直发送数据。 为满足这些需求，可以使用
<code>stream</code> 辅助方法而不必重新造轮子：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">stream</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">out</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;It&#39;s gonna be legen -\n&quot;</span>
    <span class="ruby-identifier">sleep</span> <span class="ruby-value">0.5</span>
    <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot; (wait for it) \n&quot;</span>
    <span class="ruby-identifier">sleep</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;- dary!\n&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p><code>stream</code> 辅助方法允许你实现流式 API 和 <a
href="https://w3c.github.io/eventsource/">服务器端发送事件</a>， 同时它也是实现 <a
href="https://en.wikipedia.org/wiki/WebSocket">WebSockets</a> 的基础。
如果你应用的部分（不是全部）内容依赖于访问缓慢的资源，它也可以用来提高并发能力。</p>

<p>请注意流式传输，尤其是并发请求数，高度依赖于应用所使用的服务器。 一些服务器可能根本不支持流式传输。 如果服务器不支持，传递给
<code>stream</code> 方法的代码块执行完毕之后，响应主体会一次性地发送给客户端。 Shotgun 完全不支持流式传输。</p>

<p>如果 <code>:keep_open</code> 作为可选参数传递给 <code>stream</code> 方法，将不会在流对象上调用
<code>close</code> 方法， 这允许你在控制流的下游某处手动关闭。该参数只对事件驱动的服务器（如 <a
href="../../../../../../Thin.html">Thin</a> 和 Rainbows）生效。 其它服务器仍会关闭流式传输：</p>

<pre class="ruby"><span class="ruby-comment"># 长轮询</span>

<span class="ruby-identifier">set</span> :<span class="ruby-identifier">server</span>, :<span class="ruby-identifier">thin</span>
<span class="ruby-identifier">connections</span> = []

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/subscribe&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># 在服务器端的事件中注册客户端</span>
  <span class="ruby-identifier">stream</span>(:<span class="ruby-identifier">keep_open</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">out</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">connections</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">out</span>
    <span class="ruby-comment"># 清除关闭的连接</span>
    <span class="ruby-identifier">connections</span>.<span class="ruby-identifier">reject!</span>(<span class="ruby-operator">&amp;</span>:<span class="ruby-identifier">closed?</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">post</span> <span class="ruby-string">&#39;/:message&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">connections</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">out</span><span class="ruby-operator">|</span>
    <span class="ruby-comment"># 通知客户端有条新消息</span>
    <span class="ruby-identifier">out</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;message&#39;</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;\n&quot;</span>

    <span class="ruby-comment"># 使客户端重新连接</span>
    <span class="ruby-identifier">out</span>.<span class="ruby-identifier">close</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># 确认</span>
  <span class="ruby-string">&quot;message received&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E6-97-A5-E5-BF-97">日志<span><a href="#label-E6-97-A5-E5-BF-97">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>在请求作用域下，<code>logger</code> 辅助方法会返回一个 <code>Logger</code> 类的实例：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span> <span class="ruby-string">&quot;loading data&quot;</span>
  <span class="ruby-comment"># ...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>该 <code>logger</code> 方法会自动参考 <a
href="../../../../../../Rack.html">Rack</a> 处理器的日志设置。
若日志被禁用，该方法会返回一个无关痛痒的对象，所以你完全不必担心这会影响路由和过滤器。</p>

<p>注意只有 <code>Sinatra::Application</code> 默认开启了日志，若你的应用继承自
<code>Sinatra::Base</code>， 很可能需要手动开启：</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">MyApp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">configure</span> :<span class="ruby-identifier">production</span>, :<span class="ruby-identifier">development</span> <span class="ruby-keyword">do</span>
    <span class="ruby-identifier">enable</span> :<span class="ruby-identifier">logging</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>为避免使用任何与日志有关的中间件，需要将 <code>logging</code> 设置项设为 <code>nil</code>。
然而，在这种情况下，<code>logger</code> 辅助方法会返回 <code>nil</code>。
一种常见的使用场景是你想要使用自己的日志工具。 <a
href="../../../../../../Sinatra.html">Sinatra</a> 会使用
<code>env['rack.logger']</code> 的值作为日志工具，无论该值是什么。</p>

<h3 id="label-E5-AA-92-E4-BD-93-E7-B1-BB-E5-9E-8B">媒体类型<span><a href="#label-E5-AA-92-E4-BD-93-E7-B1-BB-E5-9E-8B">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>使用 <code>send_file</code> 或者静态文件的时候，Sinatra 可能不会识别你的媒体类型。 使用
<code>mime_type</code> 通过文件扩展名来注册媒体类型：</p>

<pre class="ruby"><span class="ruby-identifier">mime_type</span> :<span class="ruby-identifier">foo</span>, <span class="ruby-string">&#39;text/foo&#39;</span>
</pre>

<p>你也可以使用 <code>content_type</code> 辅助方法：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">content_type</span> :<span class="ruby-identifier">foo</span>
  <span class="ruby-string">&quot;foo foo foo&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E7-94-9F-E6-88-90+URL">生成 URL<span><a href="#label-E7-94-9F-E6-88-90+URL">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>为了生成 URL，你应当使用 <code>url</code> 辅助方法，例如，在 Haml 中：</p>

<pre class="ruby"><span class="ruby-operator">%</span>{:<span class="ruby-identifier">href</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">url</span>(<span class="ruby-string">&#39;/foo&#39;</span>)} <span class="ruby-identifier">foo</span>
</pre>

<p>如果使用了反向代理和 <a href="../../../../../../Rack.html">Rack</a> 路由，生成 URL
的时候会考虑这些因素。</p>

<p>这个方法还有一个别名 <code>to</code> (见下面的例子)。</p>

<h3 id="label-E6-B5-8F-E8-A7-88-E5-99-A8-E9-87-8D-E5-AE-9A-E5-90-91">浏览器重定向<span><a href="#label-E6-B5-8F-E8-A7-88-E5-99-A8-E9-87-8D-E5-AE-9A-E5-90-91">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>你可以通过 <code>redirect</code> 辅助方法触发浏览器重定向：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">redirect</span> <span class="ruby-identifier">to</span>(<span class="ruby-string">&#39;/bar&#39;</span>)
<span class="ruby-keyword">end</span>
</pre>

<p>其他参数的用法，与 <code>halt</code> 相同：</p>

<pre class="ruby"><span class="ruby-identifier">redirect</span> <span class="ruby-identifier">to</span>(<span class="ruby-string">&#39;/bar&#39;</span>), <span class="ruby-value">303</span>
<span class="ruby-identifier">redirect</span> <span class="ruby-string">&#39;http://www.google.com/&#39;</span>, <span class="ruby-string">&#39;wrong place, buddy&#39;</span>
</pre>

<p>用 <code>redirect back</code> 可以把用户重定向到原始页面：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;&lt;a href=&#39;/bar&#39;&gt;do something&lt;/a&gt;&quot;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/bar&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">do_something</span>
  <span class="ruby-identifier">redirect</span> <span class="ruby-identifier">back</span>
<span class="ruby-keyword">end</span>
</pre>

<p>如果想传递参数给 redirect，可以用查询字符串：</p>

<pre class="ruby"><span class="ruby-identifier">redirect</span> <span class="ruby-identifier">to</span>(<span class="ruby-string">&#39;/bar?sum=42&#39;</span>)
</pre>

<p>或者使用会话：</p>

<pre class="ruby"><span class="ruby-identifier">enable</span> :<span class="ruby-identifier">sessions</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">session</span>[<span class="ruby-string">&#39;secret&#39;</span>] = <span class="ruby-string">&#39;foo&#39;</span>
  <span class="ruby-identifier">redirect</span> <span class="ruby-identifier">to</span>(<span class="ruby-string">&#39;/bar&#39;</span>)
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/bar&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">session</span>[<span class="ruby-string">&#39;secret&#39;</span>]
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E7-BC-93-E5-AD-98-E6-8E-A7-E5-88-B6">缓存控制<span><a href="#label-E7-BC-93-E5-AD-98-E6-8E-A7-E5-88-B6">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>正确设置响应首部是合理利用 HTTP 缓存的基础。</p>

<p>可以这样设定 Cache-Control 首部字段：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">cache_control</span> :<span class="ruby-identifier">public</span>
  <span class="ruby-string">&quot;cache it!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>核心提示: 应当在 <code>before</code> 过滤器中设定缓存。</p>

<pre class="ruby"><span class="ruby-identifier">before</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">cache_control</span> :<span class="ruby-identifier">public</span>, :<span class="ruby-identifier">must_revalidate</span>, :<span class="ruby-identifier">max_age</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">60</span>
<span class="ruby-keyword">end</span>
</pre>

<p>如果你使用 <code>expires</code> 辅助方法设定响应的响应首部， 会自动设定 <code>Cache-Control</code>
字段：</p>

<pre class="ruby"><span class="ruby-identifier">before</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">expires</span> <span class="ruby-value">500</span>, :<span class="ruby-identifier">public</span>, :<span class="ruby-identifier">must_revalidate</span>
<span class="ruby-keyword">end</span>
</pre>

<p>为了合理使用缓存，你应该考虑使用 <code>etag</code> 或 <code>last_modified</code> 方法。
推荐在执行繁重任务<em>之前</em>使用这些辅助方法，这样一来， 如果客户端在缓存中已经有相关内容，就会立即得到响应：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/article/:id&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-ivar">@article</span> = <span class="ruby-constant">Article</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;id&#39;</span>]
  <span class="ruby-identifier">last_modified</span> <span class="ruby-ivar">@article</span>.<span class="ruby-identifier">updated_at</span>
  <span class="ruby-identifier">etag</span> <span class="ruby-ivar">@article</span>.<span class="ruby-identifier">sha1</span>
  <span class="ruby-identifier">erb</span> :<span class="ruby-identifier">article</span>
<span class="ruby-keyword">end</span>
</pre>

<p>也可以使用 <a
href="https://en.wikipedia.org/wiki/HTTP_ETag#Strong_and_weak_validation">weak
ETag</a>：</p>

<pre class="ruby"><span class="ruby-identifier">etag</span> <span class="ruby-ivar">@article</span>.<span class="ruby-identifier">sha1</span>, :<span class="ruby-identifier">weak</span>
</pre>

<p>这些辅助方法并不会为你做任何缓存，而是将必要的信息发送给你的缓存。 如果你正在寻找快捷的反向代理缓存方案，可以尝试 <a
href="https://github.com/rtomayko/rack-cache">rack-cache</a>：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&quot;rack/cache&quot;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&quot;sinatra&quot;</span>

<span class="ruby-identifier">use</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Cache</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">cache_control</span> :<span class="ruby-identifier">public</span>, :<span class="ruby-identifier">max_age</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">36000</span>
  <span class="ruby-identifier">sleep</span> <span class="ruby-value">5</span>
  <span class="ruby-string">&quot;hello&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>使用 <code>:statis_cache_control</code> 设置（见下文）为静态文件添加
<code>Cache-Control</code> 首部字段。</p>

<p>根据 RFC 2616，如果 If-Match 或 If-None-Match 首部设置为 <code>*</code>，根据所请求的资源存在与否，
你的应用应当有不同的行为。 <a href="../../../../../../Sinatra.html">Sinatra</a> 假设安全请求（如
GET）和幂等性请求（如 PUT）所访问的资源是已经存在的， 而其它请求（如 POST 请求）所访问的资源是新资源。 你可以通过传入
<code>:new_resource</code> 选项改变这一行为。</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/create&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">etag</span> <span class="ruby-string">&#39;&#39;</span>, :<span class="ruby-identifier">new_resource</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
  <span class="ruby-constant">Article</span>.<span class="ruby-identifier">create</span>
  <span class="ruby-identifier">erb</span> :<span class="ruby-identifier">new_article</span>
<span class="ruby-keyword">end</span>
</pre>

<p>如果你仍想使用 weak ETag，可以传入一个 <code>:kind</code> 选项：</p>

<pre class="ruby"><span class="ruby-identifier">etag</span> <span class="ruby-string">&#39;&#39;</span>, :<span class="ruby-identifier">new_resource</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, :<span class="ruby-identifier">kind</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">weak</span>
</pre>

<h3 id="label-E5-8F-91-E9-80-81-E6-96-87-E4-BB-B6">发送文件<span><a href="#label-E5-8F-91-E9-80-81-E6-96-87-E4-BB-B6">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>为了将文件的内容作为响应返回，可以使用 <code>send_file</code> 辅助方法：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">send_file</span> <span class="ruby-string">&#39;foo.png&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>该辅助方法接受一些选项:</p>

<pre class="ruby"><span class="ruby-identifier">send_file</span> <span class="ruby-string">&#39;foo.png&#39;</span>, :<span class="ruby-identifier">type</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">jpg</span>
</pre>

<p>可用的选项有:</p>
<dl>
  <dt>filename</dt>
  <dd>响应中使用的文件名，默认是真实的文件名。</dd>

  <dt>last_modified</dt>
  <dd>Last-Modified 响应首部的值，默认是文件的 mtime （修改时间）。</dd>

  <dt>type</dt>
  <dd>Content-Type 响应首部的值，如果未指定，会根据文件扩展名猜测。</dd>

  <dt>disposition</dt>
  <dd>
    Content-Disposition 响应首部的值，
    可选的值有： <tt>nil</tt> (默认)、<tt>:attachment</tt> 和
    <tt>:inline</tt>
  </dd>

  <dt>length</dt>
  <dd>Content-Length 响应首部的值，默认是文件的大小。</dd>

  <dt>status</dt>
  <dd>
    将要返回的状态码。当以一个静态文件作为错误页面时，这很有用。

    如果 Rack 处理器支持的话，Ruby 进程也能使用除 streaming 以外的方法。
    如果你使用这个辅助方法， Sinatra会自动处理 range 请求。
  </dd>
</dl>
<h3 id="label-E8-AE-BF-E9-97-AE-E8-AF-B7-E6-B1-82-E5-AF-B9-E8-B1-A1">访问请求对象<span><a href="#label-E8-AE-BF-E9-97-AE-E8-AF-B7-E6-B1-82-E5-AF-B9-E8-B1-A1">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>传入的请求对象可以在请求层（过滤器、路由、错误处理器内部）通过 <code>request</code> 方法访问：</p>

<pre class="ruby"><span class="ruby-comment"># 在 http://example.com/example 上运行的应用</span>
<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">t</span> = <span class="ruby-node">%w[text/css text/html application/javascript]</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">accept</span>              <span class="ruby-comment"># [&#39;text/html&#39;, &#39;  *&#39;]</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">accept?</span> <span class="ruby-string">&#39;text/xml&#39;</span>  <span class="ruby-comment"># true</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">preferred_type</span>(<span class="ruby-identifier">t</span>)   <span class="ruby-comment"># &#39;text/html&#39;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">body</span>                <span class="ruby-comment"># 客户端设定的请求主体（见下文）</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">scheme</span>              <span class="ruby-comment"># &quot;http&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">script_name</span>         <span class="ruby-comment"># &quot;/example&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_info</span>           <span class="ruby-comment"># &quot;/foo&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">port</span>                <span class="ruby-comment"># 80</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">request_method</span>      <span class="ruby-comment"># &quot;GET&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">query_string</span>        <span class="ruby-comment"># &quot;&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">content_length</span>      <span class="ruby-comment"># request.body 的长度</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">media_type</span>          <span class="ruby-comment"># request.body 的媒体类型</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">host</span>                <span class="ruby-comment"># &quot;example.com&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">get?</span>                <span class="ruby-comment"># true (其它动词也具有类似方法)</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">form_data?</span>          <span class="ruby-comment"># false</span>
  <span class="ruby-identifier">request</span>[<span class="ruby-string">&quot;some_param&quot;</span>]       <span class="ruby-comment"># some_param 参数的值。[] 是访问 params hash 的捷径</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">referrer</span>            <span class="ruby-comment"># 客户端的 referrer 或者 &#39;/&#39;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">user_agent</span>          <span class="ruby-comment"># 用户代理 (:agent 条件使用该值)</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">cookies</span>             <span class="ruby-comment"># 浏览器 cookies 哈希</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">xhr?</span>                <span class="ruby-comment"># 这是否是 ajax 请求？</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">url</span>                 <span class="ruby-comment"># &quot;http://example.com/example/foo&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">path</span>                <span class="ruby-comment"># &quot;/example/foo&quot;</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">ip</span>                  <span class="ruby-comment"># 客户端 IP 地址</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">secure?</span>             <span class="ruby-comment"># false （如果是 ssl 则为 true）</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">forwarded?</span>          <span class="ruby-comment"># true （如果是运行在反向代理之后）</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">env</span>                 <span class="ruby-comment"># Rack 中使用的未处理的 env hash</span>
<span class="ruby-keyword">end</span>
</pre>

<p>一些选项，例如 <code>script_name</code> 或者 <code>path_info</code> 也是可写的：</p>

<pre class="ruby"><span class="ruby-identifier">before</span> { <span class="ruby-identifier">request</span>.<span class="ruby-identifier">path_info</span> = <span class="ruby-string">&quot;/&quot;</span> }

<span class="ruby-identifier">get</span> <span class="ruby-string">&quot;/&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&quot;all requests end up here&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p><code>request.body</code> 是一个 IO 或者 StringIO 对象：</p>

<pre class="ruby"><span class="ruby-identifier">post</span> <span class="ruby-string">&quot;/api&quot;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">request</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">rewind</span>  <span class="ruby-comment"># 如果已经有人读了它</span>
  <span class="ruby-identifier">data</span> = <span class="ruby-constant">JSON</span>.<span class="ruby-identifier">parse</span> <span class="ruby-identifier">request</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">read</span>
  <span class="ruby-node">&quot;Hello #{data[&#39;name&#39;]}!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E9-99-84-E4-BB-B6">附件<span><a href="#label-E9-99-84-E4-BB-B6">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>你可以使用 <code>attachment</code> 辅助方法来告诉浏览器响应应当被写入磁盘而不是在浏览器中显示。</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">attachment</span>
  <span class="ruby-string">&quot;store it!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>你也可以传递给该方法一个文件名：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">attachment</span> <span class="ruby-string">&quot;info.txt&quot;</span>
  <span class="ruby-string">&quot;store it!&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E5-A4-84-E7-90-86-E6-97-A5-E6-9C-9F-E5-92-8C-E6-97-B6-E9-97-B4">处理日期和时间<span><a href="#label-E5-A4-84-E7-90-86-E6-97-A5-E6-9C-9F-E5-92-8C-E6-97-B6-E9-97-B4">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="../../../../../../Sinatra.html">Sinatra</a> 提供了一个
<code>time_for</code> 辅助方法，其目的是根据给定的值生成 <a
href="../../../../../../Time.html">Time</a> 对象。 该方法也能够转换
<code>DateTime</code>、<code>Date</code> 和类似的类：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">pass</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">time_for</span>(<span class="ruby-string">&#39;Dec 23, 2012&#39;</span>)
  <span class="ruby-string">&quot;still time&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p><code>expires</code>、<code>last_modified</code> 和类似方法都在内部使用了该方法。
因此，通过在应用中重写 <code>time_for</code> 方法，你可以轻松地扩展这些方法的行为：</p>

<pre class="ruby"><span class="ruby-identifier">helpers</span> <span class="ruby-keyword">do</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">time_for</span>(<span class="ruby-identifier">value</span>)
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">value</span>
    <span class="ruby-keyword">when</span> :<span class="ruby-identifier">yesterday</span> <span class="ruby-keyword">then</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">-</span> <span class="ruby-value">24</span><span class="ruby-operator">*</span><span class="ruby-value">60</span><span class="ruby-operator">*</span><span class="ruby-value">60</span>
    <span class="ruby-keyword">when</span> :<span class="ruby-identifier">tomorrow</span> <span class="ruby-keyword">then</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span> <span class="ruby-operator">+</span> <span class="ruby-value">24</span><span class="ruby-operator">*</span><span class="ruby-value">60</span><span class="ruby-operator">*</span><span class="ruby-value">60</span>
    <span class="ruby-keyword">else</span> <span class="ruby-keyword">super</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">last_modified</span> :<span class="ruby-identifier">yesterday</span>
  <span class="ruby-identifier">expires</span> :<span class="ruby-identifier">tomorrow</span>
  <span class="ruby-string">&quot;hello&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E6-9F-A5-E6-89-BE-E6-A8-A1-E6-9D-BF-E6-96-87-E4-BB-B6">查找模板文件<span><a href="#label-E6-9F-A5-E6-89-BE-E6-A8-A1-E6-9D-BF-E6-96-87-E4-BB-B6">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><code>find_template</code> 辅助方法用于在渲染时查找模板文件：</p>

<pre class="ruby"><span class="ruby-identifier">find_template</span> <span class="ruby-identifier">settings</span>.<span class="ruby-identifier">views</span>, <span class="ruby-string">&#39;foo&#39;</span>, <span class="ruby-constant">Tilt</span>[:<span class="ruby-identifier">haml</span>] <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;could be #{file}&quot;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>这其实并不是很有用，除非你需要重载这个方法来实现你自己的查找机制。 比如，如果你想使用不只一个视图目录：</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">views</span>, [<span class="ruby-string">&#39;views&#39;</span>, <span class="ruby-string">&#39;templates&#39;</span>]

<span class="ruby-identifier">helpers</span> <span class="ruby-keyword">do</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">find_template</span>(<span class="ruby-identifier">views</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">engine</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    <span class="ruby-constant">Array</span>(<span class="ruby-identifier">views</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-keyword">super</span>(<span class="ruby-identifier">v</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">engine</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) }
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>另一个例子是对不同的引擎使用不同的目录:</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">views</span>, :<span class="ruby-identifier">sass</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;views/sass&#39;</span>, :<span class="ruby-identifier">haml</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;templates&#39;</span>, :<span class="ruby-identifier">default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;views&#39;</span>

<span class="ruby-identifier">helpers</span> <span class="ruby-keyword">do</span>
  <span class="ruby-keyword">def</span> <span class="ruby-identifier">find_template</span>(<span class="ruby-identifier">views</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">engine</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    <span class="ruby-identifier">_</span>, <span class="ruby-identifier">folder</span> = <span class="ruby-identifier">views</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">engine</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Tilt</span>[<span class="ruby-identifier">k</span>] }
    <span class="ruby-identifier">folder</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">views</span>[:<span class="ruby-identifier">default</span>]
    <span class="ruby-keyword">super</span>(<span class="ruby-identifier">folder</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">engine</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>你可以很容易地封装成一个扩展，然后与他人分享！</p>

<p>请注意 <code>find_template</code> 并不会检查文件是否存在，而是为任何可能的路径调用传入的代码块。
这并不会导致性能问题，因为 <code>render</code> 会在找到文件的时候马上使用 <code>break</code>。
同样的，模板的路径（和内容）会在 development 以外的模式下被缓存。 你应该时刻提醒自己这一点， 如果你真的想写一个非常疯狂的方法的话。</p>

<h2 id="label-E9-85-8D-E7-BD-AE">配置<span><a href="#label-E9-85-8D-E7-BD-AE">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>在启动时运行一次，在任何环境下都是如此：</p>

<pre class="ruby"><span class="ruby-identifier">configure</span> <span class="ruby-keyword">do</span>
  <span class="ruby-comment"># 设置一个选项</span>
  <span class="ruby-identifier">set</span> :<span class="ruby-identifier">option</span>, <span class="ruby-string">&#39;value&#39;</span>

  <span class="ruby-comment"># 设置多个选项</span>
  <span class="ruby-identifier">set</span> :<span class="ruby-identifier">a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, :<span class="ruby-identifier">b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>

  <span class="ruby-comment"># 等同于 `set :option, true`</span>
  <span class="ruby-identifier">enable</span> :<span class="ruby-identifier">option</span>

  <span class="ruby-comment"># 等同于 `set :option, false`</span>
  <span class="ruby-identifier">disable</span> :<span class="ruby-identifier">option</span>

  <span class="ruby-comment"># 也可以用代码块做动态设置</span>
  <span class="ruby-identifier">set</span>(:<span class="ruby-identifier">css_dir</span>) { <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">views</span>, <span class="ruby-string">&#39;css&#39;</span>) }
<span class="ruby-keyword">end</span>
</pre>

<p>只有当环境 (<code>APP_ENV</code> 环境变量) 被设定为 <code>:production</code> 时才运行：</p>

<pre class="ruby"><span class="ruby-identifier">configure</span> :<span class="ruby-identifier">production</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>当环境被设定为 <code>:production</code> 或者 <code>:test</code> 时运行：</p>

<pre class="ruby"><span class="ruby-identifier">configure</span> :<span class="ruby-identifier">production</span>, :<span class="ruby-identifier">test</span> <span class="ruby-keyword">do</span>
  <span class="ruby-operator">...</span>
<span class="ruby-keyword">end</span>
</pre>

<p>你可以用 <code>settings</code> 访问这些配置项：</p>

<pre class="ruby"><span class="ruby-identifier">configure</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">set</span> :<span class="ruby-identifier">foo</span>, <span class="ruby-string">&#39;bar&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">settings</span>.<span class="ruby-identifier">foo?</span> <span class="ruby-comment"># =&gt; true</span>
  <span class="ruby-identifier">settings</span>.<span class="ruby-identifier">foo</span>  <span class="ruby-comment"># =&gt; &#39;bar&#39;</span>
  <span class="ruby-operator">...</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E9-85-8D-E7-BD-AE-E6-94-BB-E5-87-BB-E9-98-B2-E6-8A-A4">配置攻击防护<span><a href="#label-E9-85-8D-E7-BD-AE-E6-94-BB-E5-87-BB-E9-98-B2-E6-8A-A4">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="../../../../../../Sinatra.html">Sinatra</a> 使用 <a
href="https://github.com/sinatra/rack-protection#readme">Rack::Protection</a>
来抵御常见的攻击。你可以轻易地禁用该行为（但这会大大增加应用被攻击的概率）。</p>

<pre class="ruby"><span class="ruby-identifier">disable</span> :<span class="ruby-identifier">protection</span>
</pre>

<p>为了绕过某单层防护，可以设置 <code>protection</code> 为一个选项 hash：</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">protection</span>, :<span class="ruby-identifier">except</span> =<span class="ruby-operator">&gt;</span> :<span class="ruby-identifier">path_traversal</span>
</pre>

<p>你可以传入一个数组，以禁用一系列防护措施：</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">protection</span>, :<span class="ruby-identifier">except</span> =<span class="ruby-operator">&gt;</span> [:<span class="ruby-identifier">path_traversal</span>, :<span class="ruby-identifier">session_hijacking</span>]
</pre>

<p>默认地，如果 <code>:sessions</code> 是启用的，Sinatra 只会使用基于会话的防护措施。
当然，有时你可能想根据自己的需要设置会话。 在这种情况下，你可以通过传入 <code>:session</code> 选项来开启基于会话的防护。</p>

<pre class="ruby"><span class="ruby-identifier">use</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Session</span><span class="ruby-operator">::</span><span class="ruby-constant">Pool</span>
<span class="ruby-identifier">set</span> :<span class="ruby-identifier">protection</span>, :<span class="ruby-identifier">session</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>
</pre>

<h3 id="label-E5-8F-AF-E9-80-89-E7-9A-84-E8-AE-BE-E7-BD-AE">可选的设置<span><a href="#label-E5-8F-AF-E9-80-89-E7-9A-84-E8-AE-BE-E7-BD-AE">&para;</a> <a href="#top">&uarr;</a></span></h3>
<dl>
  <dt>absolute_redirects</dt>
  <dd>
    如果被禁用，Sinatra 会允许使用相对路径重定向。
    然而这样的话，Sinatra 就不再遵守 RFC 2616 (HTTP 1.1), 该协议只允许绝对路径重定向。
  </dd>
  <dd>
    如果你的应用运行在一个未恰当设置的反向代理之后，你需要启用这个选项。
    注意 <tt>url</tt> 辅助方法仍然会生成绝对 URL，除非你传入<tt>false</tt> 作为第二参数。
  </dd>
  <dd>默认禁用。</dd>

  <dt>add_charset</dt>
  <dd>
    设置 <tt>content_type</tt> 辅助方法会自动为媒体类型加上字符集信息。
    你应该添加而不是覆盖这个选项:
    <tt>settings.add_charset << "application/foobar"</tt>
  </dd>

  <dt>app_file</dt>
  <dd>
    主应用文件的路径，用来检测项目的根路径， views 和 public 文件夹和内联模板。
  </dd>

  <dt>bind</dt>
  <dd>
    绑定的 IP 地址 (默认: <tt>0.0.0.0</tt>，开发环境下为 <tt>localhost</tt>)。
    仅对于内置的服务器有用。
  </dd>

  <dt>default_encoding</dt>
  <dd>默认编码 (默认为 <tt>"utf-8"</tt>)。</dd>

  <dt>dump_errors</dt>
  <dd>在日志中显示错误。</dd>

  <dt>environment</dt>
  <dd>
    当前环境，默认是 <tt>ENV['APP_ENV']</tt>，
    或者 <tt>"development"</tt> (如果 ENV['APP_ENV'] 不可用)。
  </dd>

  <dt>logging</dt>
  <dd>使用 logger。</dd>

  <dt>lock</dt>
  <dd>对每一个请求放置一个锁，只使用进程并发处理请求。</dd>
  <dd>如果你的应用不是线程安全则需启动。默认禁用。</dd>

  <dt>method_override</dt>
  <dd>
    使用 <tt>_method</tt> 魔法，以允许在不支持的浏览器中在使用 put/delete 方法提交表单。
  </dd>

  <dt>port</dt>
  <dd>监听的端口号。只对内置服务器有用。</dd>

  <dt>prefixed_redirects</dt>
  <dd>
    如果没有使用绝对路径，是否添加 <tt>request.script_name</tt> 到重定向请求。
    如果添加，<tt>redirect '/foo'</tt> 会和 <tt>redirect to('/foo')</tt> 相同。
    默认禁用。
  </dd>

  <dt>protection</dt>
  <dd>是否启用网络攻击防护。参见上面的保护部分</dd>

  <dt>public_dir</dt>
  <dd>public_folder 的别名。见下文。</dd>

  <dt>public_folder</dt>
  <dd>
    public 文件存放的路径。只有启用了静态文件服务（见下文的 <tt>static</tt>）才会使用。
    如果未设置，默认从 <tt>app_file</tt> 推断。
  </dd>

  <dt>reload_templates</dt>
  <dd>
    是否每个请求都重新载入模板。在开发模式下开启。
  </dd>

  <dt>root</dt>
  <dd>到项目根目录的路径。默认从 <tt>app_file</tt> 设置推断。</dd>

  <dt>raise_errors</dt>
  <dd>
    抛出异常（会停止应用）。
    当 <tt>environment</tt> 设置为 <tt>"test"</tt> 时会默认开启，其它环境下默认禁用。
  </dd>

  <dt>run</dt>
  <dd>如果启用，Sinatra 会负责 web 服务器的启动。若使用 rackup 或其他方式则不要启用。</dd>

  <dt>running</dt>
  <dd>内置的服务器在运行吗？ 不要修改这个设置！</dd>

  <dt>server</dt>
  <dd>服务器，或用于内置服务器的服务器列表。顺序表明了优先级，默认顺序依赖 Ruby 实现。</dd>

  <dt>sessions</dt>
  <dd>
    使用 <tt>Rack::Session::Cookie</tt>，启用基于 cookie 的会话。
    查看“使用会话”部分以获得更多信息。
  </dd>

  <dt>show_exceptions</dt>
  <dd>
    当有异常发生时，在浏览器中显示一个 stack trace。
    当 <tt>environment</tt> 设置为 <tt>"development"</tt> 时，默认启用，
    否则默认禁用。
  </dd>
  <dd>
    也可以设置为 <tt>:after_handler</tt>，
    这会在浏览器中显示 stack trace 之前触发应用级别的错误处理。
  </dd>

  <dt>static</dt>
  <dd>决定 Sinatra 是否服务静态文件。</dd>
  <dd>当服务器能够自行服务静态文件时，会禁用。</dd>
  <dd>禁用会增强性能。</dd>
  <dd>在经典风格中默认启用，在模块化应用中默认禁用。</dd>

  <dt>static_cache_control</dt>
  <dd>
    当 Sinatra 提供静态文件服务时，设置此选项为响应添加 <tt>Cache-Control</tt> 首部。
    使用 <tt>cache_control</tt> 辅助方法。默认禁用。
  </dd>
  <dd>
    当设置多个值时使用数组：
    <tt>set :static_cache_control, [:public, :max_age => 300]</tt>
  </dd>

  <dt>threaded</dt>
  <dd>
    若设置为 <tt>true</tt>，会告诉 Thin 使用 <tt>EventMachine.defer</tt> 处理请求。
  </dd>

  <dt>traps</dt>
  <dd>Sinatra 是否应该处理系统信号。</dd>

  <dt>views</dt>
  <dd>views 文件夹的路径。若未设置则会根据 <tt>app_file</tt> 推断。</dd>

  <dt>x_cascade</dt>
  <dd>若没有路由匹配，是否设置 X-Cascade 首部。默认为 <tt>true</tt>。</dd>
</dl>
<h2 id="label-E7-8E-AF-E5-A2-83">环境<span><a href="#label-E7-8E-AF-E5-A2-83">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="../../../../../../Sinatra.html">Sinatra</a>
中有三种预先定义的环境：“development”、“production” 和 “test”。 环境可以通过
<code>APP_ENV</code> 环境变量设置。默认值为 “development”。 在开发环境下，每次请求都会重新加载所有模板， 特殊的
<code>not_found</code> 和 <code>error</code> 错误处理器会在浏览器中显示 stack trace。
在测试和生产环境下，模板默认会缓存。</p>

<p>在不同的环境下运行，设置 <code>APP_ENV</code> 环境变量：</p>

<pre class="ruby"><span class="ruby-constant">APP_ENV</span>=<span class="ruby-identifier">production</span> <span class="ruby-identifier">ruby</span> <span class="ruby-identifier">my_app</span>.<span class="ruby-identifier">rb</span>
</pre>

<p>可以使用预定义的三种方法： <code>development?</code>、<code>test?</code> 和
<code>production?</code> 来检查当前环境：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">settings</span>.<span class="ruby-identifier">development?</span>
    <span class="ruby-string">&quot;development!&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-string">&quot;not development&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h2 id="label-E9-94-99-E8-AF-AF-E5-A4-84-E7-90-86">错误处理<span><a href="#label-E9-94-99-E8-AF-AF-E5-A4-84-E7-90-86">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>错误处理器在与路由和 before 过滤器相同的上下文中运行， 这意味着你可以使用许多好东西，比如 <code>haml</code>,
<code>erb</code>, <code>halt</code>，等等。</p>

<h3 id="label-E6-9C-AA-E6-89-BE-E5-88-B0">未找到<span><a href="#label-E6-9C-AA-E6-89-BE-E5-88-B0">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>当一个 <code>Sinatra::NotFound</code> 错误被抛出时，或者当响应的状态码是 404 时， 会调用
<code>not_found</code> 处理器：</p>

<pre class="ruby"><span class="ruby-identifier">not_found</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;This is nowhere to be found.&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E9-94-99-E8-AF-AF">错误<span><a href="#label-E9-94-99-E8-AF-AF">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>在任何路由代码块或过滤器抛出异常时，会调用 <code>error</code> 处理器。 但注意在开发环境下只有将 show exceptions
项设置为 <code>:after_handler</code> 时，才会生效。</p>

<pre class="ruby"><span class="ruby-identifier">set</span> :<span class="ruby-identifier">show_exceptions</span>, :<span class="ruby-identifier">after_handler</span>
</pre>

<p>可以用 <a href="../../../../../../Rack.html">Rack</a> 变量
<code>sinatra.error</code> 访问异常对象：</p>

<pre class="ruby"><span class="ruby-identifier">error</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Sorry there was a nasty error - &#39;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">env</span>[<span class="ruby-string">&#39;sinatra.error&#39;</span>].<span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span>
</pre>

<p>自定义错误：</p>

<pre class="ruby"><span class="ruby-identifier">error</span> <span class="ruby-constant">MyCustomError</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;So what happened was...&#39;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">env</span>[<span class="ruby-string">&#39;sinatra.error&#39;</span>].<span class="ruby-identifier">message</span>
<span class="ruby-keyword">end</span>
</pre>

<p>当下面的代码执行时：</p>

<pre class="ruby"><span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">raise</span> <span class="ruby-constant">MyCustomError</span>, <span class="ruby-string">&#39;something bad&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>你会得到错误信息：</p>

<pre>So what happened was... something bad</pre>

<p>或者，你也可以为状态码设置错误处理器：</p>

<pre class="ruby"><span class="ruby-identifier">error</span> <span class="ruby-value">403</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Access forbidden&#39;</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/secret&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-value">403</span>
<span class="ruby-keyword">end</span>
</pre>

<p>或者为某个范围内的状态码统一设置错误处理器：</p>

<pre class="ruby"><span class="ruby-identifier">error</span> <span class="ruby-value">400</span><span class="ruby-operator">..</span><span class="ruby-value">510</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Boom&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>在开发环境下，Sinatra会使用特殊的 <code>not_found</code> 和 <code>error</code> 处理器，
以便在浏览器中显示美观的 stack traces 和额外的调试信息。</p>

<h2 id="label-Rack+-E4-B8-AD-E9-97-B4-E4-BB-B6"><a href="../../../../../../Rack.html">Rack</a> 中间件<span><a href="#label-Rack+-E4-B8-AD-E9-97-B4-E4-BB-B6">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="../../../../../../Sinatra.html">Sinatra</a> 依赖 <a
href="http://rack.github.io/">Rack</a>, 一个面向 Ruby 网络框架的最小化标准接口。 <a
href="../../../../../../Rack.html">Rack</a>
最有趣的功能之一是支持“中间件”——位于服务器和你的应用之间的组件， 它们监控或操作 HTTP 请求/响应以提供多种常用功能。</p>

<p><a href="../../../../../../Sinatra.html">Sinatra</a> 通过顶层的 <code>use</code>
方法，让建立 <a href="../../../../../../Rack.html">Rack</a> 中间件管道异常简单：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;my_custom_middleware&#39;</span>

<span class="ruby-identifier">use</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Lint</span>
<span class="ruby-identifier">use</span> <span class="ruby-constant">MyCustomMiddleware</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/hello&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Hello World&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p><code>use</code> 的语义和在 <a
href="http://www.rubydoc.info/github/rack/rack/master/Rack/Builder">Rack::Builder</a>
DSL (在 rackup 文件中最频繁使用)中定义的完全一样。例如，<code>use</code> 方法接受 多个/可变参数，以及代码块：</p>

<pre class="ruby"><span class="ruby-identifier">use</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Auth</span><span class="ruby-operator">::</span><span class="ruby-constant">Basic</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">username</span>, <span class="ruby-identifier">password</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">username</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;admin&#39;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">password</span> <span class="ruby-operator">==</span> <span class="ruby-string">&#39;secret&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p><a href="../../../../../../Rack.html">Rack</a> 拥有有多种标准中间件，用于日志、调试、URL
路由、认证和会话处理。 根据配置，Sinatra 可以自动使用这里面的许多组件， 所以你一般不需要显式地 <code>use</code> 它们。</p>

<p>你可以在 <a href="https://github.com/rack/rack/tree/master/lib/rack">rack</a>、
<a href="https://github.com/rack/rack-contrib#readm">rack-contrib</a> 或 <a
href="https://github.com/rack/rack/wiki/List-of-Middleware">Rack wiki</a>
中找到有用的中间件。</p>

<h2 id="label-E6-B5-8B-E8-AF-95">测试<span><a href="#label-E6-B5-8B-E8-AF-95">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>可以使用任何基于 <a href="../../../../../../Rack.html">Rack</a>
的测试程序库或者框架来编写Sinatra的测试。 推荐使用 <a
href="http://www.rubydoc.info/github/brynary/rack-test/master/frames">Rack::Test</a>：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;my_sinatra_app&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;minitest/autorun&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;rack/test&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">MyAppTest</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Minitest</span><span class="ruby-operator">::</span><span class="ruby-constant">Test</span>
  <span class="ruby-identifier">include</span> <span class="ruby-constant">Rack</span><span class="ruby-operator">::</span><span class="ruby-constant">Test</span><span class="ruby-operator">::</span><span class="ruby-constant">Methods</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">app</span>
    <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_my_default</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Hello World!&#39;</span>, <span class="ruby-identifier">last_response</span>.<span class="ruby-identifier">body</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_with_params</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/meet&#39;</span>, :<span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Frank&#39;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&#39;Hello Frank!&#39;</span>, <span class="ruby-identifier">last_response</span>.<span class="ruby-identifier">body</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">def</span> <span class="ruby-identifier">test_with_rack_env</span>
    <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span>, {}, <span class="ruby-string">&#39;HTTP_USER_AGENT&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;Songbird&#39;</span>
    <span class="ruby-identifier">assert_equal</span> <span class="ruby-string">&quot;You&#39;re using Songbird!&quot;</span>, <span class="ruby-identifier">last_response</span>.<span class="ruby-identifier">body</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>注意：如果你使用 <a href="../../../../../../Sinatra.html">Sinatra</a>
的模块化风格，应该用你应用的类名替代 <code>Sinatra::Application</code>。</p>

<h2 id="label-Sinatra-3A-3ABase+-+-E4-B8-AD-E9-97-B4-E4-BB-B6-E3-80-81-E5-BA-93-E5-92-8C-E6-A8-A1-E5-9D-97-E5-8C-96-E5-BA-94-E7-94-A8">Sinatra::Base - 中间件、库和模块化应用<span><a href="#label-Sinatra-3A-3ABase+-+-E4-B8-AD-E9-97-B4-E4-BB-B6-E3-80-81-E5-BA-93-E5-92-8C-E6-A8-A1-E5-9D-97-E5-8C-96-E5-BA-94-E7-94-A8">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>在顶层定义你的应用很适合微型项目， 但是在构建可复用的组件（如 <a
href="../../../../../../Rack.html">Rack</a> 中间件、Rails metal、带服务器组件的库或 <a
href="../../../../../../Sinatra.html">Sinatra</a> 扩展）时， 却有相当大的缺陷。 顶层 DSL
认为你采用的是微型应用风格的配置 (例如：唯一应用文件、 <code>./public</code> 和 <code>./views</code>
目录、日志、异常细节页面等）。 如果你的项目不采用微型应用风格，应该使用 <code>Sinatra::Base</code>：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra/base&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">MyApp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">set</span> :<span class="ruby-identifier">sessions</span>, <span class="ruby-keyword">true</span>
  <span class="ruby-identifier">set</span> :<span class="ruby-identifier">foo</span>, <span class="ruby-string">&#39;bar&#39;</span>

  <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-string">&#39;Hello world!&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Sinatra::Base 的子类可以使用的方法实际上就是顶层 DSL 中可以使用的方法。 大部分顶层应用可以通过两方面的改变转换为
Sinatra::Base 组件：</p>

<p>你的文件应当引入 <code>sinatra/base</code> 而不是 <code>sinatra</code>； 否则，Sinatra 的所有
DSL 方法将会被导入主命名空间。</p>

<p>把应用的路由、错误处理器、过滤器和选项放在一个 Sinatra::Base 的子类中。</p>

<p><code>Sinatra::Base</code> 是一个白板。大部分选项（包括内置的服务器）默认是禁用的。 可以参考<a
href="http://www.sinatrarb.com/configuration.html">配置</a>
以查看可用选项的具体细节和它们的行为。如果你想让你的应用更像顶层定义的应用（即经典风格）， 你可以继承
<code>Sinatra::Applicaiton</code>。</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra/base&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">MyApp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>
  <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-string">&#39;Hello world!&#39;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E6-A8-A1-E5-9D-97-E5-8C-96-E9-A3-8E-E6-A0-BC+vs.+-E7-BB-8F-E5-85-B8-E9-A3-8E-E6-A0-BC">模块化风格 vs. 经典风格<span><a href="#label-E6-A8-A1-E5-9D-97-E5-8C-96-E9-A3-8E-E6-A0-BC+vs.+-E7-BB-8F-E5-85-B8-E9-A3-8E-E6-A0-BC">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>与通常的认识相反，经典风格并没有任何错误。 如果它适合你的应用，你不需要切换到模块化风格。</p>

<p>与模块化风格相比，经典风格的主要缺点在于，每个 Ruby 进程只能有一个 <a
href="../../../../../../Sinatra.html">Sinatra</a> 应用。 如果你计划使用多个 <a
href="../../../../../../Sinatra.html">Sinatra</a> 应用，应该切换到模块化风格。
你也完全可以混用模块化风格和经典风格。</p>

<p>如果从一种风格转换到另一种，你需要注意默认设置中的一些细微差别：</p>
<table>
  <tr>
    <th>设置</th>
    <th>经典风格</th>
    <th>模块化风格</th>
    <th>模块化风格</th>
  </tr>

  <tr>
    <td>app_file</td>
    <td>加载 sinatra 的文件</td>
    <td>继承 Sinatra::Base 的文件</td>
    <td>继承 Sinatra::Application 的文件</td>
  </tr>

  <tr>
    <td>run</td>
    <td>$0 == app_file</td>
    <td>false</td>
    <td>false</td>
  </tr>

  <tr>
    <td>logging</td>
    <td>true</td>
    <td>false</td>
    <td>true</td>
  </tr>

  <tr>
    <td>method_override</td>
    <td>true</td>
    <td>false</td>
    <td>true</td>
  </tr>

  <tr>
    <td>inline_templates</td>
    <td>true</td>
    <td>false</td>
    <td>true</td>
  </tr>

  <tr>
    <td>static</td>
    <td>true</td>
    <td>File.exist?(public_folder)</td>
    <td>true</td>
  </tr>
</table>
<h3 id="label-E8-BF-90-E8-A1-8C-E4-B8-80-E4-B8-AA-E6-A8-A1-E5-9D-97-E5-8C-96-E5-BA-94-E7-94-A8">运行一个模块化应用<span><a href="#label-E8-BF-90-E8-A1-8C-E4-B8-80-E4-B8-AA-E6-A8-A1-E5-9D-97-E5-8C-96-E5-BA-94-E7-94-A8">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>模块化应用的启动有两种常见方式，其中之一是使用 <code>run!</code> 方法主动启动:</p>

<pre class="ruby"><span class="ruby-comment"># my_app.rb</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra/base&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">MyApp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-comment"># ... 这里是应用代码 ...</span>

  <span class="ruby-comment"># 如果直接执行该文件，那么启动服务器</span>
  <span class="ruby-identifier">run!</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">app_file</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">$0</span>
<span class="ruby-keyword">end</span>
</pre>

<p>执行该文件就会启动服务器：</p>

<pre class="ruby"><span class="ruby-identifier">ruby</span> <span class="ruby-identifier">my_app</span>.<span class="ruby-identifier">rb</span>
</pre>

<p>另一种方式是使用 <code>config.ru</code> 文件，这种方式允许你使用任何 <a
href="../../../../../../Rack.html">Rack</a> 处理器：</p>

<pre class="ruby"><span class="ruby-comment"># config.ru （用 rackup 启动）</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;./my_app&#39;</span>
<span class="ruby-identifier">run</span> <span class="ruby-constant">MyApp</span>
</pre>

<p>运行：</p>

<pre>rackup -p 4567</pre>

<h3 id="label-E4-BD-BF-E7-94-A8+config.ru+-E8-BF-90-E8-A1-8C-E7-BB-8F-E5-85-B8-E9-A3-8E-E6-A0-BC-E7-9A-84-E5-BA-94-E7-94-A8">使用 <a href="../../../../../../config_ru.html">config.ru</a> 运行经典风格的应用<span><a href="#label-E4-BD-BF-E7-94-A8+config.ru+-E8-BF-90-E8-A1-8C-E7-BB-8F-E5-85-B8-E9-A3-8E-E6-A0-BC-E7-9A-84-E5-BA-94-E7-94-A8">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>编写你的应用:</p>

<pre class="ruby"><span class="ruby-comment"># app.rb</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra&#39;</span>

<span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
  <span class="ruby-string">&#39;Hello world!&#39;</span>
<span class="ruby-keyword">end</span>
</pre>

<p>添加相应的 <code>config.ru</code>：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;./app&#39;</span>
<span class="ruby-identifier">run</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>
</pre>

<h3 id="label-E4-BD-95-E6-97-B6-E4-BD-BF-E7-94-A8+config.ru-EF-BC-9F">何时使用 <a href="../../../../../../config_ru.html">config.ru</a>？<span><a href="#label-E4-BD-95-E6-97-B6-E4-BD-BF-E7-94-A8+config.ru-EF-BC-9F">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>下列情况，推荐使用 <code>config.ru</code>：</p>

<p>部署时使用不同的 <a href="../../../../../../Rack.html">Rack</a> 处理器
(Passenger、Unicorn、Heroku 等)。  使用多个 <code>Sinatra::Base</code> 的子类。  把 <a
href="../../../../../../Sinatra.html">Sinatra</a> 当作中间件使用，而非端点。</p>

<p><em>你不必仅仅因为想使用模块化风格而切换到 <code>config.ru</code>，同样的， 你也不必仅仅因为要运行
<code>config.ru</code> 而切换到模块化风格。</em>*</p>

<h3 id="label-E6-8A-8A+Sinatra+-E5-BD-93-E4-BD-9C-E4-B8-AD-E9-97-B4-E4-BB-B6-E4-BD-BF-E7-94-A8">把 <a href="../../../../../../Sinatra.html">Sinatra</a> 当作中间件使用<span><a href="#label-E6-8A-8A+Sinatra+-E5-BD-93-E4-BD-9C-E4-B8-AD-E9-97-B4-E4-BB-B6-E4-BD-BF-E7-94-A8">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><a href="../../../../../../Sinatra.html">Sinatra</a> 可以使用其它 <a
href="../../../../../../Rack.html">Rack</a> 中间件， 反过来，任何 <a
href="../../../../../../Sinatra.html">Sinatra</a> 应用程序自身都可以被当作中间件，添加到任何 <a
href="../../../../../../Rack.html">Rack</a> 端点前面。 此端点可以是任何 <a
href="../../../../../../Sinatra.html">Sinatra</a> 应用，或任何基于 <a
href="../../../../../../Rack.html">Rack</a> 的应用程序 (Rails/Ramaze/Camping/…)：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra/base&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">LoginScreen</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">enable</span> :<span class="ruby-identifier">sessions</span>

  <span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;/login&#39;</span>) { <span class="ruby-identifier">haml</span> :<span class="ruby-identifier">login</span> }

  <span class="ruby-identifier">post</span>(<span class="ruby-string">&#39;/login&#39;</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;name&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;admin&#39;</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;password&#39;</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;admin&#39;</span>
      <span class="ruby-identifier">session</span>[<span class="ruby-string">&#39;user_name&#39;</span>] = <span class="ruby-identifier">params</span>[<span class="ruby-string">&#39;name&#39;</span>]
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">redirect</span> <span class="ruby-string">&#39;/login&#39;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">MyApp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-comment"># 中间件的执行发生在 before 过滤器之前</span>
  <span class="ruby-identifier">use</span> <span class="ruby-constant">LoginScreen</span>

  <span class="ruby-identifier">before</span> <span class="ruby-keyword">do</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">session</span>[<span class="ruby-string">&#39;user_name&#39;</span>]
      <span class="ruby-identifier">halt</span> <span class="ruby-string">&quot;Access denied, please &lt;a href=&#39;/login&#39;&gt;login&lt;/a&gt;.&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;/&#39;</span>) { <span class="ruby-node">&quot;Hello #{session[&#39;user_name&#39;]}.&quot;</span> }
<span class="ruby-keyword">end</span>
</pre>

<h3 id="label-E5-88-9B-E5-BB-BA-E5-8A-A8-E6-80-81-E5-BA-94-E7-94-A8">创建动态应用<span><a href="#label-E5-88-9B-E5-BB-BA-E5-8A-A8-E6-80-81-E5-BA-94-E7-94-A8">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>有时你希望在运行时创建新应用，而不必把应用预先赋值给常量。这时可以使用 <code>Sinatra.new</code>：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra/base&#39;</span>
<span class="ruby-identifier">my_app</span> = <span class="ruby-constant">Sinatra</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;/&#39;</span>) { <span class="ruby-string">&quot;hi&quot;</span> } }
<span class="ruby-identifier">my_app</span>.<span class="ruby-identifier">run!</span>
</pre>

<p><code>Sinatra.new</code> 接受一个可选的参数，表示要继承的应用：</p>

<pre class="ruby"><span class="ruby-comment"># config.ru (用 rackup 启动)</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra/base&#39;</span>

<span class="ruby-identifier">controller</span> = <span class="ruby-constant">Sinatra</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">enable</span> :<span class="ruby-identifier">logging</span>
  <span class="ruby-identifier">helpers</span> <span class="ruby-constant">MyHelpers</span>
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">map</span>(<span class="ruby-string">&#39;/a&#39;</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">run</span> <span class="ruby-constant">Sinatra</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">controller</span>) { <span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;/&#39;</span>) { <span class="ruby-string">&#39;a&#39;</span> } }
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">map</span>(<span class="ruby-string">&#39;/b&#39;</span>) <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">run</span> <span class="ruby-constant">Sinatra</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">controller</span>) { <span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;/&#39;</span>) { <span class="ruby-string">&#39;b&#39;</span> } }
<span class="ruby-keyword">end</span>
</pre>

<p>当你测试 <a href="../../../../../../Sinatra.html">Sinatra</a> 扩展或在自己的类库中使用 <a
href="../../../../../../Sinatra.html">Sinatra</a> 时，这非常有用。</p>

<p>这也让把 <a href="../../../../../../Sinatra.html">Sinatra</a> 当作中间件使用变得极其容易：</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra/base&#39;</span>

<span class="ruby-identifier">use</span> <span class="ruby-constant">Sinatra</span> <span class="ruby-keyword">do</span>
  <span class="ruby-identifier">get</span>(<span class="ruby-string">&#39;/&#39;</span>) { <span class="ruby-operator">...</span> }
<span class="ruby-keyword">end</span>

<span class="ruby-identifier">run</span> <span class="ruby-constant">RailsProject</span><span class="ruby-operator">::</span><span class="ruby-constant">Application</span>
</pre>

<h2 id="label-E4-BD-9C-E7-94-A8-E5-9F-9F-E5-92-8C-E7-BB-91-E5-AE-9A">作用域和绑定<span><a href="#label-E4-BD-9C-E7-94-A8-E5-9F-9F-E5-92-8C-E7-BB-91-E5-AE-9A">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>当前作用域决定了可以使用的方法和变量。</p>

<h3 id="label-E5-BA-94-E7-94-A8-2F-E7-B1-BB-E4-BD-9C-E7-94-A8-E5-9F-9F">应用/类作用域<span><a href="#label-E5-BA-94-E7-94-A8-2F-E7-B1-BB-E4-BD-9C-E7-94-A8-E5-9F-9F">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>每个 <a href="../../../../../../Sinatra.html">Sinatra</a> 应用都对应
<code>Sinatra::Base</code> 类的一个子类。 如果你在使用顶层 DSL (<code>require
&#39;sinatra&#39;</code>)，那么这个类就是 <code>Sinatra::Application</code>，
否则该类是你显式创建的子类。 在类层面，你可以使用 <code>get</code> 或 <code>before</code> 这样的方法，
但不能访问 <code>request</code> 或 <code>session</code> 对象, 因为对于所有的请求，只有单一的应用类。</p>

<p>通过 <code>set</code> 创建的选项是类方法：</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">MyApp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-comment"># 嘿，我在应用作用域！</span>
  <span class="ruby-identifier">set</span> :<span class="ruby-identifier">foo</span>, <span class="ruby-value">42</span>
  <span class="ruby-identifier">foo</span> <span class="ruby-comment"># =&gt; 42</span>

  <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/foo&#39;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-comment"># 嘿，我已经不在应用作用域了！</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>下列位置绑定的是应用作用域：</p>

<p>应用类内部  通过扩展定义的方法内部  传递给 <code>helpers</code> 方法的代码块内部  作为 <code>set</code>
值的 procs/blocks 内部  传递给 <code>Sinatra.new</code> 的代码块内部</p>

<p>你可以这样访问变量域对象（应用类）：  通过传递给 configure 代码块的对象 (<code>configure { |c| ...
}</code>)  在请求作用域中使用 <code>settings</code></p>

<h3 id="label-E8-AF-B7-E6-B1-82-2F-E5-AE-9E-E4-BE-8B-E4-BD-9C-E7-94-A8-E5-9F-9F">请求/实例作用域<span><a href="#label-E8-AF-B7-E6-B1-82-2F-E5-AE-9E-E4-BE-8B-E4-BD-9C-E7-94-A8-E5-9F-9F">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>对于每个请求，Sinatra 会创建应用类的一个新实例。所有的处理器代码块都在该实例对象的作用域中运行。 在该作用域中， 你可以访问
<code>request</code> 和 <code>session</code> 对象， 或调用渲染方法（如
<code>erb</code>、<code>haml</code>）。你可以在请求作用域中通过 <code>settings</code> 辅助方法
访问应用作用域：</p>

<pre class="ruby"><span class="ruby-keyword">class</span> <span class="ruby-constant">MyApp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-comment"># 嘿，我在应用作用域!</span>
  <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/define_route/:name&#39;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-comment"># &#39;/define_route/:name&#39; 的请求作用域</span>
    <span class="ruby-ivar">@value</span> = <span class="ruby-value">42</span>

    <span class="ruby-identifier">settings</span>.<span class="ruby-identifier">get</span>(<span class="ruby-node">&quot;/#{params[&#39;name&#39;]}&quot;</span>) <span class="ruby-keyword">do</span>
      <span class="ruby-comment"># &quot;/#{params[&#39;name&#39;]}&quot; 的请求作用域</span>
      <span class="ruby-ivar">@value</span> <span class="ruby-comment"># =&gt; nil (并不是同一个请求)</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-string">&quot;Route defined!&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>以下位置绑定的是请求作用域：</p>

<p>get、head、post、put、delete、options、patch、link 和 unlink 代码块内部  before 和 after
过滤器内部  辅助方法内部  模板/视图内部</p>

<h3 id="label-E4-BB-A3-E7-90-86-E4-BD-9C-E7-94-A8-E5-9F-9F">代理作用域<span><a href="#label-E4-BB-A3-E7-90-86-E4-BD-9C-E7-94-A8-E5-9F-9F">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>代理作用域只是把方法转送到类作用域。 然而，它与类作用域的行为并不完全相同, 因为你并不能在代理作用域获得类的绑定。
只有显式地标记为供代理使用的方法才是可用的， 而且你不能和类作用域共享变量/状态。(解释：你有了一个不同的 <code>self</code>)。
你可以通过调用 <code>Sinatra::Delegator.delegate :method_name</code> 显式地添加方法代理。</p>

<p>以下位置绑定的是代理变量域：  顶层绑定，如果你执行了 <code>require &quot;sinatra&quot;</code>  扩展了
<code>Sinatra::Delegator</code> 这一 mixin 的对象内部</p>

<p>自己在这里看一下源码：<a
href="https://github.com/sinatra/sinatra/blob/ca06364/lib/sinatra/base.rb#L1609-1633">Sinatra::Delegator
mixin</a> 已经 <a
href="https://github.com/sinatra/sinatra/blob/ca06364/lib/sinatra/main.rb#L28-30">被扩展进了
main 对象</a>。</p>

<h2 id="label-E5-91-BD-E4-BB-A4-E8-A1-8C">命令行<span><a href="#label-E5-91-BD-E4-BB-A4-E8-A1-8C">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>可以直接运行 <a href="../../../../../../Sinatra.html">Sinatra</a> 应用：</p>

<pre>ruby myapp.rb [-h] [-x] [-e ENVIRONMENT] [-p PORT] [-o HOST] [-s HANDLER]</pre>

<p>选项是：</p>

<pre class="ruby"><span class="ruby-operator">-</span><span class="ruby-identifier">h</span> <span class="ruby-comment"># 显示帮助</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">p</span> <span class="ruby-comment"># 设置端口号 (默认是 4567)</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">o</span> <span class="ruby-comment"># 设定主机名 (默认是 0.0.0.0)</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">e</span> <span class="ruby-comment"># 设置环境 (默认是 development)</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">s</span> <span class="ruby-comment"># 声明 rack 服务器/处理器 (默认是 thin)</span>
<span class="ruby-operator">-</span><span class="ruby-identifier">x</span> <span class="ruby-comment"># 打开互斥锁 (默认是 off)</span>
</pre>

<h3 id="label-E5-A4-9A-E7-BA-BF-E7-A8-8B">多线程<span><a href="#label-E5-A4-9A-E7-BA-BF-E7-A8-8B">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p><em>根据 Konstantin 的 <a
href="http://stackoverflow.com/questions/6278817/is-sinatra-multi-threaded/6282999#6282999)">这个
StackOverflow 答案</a> 改写</em></p>

<p><a href="../../../../../../Sinatra.html">Sinatra</a>
本身并不使用任何并发模型，而是将并发的任务留给底层的 <a href="../../../../../../Rack.html">Rack</a>
处理器（服务器），如 Thin、Puma 或 WEBrick。Sinatra 本身是线程安全的，所以 <a
href="../../../../../../Rack.html">Rack</a>
处理器使用多线程并发模型并无任何问题。这意味着在启动服务器时，你必须指定特定 <a
href="../../../../../../Rack.html">Rack</a> 处理器的正确调用方法。 下面的例子展示了如何启动一个多线程的
<a href="../../../../../../Thin.html">Thin</a> 服务器：</p>

<pre class="ruby"><span class="ruby-comment"># app.rb</span>

<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;sinatra/base&#39;</span>

<span class="ruby-keyword">class</span> <span class="ruby-constant">App</span> <span class="ruby-operator">&lt;</span> <span class="ruby-constant">Sinatra</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>
  <span class="ruby-identifier">get</span> <span class="ruby-string">&#39;/&#39;</span> <span class="ruby-keyword">do</span>
    <span class="ruby-string">&quot;Hello, World&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-constant">App</span>.<span class="ruby-identifier">run!</span>
</pre>

<p>启动服务器的命令是：</p>

<pre>thin --threaded start</pre>

<h2 id="label-E5-BF-85-E8-A6-81-E6-9D-A1-E4-BB-B6">必要条件<span><a href="#label-E5-BF-85-E8-A6-81-E6-9D-A1-E4-BB-B6">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>以下 Ruby 版本受官方支持: &lt;dl&gt;  &lt;dt&gt;Ruby 1.8.7&lt;/dt&gt;  &lt;dd&gt; 
<a href="../../../../../../Sinatra.html">Sinatra</a> 完全支持
1.8.7，但是，除非必要，我们推荐你升级或者切换到  JRuby 或 Rubinius。Sinatra 2.0 之前都不会取消对 1.8.7 
的支持。Ruby 1.8.6 目前已不受支持。  &lt;/dd&gt;</p>

<p>&lt;dt&gt;Ruby 1.9.2&lt;/dt&gt;  &lt;dd&gt;  <a
href="../../../../../../Sinatra.html">Sinatra</a> 完全支持 1.9.2。  不要使用
1.9.2p0，它在运行 <a href="../../../../../../Sinatra.html">Sinatra</a> 程序时会产生
segmentation faults 错误。  至少在 <a
href="../../../../../../Sinatra.html">Sinatra</a> 1.5 发布之前，官方对 1.9.2
的支持仍会继续。  &lt;/dd&gt;</p>

<p>&lt;dt&gt;Ruby 1.9.3&lt;/dt&gt;  &lt;dd&gt;  <a
href="../../../../../../Sinatra.html">Sinatra</a> 完全支持并推荐使用
1.9.3。请注意从更早的版本迁移到 1.9.3 会使所有的会话失效。  直到 <a
href="../../../../../../Sinatra.html">Sinatra</a> 2.0 发布之前，官方仍然会支持 1.9.3。 
&lt;/dd&gt;</p>

<p>&lt;dt&gt;Ruby 2.x&lt;/dt&gt;  &lt;dd&gt;  <a
href="../../../../../../Sinatra.html">Sinatra</a> 完全支持并推荐使用 2.x。目前尚无停止支持
2.x 的计划。  &lt;/dd&gt;</p>

<p>&lt;dt&gt;Rubinius&lt;/dt&gt;  &lt;dd&gt;  <a
href="../../../../../../Sinatra.html">Sinatra</a> 官方支持 Rubinius (Rubinius
&gt;= 2.x)。推荐 <code>gem install puma</code>。  &lt;/dd&gt;</p>

<p>&lt;dt&gt;JRuby&lt;/dt&gt;  &lt;dd&gt;  <a
href="../../../../../../Sinatra.html">Sinatra</a> 官方支持 JRuby 的最新稳定版本，但不推荐在
JRuby 上使用 C 扩展。  推荐 <code>gem install trinidad</code>。  &lt;/dd&gt;
&lt;/dl&gt;</p>

<p>我们也在时刻关注新的 Ruby 版本。</p>

<p>以下 Ruby 实现不受 <a href="../../../../../../Sinatra.html">Sinatra</a>
官方支持，但可以运行 Sinatra：</p>

<p>老版本 JRuby 和 Rubinius  Ruby 企业版<br>  MacRuby、Maglev、IronRuby  Ruby 1.9.0 和
1.9.1 （不推荐使用）</p>

<p>不受官方支持的意思是，如果仅在不受支持的 Ruby 实现上发生错误，我们认为不是我们的问题，而是该实现的问题。</p>

<p>我们同时也针对 ruby-head （MRI 的未来版本）运行 CI，但由于 ruby-head 一直处在变化之中，
我们不能作任何保证。我们期望完全支持未来的 2.x 版本。</p>

<p><a href="../../../../../../Sinatra.html">Sinatra</a> 应该会运行在任何支持上述 Ruby
实现的操作系统上。</p>

<p>如果你使用 MacRuby，你应该 <code>gem install control_tower</code>。</p>

<p><a href="../../../../../../Sinatra.html">Sinatra</a> 目前不支持
Cardinal、SmallRuby、BlueRuby 或其它 1.8.7 之前的 Ruby 版本。</p>

<h2 id="label-E7-B4-A7-E8-B7-9F-E5-89-8D-E6-B2-BF">紧跟前沿<span><a href="#label-E7-B4-A7-E8-B7-9F-E5-89-8D-E6-B2-BF">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>如果你想使用 <a href="../../../../../../Sinatra.html">Sinatra</a> 的最新代码，请放心使用
master 分支来运行你的程序，它是相当稳定的。</p>

<p>我们也会不定期推出 prerelease gems，所以你也可以运行</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-identifier">install</span> <span class="ruby-identifier">sinatra</span> <span class="ruby-operator">-</span><span class="ruby-operator">-</span><span class="ruby-identifier">pre</span>
</pre>

<p>来获得最新的特性。</p>

<h3 id="label-E9-80-9A-E8-BF-87+Bundler+-E4-BD-BF-E7-94-A8+Sinatra">通过 Bundler 使用 <a href="../../../../../../Sinatra.html">Sinatra</a><span><a href="#label-E9-80-9A-E8-BF-87+Bundler+-E4-BD-BF-E7-94-A8+Sinatra">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>如果你想在应用中使用最新的 Sinatra，推荐使用 <a href="http://bundler.io">Bundler</a>。</p>

<p>首先，安装 Bundler，如果你还没有安装的话：</p>

<pre class="ruby"><span class="ruby-identifier">gem</span> <span class="ruby-identifier">install</span> <span class="ruby-identifier">bundler</span>
</pre>

<p>然后，在你的项目目录下创建一个 <code>Gemfile</code>：</p>

<pre class="ruby"><span class="ruby-identifier">source</span> <span class="ruby-string">&#39;https://rubygems.org&#39;</span>
<span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;sinatra&#39;</span>, :<span class="ruby-identifier">github</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&quot;sinatra/sinatra&quot;</span>

<span class="ruby-comment"># 其它依赖</span>
<span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;haml&#39;</span>                    <span class="ruby-comment"># 假如你使用 haml</span>
<span class="ruby-identifier">gem</span> <span class="ruby-string">&#39;activerecord&#39;</span>, <span class="ruby-string">&#39;~&gt; 3.0&#39;</span>  <span class="ruby-comment"># 也许你还需要 ActiveRecord 3.x</span>
</pre>

<p>请注意你必须在 <code>Gemfile</code> 中列出应用的所有依赖项。 然而， <a
href="../../../../../../Sinatra.html">Sinatra</a> 的直接依赖项 (Rack 和 <a
href="../../../../../../Tilt.html">Tilt</a>) 则会被 Bundler 自动获取和添加。</p>

<p>现在你可以这样运行你的应用:</p>

<pre class="ruby"><span class="ruby-identifier">bundle</span> <span class="ruby-identifier">exec</span> <span class="ruby-identifier">ruby</span> <span class="ruby-identifier">myapp</span>.<span class="ruby-identifier">rb</span>
</pre>

<h3 id="label-E4-BD-BF-E7-94-A8-E8-87-AA-E5-B7-B1-E6-9C-AC-E5-9C-B0-E7-9A-84+Sinatra">使用自己本地的 <a href="../../../../../../Sinatra.html">Sinatra</a><span><a href="#label-E4-BD-BF-E7-94-A8-E8-87-AA-E5-B7-B1-E6-9C-AC-E5-9C-B0-E7-9A-84+Sinatra">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>创建一个本地克隆，并通过 <code>$LOAD_PATH</code> 里的 <code>sinatra/lib</code> 目录运行你的应用：</p>

<pre>cd myapp
git clone git://github.com/sinatra/sinatra.git
ruby -I sinatra/lib myapp.rb</pre>

<p>为了在未来更新 <a href="../../../../../../Sinatra.html">Sinatra</a> 源代码：</p>

<pre class="ruby"><span class="ruby-identifier">cd</span> <span class="ruby-identifier">myapp</span><span class="ruby-operator">/</span><span class="ruby-identifier">sinatra</span>
<span class="ruby-identifier">git</span> <span class="ruby-identifier">pull</span>
</pre>

<h3 id="label-E5-85-A8-E5-B1-80-E5-AE-89-E8-A3-85">全局安装<span><a href="#label-E5-85-A8-E5-B1-80-E5-AE-89-E8-A3-85">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>你可以自行编译 <a href="../../../../../../Sinatra.html">Sinatra</a> gem：</p>

<pre>git clone git://github.com/sinatra/sinatra.git
cd sinatra
rake sinatra.gemspec
rake install</pre>

<p>如果你以 root 身份安装 gems，最后一步应该是：</p>

<pre class="ruby"><span class="ruby-identifier">sudo</span> <span class="ruby-identifier">rake</span> <span class="ruby-identifier">install</span>
</pre>

<h2 id="label-E7-89-88-E6-9C-AC">版本<span><a href="#label-E7-89-88-E6-9C-AC">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="../../../../../../Sinatra.html">Sinatra</a> 遵循<a
href="http://semver.org">语义化版本</a>，无论是 SemVer 还是 SemVerTag。</p>

<h2 id="label-E6-9B-B4-E5-A4-9A-E8-B5-84-E6-96-99">更多资料<span><a href="#label-E6-9B-B4-E5-A4-9A-E8-B5-84-E6-96-99">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p><a href="http://www.sinatrarb.com/">项目官网</a> - 更多文档、新闻和其它资源的链接。  <a
href="http://www.sinatrarb.com/contributing">贡献</a> - 找到一个 bug？需要帮助？有了一个
patch？  <a href="https://github.com/sinatra/sinatra/issues">问题追踪</a>  <a
href="https://twitter.com/sinatra">Twitter</a>  <a
href="http://groups.google.com/group/sinatrarb/topics">邮件列表</a>  IRC: <a
href="irc://chat.freenode.net/#sinatra">#sinatra</a> on <a
href="http://freenode.net">freenode.net</a>  <a
href="https://sinatrarb.slack.com">Sinatra & Friends</a> on Slack，点击 <a
href="https://sinatra-slack.herokuapp.com/">这里</a> 获得邀请。  <a
href="https://github.com/sinatra/sinatra-book/">Sinatra Book</a> Cookbook
教程  <a href="http://recipes.sinatrarb.com/">Sinatra Recipes</a> 社区贡献的实用技巧 
<a href="http://www.rubydoc.info">www.rubydoc.info</a>/ 上<a
href="http://www.rubydoc.info//gems/sinatra">最新版本</a>或<a
href="http://www.rubydoc.info/github/sinatra/sinatra">当前 HEAD</a> 的 API 文档 
<a href="https://travis-ci.org/sinatra/sinatra">CI 服务器</a></p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

